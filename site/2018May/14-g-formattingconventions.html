<!DOCTYPE html>
<!-- saved from url=(0043)http://hl7.org/fhir/2016May/FHIRPath.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

  <title>Appendix G – Formatting Conventions</title>

  
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="http://cql.hl7.org" name="author"/>

  <link rel="stylesheet" href="dist/fhir.css"/>
  <link rel="Prev" href="history.html"/>

    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="dist/bootstrap.css"/>
  <link rel="stylesheet" href="dist/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="dist/project.css"/>
  <link rel="stylesheet" href="dist/pygments-manni.css"/>
	<link rel="stylesheet" href="dist/jquery-ui.css"/>
	<link rel="stylesheet" href="dist/cql.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="dist/favicon.png"/>
  
</head>
<body data-feedly-mini="yes">
	<div id="segment-header" class="segment">  <!-- segment-header -->	
		<div class="container">  <!-- container -->
			<a id="logo" no-external="true" href="index.html"><img alt="logo hl7" src="dist/hl7-logo.png"/> </a>
			<div id="hl7-status">
				<b>Clinical Quality Language STU3 Ballot (1.3)</b>
			</div>       	
			
			<div id="hl7-nav">
				 <a id="hl7-logo" no-external="true" href="http://www.hl7.org/">
					<img height="50" alt="visit the hl7 website" width="42" src="dist/hl7-logo.png"/>
				</a> 
			</div>       	
			<!--<div id="hl7-nav"><a id="hl7-logo" no-external="true" href="http://cql.hl7.org/search.cfm"><img alt="Search CQL" src="dist/search.png"/></a></div>-->
		</div>
		<div class="container">  <!-- container -->
	</div></div>  <!-- /segment-header -->	

	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->
 	      		
 	      		      		
			<nav class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
					</button>
					<a class="navbar-brand hidden" href="index.html">CQL</a>
					<div class="nav-collapse collapse navbar-inverse-collapse">
						<ul class="nav navbar-nav">
              <li><a href="index.html">Documentation</a></li>
              <li><a href="grammar.html">Grammar</a></li>
			  <li><a href="elm.html">ELM</a></li>
			  <li><a href="examples.html">Examples</a></li>
              <li><a href="tests.html">Tests</a></li>
              <li><a href="../history.html">Version History</a><!--current--></li>

						</ul>
					</div>  <!-- /.nav-collapse -->

          </div>  <!-- /.container -->
			</nav>  <!-- /.navbar -->
      		
				
  <!-- /HEADER CONTENT -->				
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->
	
	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-9">
    
<table class="cols"><tbody><tr><td id="wg"><a href="http://www.hl7.org/special/committees/dss/index.cfm" _target="blank">Clinical Decision Support</a> Work Group</td><td id="fmm"><a href="http://hl7.org/fhir/resource.html#maturity">Maturity Level</a>: 4</td><td id="ballot"><a href="http://hl7.org/fhir/help.html#status">Ballot Status</a>: STU 3</a></td></tr></tbody></table>
    
<h1>Appendix G – Formatting Conventions</h1>
    
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#case-related-conventions">1. Case-Related Conventions</a>
<ul class="sectlevel2">
<li><a href="#cql-defined-casing">1.1. CQL-Defined Casing</a></li>
</ul>
</li>
<li><a href="#spacing-conventions">2. Spacing Conventions</a></li>
<li><a href="#operators-and-functions-1">3. Operators and Functions</a>
<ul class="sectlevel2">
<li><a href="#operators">3.1. Operators</a></li>
<li><a href="#functions-1">3.2. Functions</a></li>
</ul>
</li>
<li><a href="#literals-1">4. Literals</a>
<ul class="sectlevel2">
<li><a href="#quantities-1">4.1. Quantities</a></li>
<li><a href="#intervals">4.2. Intervals</a></li>
<li><a href="#lists-and-tuples">4.3. Lists and Tuples</a></li>
</ul>
</li>
<li><a href="#queries-5">5. Queries</a></li>
<li><a href="#syntax-highlighting">6. Syntax Highlighting</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guidance describes syntactic conventions for formatting statements and expressions of Clinical Quality Language (CQL) that encourage consistency, readability, maintainability, and reusability of the resulting CQL. Throughout the discussing, the following simplified syntax element definitions are used. Formal definitions of these elements can be found in the CQL Specification.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Whitespace</em> - Whitespace defines the separation between all tokens in the language (e.g. spaces, tabs, returns, etc.)</p>
</li>
<li>
<p><em>Comment</em> - Comments are ignored by the language, allowing for descriptive text to be included</p>
</li>
<li>
<p><em>Literal</em> - Literals allow basic values to be represented within the language</p>
</li>
<li>
<p><em>Symbol</em> - Symbols such as +, -, *, and /</p>
</li>
<li>
<p><em>Keyword</em> - Grammar-recognized keywords such as define and where</p>
</li>
<li>
<p><em>Identifier</em> - User-defined identifiers</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="case-related-conventions"><a class="anchor" href="#case-related-conventions"></a>1. Case-Related Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CQL is a case-sensitive language, meaning that the grammar uses the case of letters when comparing identifiers and keywords. For example, the keyword define must be expressed with all lower case letters, Define is not recognized. This aspect of CQL encourages consistency and reduces the potential for naming clashes with keywords in the language.</p>
</div>
<div class="paragraph">
<p>This discussion defines the following terms to describe different approaches to casing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lowercase - All letters are lowercase</p>
</li>
<li>
<p>camelCase - First letters of words are capitalized, except the first word, with no whitespace characters allowed</p>
</li>
<li>
<p>PascalCase - First letters of words are capitalized, including words not capitalized in Title Case like "and" and "of", with no whitespace characters allowed</p>
</li>
<li>
<p>Title Case - Standard title casing including spaces and tabs, but no other whitespace characters allowed</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="cql-defined-casing"><a class="anchor" href="#cql-defined-casing"></a>1.1. CQL-Defined Casing</h3>
<div class="paragraph">
<p>These casings are defined by the specification, so they are not conventions per se, but are highlighted here for completeness.</p>
</div>
<div class="paragraph">
<p>Keywords within CQL are always lowercase.</p>
</div>
<div class="paragraph">
<p>System library functions are always PascalCase.</p>
</div>
<div class="paragraph">
<p>System type names are always PascalCase.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spacing-conventions"><a class="anchor" href="#spacing-conventions"></a>2. Spacing Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CQL treats all whitespace as a single token, meaning that it doesn&#8217;t matter whether you use spaces or tabs to separate keywords and other tokens, so long as you have some whitespace as defined by the rules of the language. This allows authors to format their expressions using whatever conventions are appropriate for their environment. While this flexibility is beneficial in that it allows CQL to be used in a wide variety of settings, it can also lead to inconsistent formatting, reducing readability. As such, these simple conventions are recommended to ensure consistent formatting:</p>
</div>
<div class="paragraph">
<p>Use tabs to indent, rather than multiple spaces. The use of tabs reduces keystrokes and simplifies maintenance of the resulting CQL.</p>
</div>
<div class="paragraph">
<p>Indent using a single tab for related content. This makes it visually clear where the dependencies are in any given expression and helps to organize statements and clauses.</p>
</div>
<div class="paragraph">
<p>Always use a space after a comma. This helps to visually separate items in a list.</p>
</div>
<div class="paragraph">
<p>Never use a space before or after a period. The period in CQL is a qualifier, and adding whitespace disconnects the content visually, implying a separation that is not present.</p>
</div>
<div class="paragraph">
<p>To help maintain readability of CQL, lines should fit reasonably within standard view screens. Around 100 characters per line is a good rule of thumb.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="operators-and-functions-1"><a class="anchor" href="#operators-and-functions-1"></a>3. Operators and Functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CQL distinguishes between <em>operators</em>, which use symbols such as +, *, and and, and <em>functions</em>, which use identifiers followed by parentheses to provide the arguments to the function.</p>
</div>
<div class="sect2">
<h3 id="operators"><a class="anchor" href="#operators"></a>3.1. Operators</h3>
<div class="paragraph">
<p>Operators are always keywords, and always lowercase.</p>
</div>
<div class="paragraph">
<p>Binary operators (operators with two arguments) are always infix.</p>
</div>
<div class="paragraph">
<p>Unary operators (operators with one argument) are always prefix.</p>
</div>
<div class="paragraph">
<p>Always use a space before and after operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="functions-1"><a class="anchor" href="#functions-1"></a>3.2. Functions</h3>
<div class="paragraph">
<p>When defining a function, always use a PascalCase identifier.</p>
</div>
<div class="paragraph">
<p>Functions always use parentheses, even if the function has no arguments.</p>
</div>
<div class="paragraph">
<p>If the function has no arguments, do not put a space between the parentheses.</p>
</div>
<div class="paragraph">
<p>Never put a space between the function name and the argument list, or between the opening and closing parentheses and the arguments.</p>
</div>
<div class="paragraph">
<p>Always use spaces after commas to separate arguments.</p>
</div>
<div class="paragraph">
<p>If necessary, an argument list can be continued across multiple lines, but keep the opening parenthesis on the same line as the function identifier, and indent subsequent lines one level.</p>
</div>
<div class="paragraph">
<p>When continuing an argument list, do not attempt to right-align indented content, as this leads to unnecessary maintenance to preserve the alignment.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="literals-1"><a class="anchor" href="#literals-1"></a>4. Literals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Literals in CQL allow for the expression of values of each of the system-defined types.</p>
</div>
<div class="sect2">
<h3 id="quantities-1"><a class="anchor" href="#quantities-1"></a>4.1. Quantities</h3>
<div class="paragraph">
<p>For Quantities, always put a space between the numerical value and the unit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">45 'mg'
28 'mm[Hg]'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="intervals"><a class="anchor" href="#intervals"></a>4.2. Intervals</h3>
<div class="paragraph">
<p>Intervals can be expressed based on any type that supports ordered comparison (Integer, Decimal, DateTime, Time, Quantity).</p>
</div>
<div class="paragraph">
<p>Intervals use standard mathematical notation to indicate whether the boundaries are open or closed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Interval[1, 5]
Interval(1, 9)
Interval[@2015-01-01T00:00:00.0Z, @2016-01-01T00:00:00.0Z)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Never put a space before or after the opening or closing boundary.</p>
</div>
<div class="paragraph">
<p>Always put a space after the comma.</p>
</div>
</div>
<div class="sect2">
<h3 id="lists-and-tuples"><a class="anchor" href="#lists-and-tuples"></a>4.3. Lists and Tuples</h3>
<div class="paragraph">
<p>Lists in CQL can contain elements of any type.</p>
</div>
<div class="paragraph">
<p>Always separate the contents of the list with a space to help visually distinguish the braces from parentheses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">{ 1, 2, 3 }
Sum({ 1, 2, 3 })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tuples in CQL contain named elements of any type.</p>
</div>
<div class="paragraph">
<p>Always separate the contents of the tuple with a space:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">{ name: 'Patrick', birthDate: @2014-01-01 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Do not put a space between the tuple element name and the value specifier (:), but always put a space between the value specifier and the value.</p>
</div>
<div class="paragraph">
<p>The Tuple keyword is optional, but this means that the empty tuple has a special construct:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">{ } // empty list
{ : } // empty Tuple</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="queries-5"><a class="anchor" href="#queries-5"></a>5. Queries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The central expression construct of CQL is the query. The query construct in CQL is clause-based:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">&lt;primary source&gt; &lt;alias&gt;
  &lt;with or without clauses&gt;
  &lt;where clause&gt;
  &lt;return clause&gt;
  &lt;sort clause&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In general, simple queries can fit on a single line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">["Encounter, Performed": "Inpatient"] Encounter where duration in days of Encounter.period &gt;= 120</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a query, or a clause of a query, needs more than one line, continue the clauses indented beneath the query or clause:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">"Pharyngitis Encounters with Antibiotics" Pharyngitis
  with ["Laboratory Test, Performed": "Group A Streptococcus Test"] Test
    such that Test.result is not null
      and Test.startDateTime in Interval[Pharyngitis.startTime - 3 days, Pharyngitis.stopDateTime + 3 days]</code></pre>
</div>
</div>
<div class="paragraph">
<p>When a query needs multiple lines, each clause should start on a new line indented one level.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="syntax-highlighting"><a class="anchor" href="#syntax-highlighting"></a>6. Syntax Highlighting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Syntax highlighting is an important aspect of readability. In order to enable different environments to provide consistent highlighting, the following syntactic categories are defined for CQL:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Symbols</p>
</li>
<li>
<p>Keywords</p>
</li>
<li>
<p>Operators</p>
</li>
<li>
<p>Literals</p>
<div class="ulist">
<ul>
<li>
<p>Numbers</p>
</li>
<li>
<p>Strings</p>
</li>
<li>
<p>Dates and Times</p>
</li>
</ul>
</div>
</li>
<li>
<p>Comments</p>
</li>
<li>
<p>Identifiers</p>
<div class="ulist">
<ul>
<li>
<p>Type Identifiers</p>
</li>
<li>
<p>Variable Identifiers</p>
</li>
<li>
<p>Function Identifiers</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>


</div>


				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->
        
    </div>  <!-- /segment-content -->


	<div id="segment-footer" class="segment">  <!-- segment-footer -->
		<div class="container">  <!-- container -->
			<div class="inner-wrapper">
				<p>
        &copy; HL7.org 2014+. CQL STU3 (1.3 Draft) generated on 2019-03-17 11:17:12 -0600
        <span style="color: #FFFF77">| 
               <a style="color: #81BEF7" rel="license" href="license.html">License</a> |
               <a style="color: #81BEF7" target="_blank" href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=400">Propose a change</a>
        </span>
        </p>
			</div>  <!-- /inner-wrapper -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-footer -->

	
	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->
    
      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="dist/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script src="dist/bootstrap.min.js"> </script>
<script src="dist/respond.min.js"> </script>

<script src="dist/fhir.js"> </script>

  <!-- Analytics Below
================================================== -->


<div id="feedly-mini" title="feedly Mini tookit"></div></body></html>