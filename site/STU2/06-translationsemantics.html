<!DOCTYPE html>
<!-- saved from url=(0043)http://hl7.org/fhir/2016May/FHIRPath.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

  <title>6. Translation Semantics</title>

  
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="http://cql.hl7.org" name="author"/>

  <link rel="stylesheet" href="dist/fhir.css"/>
  <link rel="Prev" href="history.html"/>

    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="dist/bootstrap.css"/>
  <link rel="stylesheet" href="dist/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="dist/project.css"/>
  <link rel="stylesheet" href="dist/pygments-manni.css"/>
	<link rel="stylesheet" href="dist/jquery-ui.css"/>
	<link rel="stylesheet" href="dist/cql.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="dist/favicon.png"/>
  
</head>
<body data-feedly-mini="yes">
	<div id="segment-header" class="segment">  <!-- segment-header -->	
		<div class="container">  <!-- container -->
			<a id="logo" no-external="true" href="index.html"><img alt="logo hl7" src="dist/hl7-logo.png"/> </a>
			<div id="hl7-status">
				<b>Clinical Quality Language Release 1 STU2 (w/ Errata) (1.2.1)</b>
			</div>       	
			
			<div id="hl7-nav">
				 <a id="hl7-logo" no-external="true" href="http://www.hl7.org/">
					<img height="50" alt="visit the hl7 website" width="42" src="dist/hl7-logo.png"/>
				</a> 
			</div>       	
			<!--<div id="hl7-nav"><a id="hl7-logo" no-external="true" href="http://cql.hl7.org/STU2/search.cfm"><img alt="Search CQL" src="dist/search.png"/></a></div>-->
		</div>
		<div class="container">  <!-- container -->
	</div></div>  <!-- /segment-header -->	

	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->
 	      		
 	      		      		
			<nav class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
					</button>
					<a class="navbar-brand hidden" href="index.html">CQL</a>
					<div class="nav-collapse collapse navbar-inverse-collapse">
						<ul class="nav navbar-nav">
              <li><a href="index.html">Documentation</a></li>
              <li><a href="grammar.html">Grammar</a></li>
			  <li><a href="elm.html">ELM</a></li>
			  <li><a href="examples.html">Examples</a></li>
              <li><a href="tests.html">Tests</a></li>
              <li><a href="../history.html">Version History</a><!--current--></li>

						</ul>
					</div>  <!-- /.nav-collapse -->

          </div>  <!-- /.container -->
			</nav>  <!-- /.navbar -->
      		
				
  <!-- /HEADER CONTENT -->				
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->
	
	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-9">
    
<table class="cols"><tbody><tr><td id="wg"><a href="http://www.hl7.org/special/committees/dss/index.cfm" _target="blank">Clinical Decision Support</a> Work Group</td><td id="fmm"><a href="http://hl7.org/fhir/resource.html#maturity">Maturity Level</a>: 4</td><td id="ballot"><a href="http://hl7.org/fhir/help.html#status">Ballot Status</a>: STU 2.1</a></td></tr></tbody></table>
    
<h1>6. Translation Semantics</h1>
    
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#cql-to-elm">1. CQL-to-ELM</a>
<ul class="sectlevel2">
<li><a href="#declarations-1">1.1. Declarations</a></li>
<li><a href="#types-1">1.2. Types</a></li>
<li><a href="#literals-and-selectors-1">1.3. Literals and Selectors</a></li>
<li><a href="#functions">1.4. Functions</a></li>
<li><a href="#phrases">1.5. Phrases</a></li>
<li><a href="#queries-3">1.6. Queries</a></li>
</ul>
</li>
<li><a href="#elm-to-cql">2. ELM-to-CQL</a>
<ul class="sectlevel2">
<li><a href="#foreach">2.1. ForEach</a></li>
<li><a href="#times">2.2. Times</a></li>
<li><a href="#filter">2.3. Filter</a></li>
<li><a href="#sort-1">2.4. Sort</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As discussed in the introductory section, this specification covers three levels of definition, the Conceptual or Author level, the Logical level, and the Physical level. The Conceptual level is concerned with the representation of logic in a format suitable for authoring and consumption by clinical experts; the Physical level is concerned with the representation of logic in a format suitable for processing and transferring by machines; and the Logical level is concerned with providing a mapping between the Conceptual and Physical levels in a way that preserves the semantics of the logic represented while also enabling integration and execution functionality.</p>
</div>
<div class="paragraph">
<p>To achieve these goals, the Logical level establishes a semantically complete bi-directional mapping between the Conceptual and Physical levels. This chapter describes this mapping in more detail, and sketches a process for translation from the Conceptual to the Logical, and from the Logical to the Conceptual. The Physical level is an isomorphic concrete realization of the Logical level; translation between the Logical and Physical levels is therefore a matter of serialization and realization of the data model, and is covered in detail in the Physical Representation chapter.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cql-to-elm"><a class="anchor" href="#cql-to-elm"></a>1. CQL-to-ELM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every statement of CQL has a semantically equivalent representation in ELM. As such, it is possible to programmatically translate any statement of CQL into its equivalent ELM representation. The following sections define the mappings between the language elements of CQL and their equivalent ELM representations, as well as providing a sketch for how these mappings could be used to translate from CQL to ELM.</p>
</div>
<div class="sect2">
<h3 id="declarations-1"><a class="anchor" href="#declarations-1"></a>1.1. Declarations</h3>
<div class="paragraph">
<p>In both CQL and ELM, the basic container for all declarations is the <em>Library</em>. In CQL, a library corresponds to a single source document, usually represented as a text file. In ELM, a library is represented as a single instance of the <em>Library</em> class which contains all the declarations for the library.</p>
</div>
<div class="paragraph">
<p>The identifier and version of the library are set as part of the library metadata.</p>
</div>
<div class="paragraph">
<p>The following table specifies the ELM equivalent for each CQL declaration:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Declaration</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Library</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">using</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UsingDef</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">include</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncludeDef</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">codesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CodeSystemDef</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">valueset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ValueSetDef</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ParameterDef</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">define</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ExpressionDef</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">function</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FunctionDef</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑A</p>
</div>
</div>
<div class="sect2">
<h3 id="types-1"><a class="anchor" href="#types-1"></a>1.2. Types</h3>
<div class="paragraph">
<p>To represent types, CQL uses the <em>type-specifier</em> construct. In ELM, an equivalent TypeSpecifier abstract class is defined, with appropriate subclasses to represent the various types of specifiers, as detailed in the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Specifier</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>named-type-specifier</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NamedTypeSpecifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>interval-type-specifier</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IntervalTypeSpecifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>list-type-specifier</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ListTypeSpecifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tuple-type-specifier</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TupleTypeSpecifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>choice-type-specifier</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ChoiceTypeSpecifier</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑B</p>
</div>
<div class="paragraph">
<p>Note that for named type specifiers, the name of the type is a qualified identifier, with the qualifier representing the name of the data model that defines the type. For example, the system-defined integer type in CQL is named System.Integer, with System as the name of the data model, and Integer as the name of the type.</p>
</div>
</div>
<div class="sect2">
<h3 id="literals-and-selectors-1"><a class="anchor" href="#literals-and-selectors-1"></a>1.3. Literals and Selectors</h3>
<div class="paragraph">
<p>The following table defines the mapping between the various CQL literals and their equivalent representation in ELM:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Literal</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>integer-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Literal (valueType="Integer")</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>decimal-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Literal (valueType="Decimal")</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>quantity-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Literal (valueType="String")</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>date-time-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateTime</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>time-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>interval-selector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>list-selector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tuple-selector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tuple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>instance-selector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instance</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑C</p>
</div>
</div>
<div class="sect2">
<h3 id="functions"><a class="anchor" href="#functions"></a>1.4. Functions</h3>
<div class="paragraph">
<p>Most of the functions and operations available in CQL have a direct counterpart in ELM. For ease of reference, the operations and functions are grouped the same way they are in the CQL Reference.</p>
</div>
<div class="sect3">
<h4 id="logical-operators-2"><a class="anchor" href="#logical-operators-2"></a>1.4.1. Logical Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">and</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">And</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">or</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Or</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">xor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">implies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implies</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑D</p>
</div>
</div>
<div class="sect3">
<h4 id="type-operators"><a class="anchor" href="#type-operators"></a>1.4.2. Type Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">as</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">convert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">is</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Children</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Children</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descendents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descendents</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑E</p>
</div>
<div class="paragraph">
<p>Note that for supported conversions, a more efficient implementation would be to emit a specific operator to perform the conversion, rather than a generic Convert as specified here. For example, consider the following CQL conversion expression:</p>
</div>
<div class="paragraph">
<p>convert B to String</p>
</div>
<div class="paragraph">
<p>Rather than emitting a <em>Convert</em>, an implementation could emit a <em>ToString</em> which took an integer parameter. This would prevent the run-time type check required for implementation of a general purpose <em>Convert</em> operator.</p>
</div>
<div class="paragraph">
<p>Note also that when translating to ELM, an implementation could emit all implicit conversions directly, avoiding the need for an ELM translator or execution engine to deal with implicit conversion.</p>
</div>
</div>
<div class="sect3">
<h4 id="nullological-operators-2"><a class="anchor" href="#nullological-operators-2"></a>1.4.3. Nullological Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coalesce</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coalesce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">is null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IsNull</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">is false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IsFalse</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">is true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IsTrue</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑F</p>
</div>
</div>
<div class="sect3">
<h4 id="comparison-operators-3"><a class="anchor" href="#comparison-operators-3"></a>1.4.4. Comparison Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">between</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">And of comparisons (for point types) or IncludedIn (for Interval types)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GreaterOrEqual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LessOrEqual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equivalent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NotEqual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not of Equivalent</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑G</p>
</div>
</div>
<div class="sect3">
<h4 id="arithmetic-operators-3"><a class="anchor" href="#arithmetic-operators-3"></a>1.4.5. Arithmetic Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Abs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Abs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceiling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceiling</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ln</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ln</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maximum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MaxValue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">minimum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MinValue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modulo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">- (unary minus)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">predecessor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predecessor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Power</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Round</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Round</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">successor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Successor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Truncate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Truncate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">div</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TruncatedDivide</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑H</p>
</div>
</div>
<div class="sect3">
<h4 id="string-operators-2"><a class="anchor" href="#string-operators-2"></a>1.4.6. String Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Combine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Combine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+, &amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Concatenate (when &amp; is used, a Coalesce(X, ‘’) is applied to each operand</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EndsWith</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EndsWith</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indexer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LastPositionOf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LastPositionOf</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lower</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lower</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PositionOf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PositionOf</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReplaceMatches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReplaceMatches</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Split</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Split</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StartsWith</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StartsWith</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Substring</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Substring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upper</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑I</p>
</div>
</div>
<div class="sect3">
<h4 id="datetime-operators-1"><a class="anchor" href="#datetime-operators-1"></a>1.4.7. Date/Time Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">after</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">before</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateTime</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>component</em> from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateTimeComponentFrom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">difference..between</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DifferenceBetween</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">duration..between</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DurationBetween</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Now</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Now</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SameAs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">same or after</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SameOrAfter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">same or before</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SameOrBefore</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeOfDay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeOfDay</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Today</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Today</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑J</p>
</div>
</div>
<div class="sect3">
<h4 id="interval-operators-2"><a class="anchor" href="#interval-operators-2"></a>1.4.8. Interval Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">after</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">before</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collapse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collapse</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">end of</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ends</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">except</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Except</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Includes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">during</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncludedIn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">included in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncludedIn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">intersect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intersect</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equivalent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">meets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">meets after</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MeetsAfter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">meets before</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MeetsBefore</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NotEqual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not of Equivalent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">overlaps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overlaps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">on or after</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SameOrAfter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">on or before</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SameOrBefore</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">overlaps after</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OverlapsAfter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">overlaps before</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OverlapsBefore</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">point from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PointFrom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properly includes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ProperlyIncludes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properly included in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ProperlyIncludedIn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properly during</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ProperlyIncludedIn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">start of</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">starts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Starts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">union</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Union</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">width of</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Width</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑K</p>
</div>
</div>
<div class="sect3">
<h4 id="list-operators-1"><a class="anchor" href="#list-operators-1"></a>1.4.9. List Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">distinct</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Distinct</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">except</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Except</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">exists</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exists</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">flatten</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flatten</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">First</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Includes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">included in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncludedIn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indexer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IndexOf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IndexOf</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">intersect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intersect</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equivalent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NotEqual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not of Equivalent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properly includes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ProperlyIncludes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properly included in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ProperlyIncludedIn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">singleton from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SingletonFrom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip(n)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slice(n, null)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slice(1, null)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Take(n)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slice(0, n)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">union</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Union</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑L</p>
</div>
</div>
<div class="sect3">
<h4 id="aggregate-operators-2"><a class="anchor" href="#aggregate-operators-2"></a>1.4.10. Aggregate Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AllTrue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AllTrue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AnyTrue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AnyTrue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avg</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Count</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Min</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Median</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Median</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mode</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PopulationStdDev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PopulationStdDev</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PopulationVariance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PopulationVariance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StdDev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StdDev</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sum</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variance</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑M</p>
</div>
</div>
<div class="sect3">
<h4 id="clinical-operators-2"><a class="anchor" href="#clinical-operators-2"></a>1.4.11. Clinical Operators</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Operator</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AgeIn<em>-precision</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CalculateAge (with patient birthdate reference supplied)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AgeIn<em>-precision-</em>At</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CalculateAgeAt (with patient birthdate reference supplied)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CalculateAgeIn<em>-precision</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CalculateAge</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CalculateAgeIn<em>-precision-</em>At</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CalculateAgeAt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">~</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equivalent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">in (Codesystem)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InCodeSystem</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">in (Valueset)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InValueSet</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑N</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="phrases"><a class="anchor" href="#phrases"></a>1.5. Phrases</h3>
<div class="paragraph">
<p>In general, the various phrases of CQL do not have a direct representation in ELM, but rather result in operator and function invocations which then do have representations. For more information, see the Timing Phrases section.</p>
</div>
</div>
<div class="sect2">
<h3 id="queries-3"><a class="anchor" href="#queries-3"></a>1.6. Queries</h3>
<div class="paragraph">
<p>The CQL query construct has a direct representation in ELM, as shown by the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CQL Construct</th>
<th class="tableblock halign-left valign-top">ELM Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>query</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>aliased-query-source</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AliasedQuerySource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>let-clause</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LetClause</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>with-clause</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>without-clause</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Without</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>where-clause</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query (where element)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>return-clause</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReturnClause</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>sort-clause</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SortClause</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 6‑O</p>
</div>
<div class="paragraph">
<p>Althought these elements can be used to directly represent the <em>query</em> construct of CQL, it is also possible to represent queries using a series of equivalent operations that simplify implementation. ELM defines simplified operations specifically for this purpose. See the Implementing Query Evaluation section for more information on how to transform any given CQL query into an equivalent representation using these operators.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="elm-to-cql"><a class="anchor" href="#elm-to-cql"></a>2. ELM-to-CQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to being able to translate CQL to ELM, any given expression of ELM can be represented in CQL. Support for this direction of translation would be useful for applications that produce ELM from another source, and need to display a human-readable representation of the logic.</p>
</div>
<div class="paragraph">
<p>This bi-directionality means that a given expression of CQL could be translated to ELM, and then back again. However, because ELM is typically a more primitive representation, this process is not necessarily a “round-trip”. For example, consider the following CQL:</p>
</div>
<div class="paragraph">
<p>A starts within 3 days of start B</p>
</div>
<div class="paragraph">
<p>This will actually result in the following ELM output:</p>
</div>
<div class="paragraph">
<p>&lt;expression xsi:type="In"&gt;<br/>
&lt;operand xsi:type="DurationBetween" precision="Day"&gt;<br/>
&lt;operand xsi:type="Start"&gt;<br/>
&lt;operand xsi:type="ExpressionRef" name="A"/&gt;<br/>
&lt;/operand&gt;<br/>
&lt;operand xsi:type="Start"&gt;<br/>
&lt;operand xsi:type="ExpressionRef" name="B"/&gt;<br/>
&lt;/operand&gt;<br/>
&lt;/operand&gt;<br/>
&lt;operand xsi:type="Interval"&gt;<br/>
&lt;low xsi:type="Literal" valueType="xs:int" value="-3"/&gt;<br/>
&lt;high xsi:type="Literal" valueType="xs:int" value="3"/&gt;<br/>
&lt;/operand&gt;<br/>
&lt;/expression&gt;</p>
</div>
<div class="paragraph">
<p>The above expression, rendered directly back to CQL would be:</p>
</div>
<div class="paragraph">
<p>days between start of A and start of B in [-3, 3]</p>
</div>
<div class="paragraph">
<p>These expressions are semantically equivalent, but not syntactically the same, as the first is targeted at understandability, while the second is targeted at implementation. To preserve “round-trip” capability, an implementation could emit annotations with the ELM using the extension mechanism of the base <em>Element</em> class to provide the original source CQL.</p>
</div>
<div class="paragraph">
<p>In general, the mapping from ELM to CQL is simply the opposite of the mapping described in the previous section. However, there are several special-purpose operators that are only defined in ELM which are used to simplify query implementation. For completeness, the mappings from those operators to CQL are described here to ensure that any given ELM document could be translated to CQL.</p>
</div>
<div class="paragraph">
<p>The examples in the following section will make use of the following expression definitions:</p>
</div>
<div class="paragraph">
<p>&lt;def name="List1"&gt;<br/>
&lt;expression xsi:type="List"&gt;<br/>
&lt;element xsi:type="Tuple"&gt;<br/>
&lt;element name="X"&gt;<br/>
&lt;value xsi:type="Literal" valueType="xs:int" value="1"/&gt;<br/>
&lt;/element&gt;<br/>
&lt;/element&gt;<br/>
&lt;element xsi:type="Tuple"&gt;<br/>
&lt;element name="X"&gt;<br/>
&lt;value xsi:type="Literal" valueType="xs:int" value="2"/&gt;<br/>
&lt;/element&gt;<br/>
&lt;/element&gt;<br/>
&lt;element xsi:type="Tuple"&gt;<br/>
&lt;element name="X"&gt;<br/>
&lt;value xsi:type="Literal" valueType="xs:int" value="3"/&gt;<br/>
&lt;/element&gt;<br/>
&lt;/element&gt;<br/>
&lt;/expression&gt;<br/>
&lt;/def&gt;<br/>
&lt;def name="List2"&gt;<br/>
&lt;expression xsi:type="List"&gt;<br/>
&lt;element xsi:type="Tuple"&gt;<br/>
&lt;element name="Y"&gt;<br/>
&lt;value xsi:type="Literal" valueType="xs:int" value="1"/&gt;<br/>
&lt;/element&gt;<br/>
&lt;/element&gt;<br/>
&lt;element xsi:type="Tuple"&gt;<br/>
&lt;element name="Y"&gt;<br/>
&lt;value xsi:type="Literal" valueType="xs:int" value="2"/&gt;<br/>
&lt;/element&gt;<br/>
&lt;/element&gt;<br/>
&lt;element xsi:type="Tuple"&gt;<br/>
&lt;element name="Y"&gt;<br/>
&lt;value xsi:type="Literal" valueType="xs:int" value="3"/&gt;<br/>
&lt;/element&gt;<br/>
&lt;/element&gt;<br/>
&lt;/expression&gt;<br/>
&lt;/def&gt;</p>
</div>
<div class="sect2">
<h3 id="foreach"><a class="anchor" href="#foreach"></a>2.1. ForEach</h3>
<div class="paragraph">
<p>The <em>ForEach</em> operator in ELM takes an argument of type list and returns a list with an element for each source element that is the result of evaluating the <em>element</em> expression. For example:</p>
</div>
<div class="paragraph">
<p>&lt;expression xsi:type="ForEach"&gt;<br/>
&lt;source xsi:type="ExpressionRef" name="List1"/&gt;<br/>
&lt;element xsi:type="Property" path="X"/&gt;<br/>
&lt;/expression&gt;</p>
</div>
<div class="paragraph">
<p>This expression returns the list of integers from the List1 expression. Although there is no direct counterpart in CQL, this expression can be represented using the <em>query</em> construct. The source for the <em>ForEach</em> is used as the primary query source, and the <em>element</em> expression is represented using the <em>return-clause</em>:</p>
</div>
<div class="paragraph">
<p>List1 A return A.X</p>
</div>
</div>
<div class="sect2">
<h3 id="times"><a class="anchor" href="#times"></a>2.2. Times</h3>
<div class="paragraph">
<p>The <em>Times</em> operator in ELM computes the Cartesian-product of two lists. Again, although there is no direct counterpart in CQL, the <em>query</em> construct can be used to produce an equivalent result:</p>
</div>
<div class="paragraph">
<p>&lt;expression xsi:type="Times"&gt;<br/>
&lt;source xsi:type="ExpressionRef" name="List1"/&gt;<br/>
&lt;source xsi:type="ExpressionRef" name="List2"/&gt;<br/>
&lt;/expression&gt;</p>
</div>
<div class="paragraph">
<p>Assuming List1 and List2 are defined as specified above, the equivalent CQL is a multi-source query with a source for each operand in the <em>Times</em>, and a return clause that builds the resulting tuples:</p>
</div>
<div class="paragraph">
<p>from List1 A, List2 B<br/>
return \{ X: A.X, Y: B.Y }</p>
</div>
</div>
<div class="sect2">
<h3 id="filter"><a class="anchor" href="#filter"></a>2.3. Filter</h3>
<div class="paragraph">
<p>The <em>Filter</em> operator in ELM filters the contents of a list, returning only those elements that satisfy the expression defined in the <em>condition</em> element. For example:</p>
</div>
<div class="paragraph">
<p>&lt;expression xsi:type="Filter"&gt;<br/>
&lt;source xsi:type="ExpressionRef" name="List1"/&gt;<br/>
&lt;condition xsi:type="Equal"&gt;<br/>
&lt;operand xsi:type="Property" path="X"&gt;<br/>
&lt;operand xsi:type="Literal" valueType="xs:int" value="1"/&gt;<br/>
&lt;/condition&gt;<br/>
&lt;/expression&gt;</p>
</div>
<div class="paragraph">
<p>Again, although no direct counterpart in CQL exists, the <em>where</em> clause of the <em>query</em> construct provides the equivalent functionality:</p>
</div>
<div class="paragraph">
<p>List1 A where A.X = 1</p>
</div>
</div>
<div class="sect2">
<h3 id="sort-1"><a class="anchor" href="#sort-1"></a>2.4. Sort</h3>
<div class="paragraph">
<p>The <em>Sort</em> operator in ELM sorts the contents of a list. For example:</p>
</div>
<div class="paragraph">
<p>&lt;expression xsi:type="Sort"&gt;<br/>
&lt;source xsi:type="ExpressionRef" name="List1"/&gt;<br/>
&lt;by xsi:type="ByColumn" path="X" direction="desc"/&gt;<br/>
&lt;/expression&gt;</p>
</div>
<div class="paragraph">
<p>Again, the CQL query construct provides the equivalent functionality:</p>
</div>
<div class="paragraph">
<p>List1 A sort by A.X desc</p>
</div>
</div>
</div>
</div>


</div>


				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->
        
    </div>  <!-- /segment-content -->


	<div id="segment-footer" class="segment">  <!-- segment-footer -->
		<div class="container">  <!-- container -->
			<div class="inner-wrapper">
				<p>
        &copy; HL7.org 2014+. CQL STU2.1 (1.2 Published w/ Errata) generated on 2019-03-17 11:17:12 -0600
        <span style="color: #FFFF77">| 
               <a style="color: #81BEF7" rel="license" href="license.html">License</a> |
               <a style="color: #81BEF7" target="_blank" href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=400">Propose a change</a>
        </span>
        </p>
			</div>  <!-- /inner-wrapper -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-footer -->

	
	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->
    
      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="dist/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script src="dist/bootstrap.min.js"> </script>
<script src="dist/respond.min.js"> </script>

<script src="dist/fhir.js"> </script>

  <!-- Analytics Below
================================================== -->


<div id="feedly-mini" title="feedly Mini tookit"></div></body></html>