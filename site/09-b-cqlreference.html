<!DOCTYPE html>
<!-- saved from url=(0043)http://hl7.org/fhir/2016May/FHIRPath.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

  <title>Appendix B – CQL Reference</title>

  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="http://cql.hl7.org" name="author"/>

  <link rel="stylesheet" href="dist/fhir.css"/>
  <link rel="Prev" href="history.html"/>

    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="dist/bootstrap.css"/>
  <link rel="stylesheet" href="dist/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="dist/project.css"/>
  <link rel="stylesheet" href="dist/pygments-manni.css"/>
	<link rel="stylesheet" href="dist/jquery-ui.css"/>
	<link rel="stylesheet" href="dist/cql.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="dist/favicon.png"/>

</head>
<body data-feedly-mini="yes">
	<div id="segment-header" class="segment">  <!-- segment-header -->	
		<div class="container">  <!-- container -->
			<a id="logo" no-external="true" href="http://cql.hl7.org"><img alt="logo hl7" src="dist/hl7-logo.png"/> </a>
			<div id="hl7-status">
				<b>Clinical Quality Language Release 1 STU 3 (1.3)</b>
			</div>       	
			
			<div id="hl7-nav">
				 <a id="hl7-logo" no-external="true" href="http://www.hl7.org/">
					<img height="50" alt="visit the hl7 website" width="42" src="dist/hl7-logo.png"/>
				</a> 
			</div>       	
			<!--<div id="hl7-nav"><a id="hl7-logo" no-external="true" href="http://cql.hl7.org/search.cfm"><img alt="Search CQL" src="dist/search.png"/></a></div>-->
		</div>
		<div class="container">  <!-- container -->
	</div></div>  <!-- /segment-header -->	

	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->
 	      		
 	      		      		
			<nav class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
					</button>
					<a class="navbar-brand hidden" href="index.html">CQL</a>
					<div class="nav-collapse collapse navbar-inverse-collapse">
						<ul class="nav navbar-nav">
              <li class = "dropdown">
				  <a href="index.html" class = "dropbtn">Documentation</a>
			  <div class = "dropdown-content">
				  <a href="01-introduction.html">Chapter 1 - Introduction</a>
				  <a href="02-authorsguide.html">Chapter 2 - Author's Guide</a>
				  <a href="03-developersguide.html">Chapter 3 - Developer's Guide</a>
				  <a href="04-logicalspecification.html">Chapter 4 - Logical Specification</a>
				  <a href="05-languagesemantics.html">Chapter 5 - Language Semantics</a>
				  <a href="06-translationsemantics.html">Chapter 6 - Translation Semantics</a>
				  <a href="07-physicalrepresentation.html">Chapter 7 - Physical Representation</a>
				  <a href="08-a-cqlsyntax.html">Appendix A - CQL Syntax Formal Specification</a>
				  <a href="09-b-cqlreference.html">Appendix B - CQL Reference</a>
				  <a href="10-c-referenceimplementations.html">Appendix C - Reference Implementations</a>
				  <a href="11-d-references.html">Appendix D - References</a>
				  <a href="12-e-acronyms.html">Appendix E - Acronyms</a>
				  <a href="13-f-glossary.html">Appendix F - Glossary</a>
				  <a href="14-g-formattingconventions.html">Appendix G - Formatting Conventions</a>
				  <a href="15-h-timeintervalcalculations.html">Appendix H - Time Interval Calculation Examples</a>
				  <a href="16-i-fhirpathtranslation.html">Appendix I - FHIRPath Function Translation</a>
				  <a href="17-j-listoftables.html">Appendix J - List Of Tables</a>
				  <a href="18-k-listoffigures.html">Appendix K - List Of Figures</a>
			  </div>
			  </li>
              <li><a href="grammar.html">Grammar</a></li>
			  <li><a href="elm.html">ELM</a></li>
			  <li><a href="examples.html">Examples</a></li>
              <li><a href="tests.html">Tests</a></li>
              <li><a href="history.html">Version History</a><!--current--></li>

						</ul>
					</div>  <!-- /.nav-collapse -->

          </div>  <!-- /.container -->
			</nav>  <!-- /.navbar -->
      		
				
  <!-- /HEADER CONTENT -->				
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->
	
	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-9">
    
<table class="cols"><tbody><tr><td id="wg"><a href="http://www.hl7.org/special/committees/dss/index.cfm" _target="blank">Clinical Decision Support</a> Work Group</td><td id="fmm"><a href="http://hl7.org/fhir/resource.html#maturity">Maturity Level</a>: 4</td><td id="ballot"><a href="http://hl7.org/fhir/help.html#status">Ballot Status</a>: STU 3</a></td></tr></tbody></table>


	<h1>Appendix B – CQL Reference</h1>



	<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#types-2">1. Types</a>
<ul class="sectlevel2">
<li><a href="#any">1.1. Any</a></li>
<li><a href="#boolean-1">1.2. Boolean</a></li>
<li><a href="#code-1">1.3. Code</a></li>
<li><a href="#concept-1">1.4. Concept</a></li>
<li><a href="#date">1.5. Date</a></li>
<li><a href="#datetime">1.6. DateTime</a></li>
<li><a href="#decimal-1">1.7. Decimal</a></li>
<li><a href="#integer-1">1.8. Integer</a></li>
<li><a href="#quantity">1.9. Quantity</a></li>
<li><a href="#string-1">1.10. String</a></li>
<li><a href="#time">1.11. Time</a></li>
</ul>
</li>
<li><a href="#logical-operators-3">2. Logical Operators</a>
<ul class="sectlevel2">
<li><a href="#and">2.1. And</a></li>
<li><a href="#implies">2.2. Implies</a></li>
<li><a href="#not">2.3. Not</a></li>
<li><a href="#or">2.4. Or</a></li>
<li><a href="#xor">2.5. Xor</a></li>
</ul>
</li>
<li><a href="#type-operators-1">3. Type Operators</a>
<ul class="sectlevel2">
<li><a href="#as">3.1. As</a></li>
<li><a href="#children">3.2. Children</a></li>
<li><a href="#convert">3.3. Convert</a></li>
<li><a href="#descendents">3.4. Descendents</a></li>
<li><a href="#is">3.5. Is</a></li>
<li><a href="#convertstoboolean">3.6. ConvertsToBoolean</a></li>
<li><a href="#convertstodate">3.7. ConvertsToDate</a></li>
<li><a href="#convertstodatetime">3.8. ConvertsToDateTime</a></li>
<li><a href="#convertstodecimal">3.9. ConvertsToDecimal</a></li>
<li><a href="#convertstointeger">3.10. ConvertsToInteger</a></li>
<li><a href="#convertstoquantity">3.11. ConvertsToQuantity</a></li>
<li><a href="#convertstostring">3.12. ConvertsToString</a></li>
<li><a href="#convertstotime">3.13. ConvertsToTime</a></li>
<li><a href="#toboolean">3.14. ToBoolean</a></li>
<li><a href="#toconcept">3.15. ToConcept</a></li>
<li><a href="#todate">3.16. ToDate</a></li>
<li><a href="#todatetime">3.17. ToDateTime</a></li>
<li><a href="#todecimal">3.18. ToDecimal</a></li>
<li><a href="#tointeger">3.19. ToInteger</a></li>
<li><a href="#toquantity">3.20. ToQuantity</a></li>
<li><a href="#tostring">3.21. ToString</a></li>
<li><a href="#totime">3.22. ToTime</a></li>
</ul>
</li>
<li><a href="#nullological-operators-3">4. Nullological Operators</a>
<ul class="sectlevel2">
<li><a href="#coalesce">4.1. Coalesce</a></li>
<li><a href="#isnull">4.2. IsNull</a></li>
<li><a href="#isfalse">4.3. IsFalse</a></li>
<li><a href="#istrue">4.4. IsTrue</a></li>
</ul>
</li>
<li><a href="#comparison-operators-4">5. Comparison Operators</a>
<ul class="sectlevel2">
<li><a href="#between">5.1. Between</a></li>
<li><a href="#equal">5.2. Equal</a></li>
<li><a href="#equivalent">5.3. Equivalent</a></li>
<li><a href="#greater">5.4. Greater</a></li>
<li><a href="#greater-or-equal">5.5. Greater Or Equal</a></li>
<li><a href="#less">5.6. Less</a></li>
<li><a href="#less-or-equal">5.7. Less Or Equal</a></li>
<li><a href="#not-equal">5.8. Not Equal</a></li>
<li><a href="#not-equivalent">5.9. Not Equivalent</a></li>
</ul>
</li>
<li><a href="#arithmetic-operators-4">6. Arithmetic Operators</a>
<ul class="sectlevel2">
<li><a href="#abs">6.1. Abs</a></li>
<li><a href="#add">6.2. Add</a></li>
<li><a href="#ceiling">6.3. Ceiling</a></li>
<li><a href="#divide">6.4. Divide</a></li>
<li><a href="#floor">6.5. Floor</a></li>
<li><a href="#exp">6.6. Exp</a></li>
<li><a href="#log">6.7. Log</a></li>
<li><a href="#ln">6.8. Ln</a></li>
<li><a href="#maximum">6.9. Maximum</a></li>
<li><a href="#minimum">6.10. Minimum</a></li>
<li><a href="#modulo">6.11. Modulo</a></li>
<li><a href="#multiply">6.12. Multiply</a></li>
<li><a href="#negate">6.13. Negate</a></li>
<li><a href="#predecessor">6.14. Predecessor</a></li>
<li><a href="#power">6.15. Power</a></li>
<li><a href="#round">6.16. Round</a></li>
<li><a href="#subtract">6.17. Subtract</a></li>
<li><a href="#successor">6.18. Successor</a></li>
<li><a href="#truncate">6.19. Truncate</a></li>
<li><a href="#truncated-divide">6.20. Truncated Divide</a></li>
</ul>
</li>
<li><a href="#string-operators-3">7. String Operators</a>
<ul class="sectlevel2">
<li><a href="#combine">7.1. Combine</a></li>
<li><a href="#concatenate">7.2. Concatenate</a></li>
<li><a href="#endswith">7.3. EndsWith</a></li>
<li><a href="#indexer">7.4. Indexer</a></li>
<li><a href="#lastpositionof">7.5. LastPositionOf</a></li>
<li><a href="#length">7.6. Length</a></li>
<li><a href="#lower">7.7. Lower</a></li>
<li><a href="#matches">7.8. Matches</a></li>
<li><a href="#positionof">7.9. PositionOf</a></li>
<li><a href="#replacematches">7.10. ReplaceMatches</a></li>
<li><a href="#split">7.11. Split</a></li>
<li><a href="#splitonmatches">7.12. SplitOnMatches</a></li>
<li><a href="#startswith">7.13. StartsWith</a></li>
<li><a href="#substring">7.14. Substring</a></li>
<li><a href="#upper">7.15. Upper</a></li>
</ul>
</li>
<li><a href="#datetime-operators-2">8. Date/Time Operators</a>
<ul class="sectlevel2">
<li><a href="#add-1">8.1. Add</a></li>
<li><a href="#after">8.2. After</a></li>
<li><a href="#before">8.3. Before</a></li>
<li><a href="#date-1">8.4. Date</a></li>
<li><a href="#datetime-1">8.5. DateTime</a></li>
<li><a href="#datetime-component-from">8.6. Date/Time Component From</a></li>
<li><a href="#difference">8.7. Difference</a></li>
<li><a href="#duration">8.8. Duration</a></li>
<li><a href="#now">8.9. Now</a></li>
<li><a href="#on-or-after-1">8.10. On Or After</a></li>
<li><a href="#on-or-before-1">8.11. On Or Before</a></li>
<li><a href="#same-as-1">8.12. Same As</a></li>
<li><a href="#same-or-after-1">8.13. Same Or After</a></li>
<li><a href="#same-or-before-1">8.14. Same Or Before</a></li>
<li><a href="#subtract-1">8.15. Subtract</a></li>
<li><a href="#time-1">8.16. Time</a></li>
<li><a href="#timeofday">8.17. TimeOfDay</a></li>
<li><a href="#today">8.18. Today</a></li>
</ul>
</li>
<li><a href="#interval-operators-3">9. Interval Operators</a>
<ul class="sectlevel2">
<li><a href="#after-1">9.1. After</a></li>
<li><a href="#before-1">9.2. Before</a></li>
<li><a href="#collapse">9.3. Collapse</a></li>
<li><a href="#contains">9.4. Contains</a></li>
<li><a href="#end">9.5. End</a></li>
<li><a href="#ends">9.6. Ends</a></li>
<li><a href="#equal-1">9.7. Equal</a></li>
<li><a href="#equivalent-1">9.8. Equivalent</a></li>
<li><a href="#except">9.9. Except</a></li>
<li><a href="#expand">9.10. Expand</a></li>
<li><a href="#in">9.11. In</a></li>
<li><a href="#includes">9.12. Includes</a></li>
<li><a href="#included-in">9.13. Included In</a></li>
<li><a href="#intersect">9.14. Intersect</a></li>
<li><a href="#meets">9.15. Meets</a></li>
<li><a href="#not-equal-1">9.16. Not Equal</a></li>
<li><a href="#not-equivalent-1">9.17. Not Equivalent</a></li>
<li><a href="#on-or-after-2">9.18. On Or After</a></li>
<li><a href="#on-or-before-2">9.19. On Or Before</a></li>
<li><a href="#overlaps">9.20. Overlaps</a></li>
<li><a href="#point-from">9.21. Point From</a></li>
<li><a href="#properly-includes">9.22. Properly Includes</a></li>
<li><a href="#properly-included-in">9.23. Properly Included In</a></li>
<li><a href="#same-as-2">9.24. Same As</a></li>
<li><a href="#same-or-after-2">9.25. Same Or After</a></li>
<li><a href="#same-or-before-2">9.26. Same Or Before</a></li>
<li><a href="#start">9.27. Start</a></li>
<li><a href="#starts">9.28. Starts</a></li>
<li><a href="#union">9.29. Union</a></li>
<li><a href="#width">9.30. Width</a></li>
</ul>
</li>
<li><a href="#list-operators-2">10. List Operators</a>
<ul class="sectlevel2">
<li><a href="#contains-1">10.1. Contains</a></li>
<li><a href="#distinct">10.2. Distinct</a></li>
<li><a href="#equal-2">10.3. Equal</a></li>
<li><a href="#equivalent-2">10.4. Equivalent</a></li>
<li><a href="#except-1">10.5. Except</a></li>
<li><a href="#exists">10.6. Exists</a></li>
<li><a href="#flatten">10.7. Flatten</a></li>
<li><a href="#first">10.8. First</a></li>
<li><a href="#in-1">10.9. In</a></li>
<li><a href="#includes-1">10.10. Includes</a></li>
<li><a href="#included-in-1">10.11. Included In</a></li>
<li><a href="#indexer-1">10.12. Indexer</a></li>
<li><a href="#indexof">10.13. IndexOf</a></li>
<li><a href="#intersect-1">10.14. Intersect</a></li>
<li><a href="#last">10.15. Last</a></li>
<li><a href="#length-1">10.16. Length</a></li>
<li><a href="#not-equal-2">10.17. Not Equal</a></li>
<li><a href="#not-equivalent-2">10.18. Not Equivalent</a></li>
<li><a href="#properly-includes-1">10.19. Properly Includes</a></li>
<li><a href="#properly-included-in-1">10.20. Properly Included In</a></li>
<li><a href="#singleton-from">10.21. Singleton From</a></li>
<li><a href="#skip">10.22. Skip</a></li>
<li><a href="#tail">10.23. Tail</a></li>
<li><a href="#take">10.24. Take</a></li>
<li><a href="#union-1">10.25. Union</a></li>
</ul>
</li>
<li><a href="#aggregate-functions">11. Aggregate Functions</a>
<ul class="sectlevel2">
<li><a href="#alltrue">11.1. AllTrue</a></li>
<li><a href="#anytrue">11.2. AnyTrue</a></li>
<li><a href="#avg">11.3. Avg</a></li>
<li><a href="#count">11.4. Count</a></li>
<li><a href="#geometricmean">11.5. GeometricMean</a></li>
<li><a href="#max">11.6. Max</a></li>
<li><a href="#min">11.7. Min</a></li>
<li><a href="#median">11.8. Median</a></li>
<li><a href="#mode">11.9. Mode</a></li>
<li><a href="#population-stddev">11.10. Population StdDev</a></li>
<li><a href="#population-variance">11.11. Population Variance</a></li>
<li><a href="#product">11.12. Product</a></li>
<li><a href="#stddev">11.13. StdDev</a></li>
<li><a href="#sum">11.14. Sum</a></li>
<li><a href="#variance">11.15. Variance</a></li>
</ul>
</li>
<li><a href="#clinical-operators-3">12. Clinical Operators</a>
<ul class="sectlevel2">
<li><a href="#age">12.1. Age</a></li>
<li><a href="#ageat">12.2. AgeAt</a></li>
<li><a href="#calculateage">12.3. CalculateAge</a></li>
<li><a href="#calculateageat">12.4. CalculateAgeAt</a></li>
<li><a href="#equal-3">12.5. Equal</a></li>
<li><a href="#equivalent-3">12.6. Equivalent</a></li>
<li><a href="#in-codesystem">12.7. In (Codesystem)</a></li>
<li><a href="#in-valueset">12.8. In (Valueset)</a></li>
</ul>
</li>
<li><a href="#errors-and-messaging">13. Errors and Messaging</a>
<ul class="sectlevel2">
<li><a href="#message">13.1. Message</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This appendix provides a reference for all the system-defined types, operators, and functions that can be used within CQL. It is intended to provide complete semantics for each available type and operator as a companion to the Author’s and Developer’s Guides. The reference is organized by operator category.</p>
</div>
<div class="paragraph">
<p>For each type, the definition and semantics are provided. Note that because CQL does not define a type declaration syntax, the definitions are expressed in a pseudo-syntax.</p>
</div>
<div class="paragraph">
<p>For each operator or function, the signature, semantics, and usually an example are provided. Note that for built-in operators, the signature is expressed in a pseudo-syntax intended to clearly define the operator and its parameters. Although the symbolic operators may in general be prefix, infix, or postfix operators, the signatures for each operator are defined using function definition syntax for consistency and ease of representation. For example, the signature for the <span class="kw">and</span> operator is given as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">and(left Boolean, right Boolean) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p>Even though <span class="kw">and</span> is an infix operator and would be invoked as in the following expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">InDemographic and NeedsScreening</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, formatting strings are used throughout the reference to describe possible string formats for operators such as ToDateTime that convert a string to a date/time value. The following symbols are used to describe format strings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0 - Any digit must appear at this location in the format string</p>
</li>
<li>
<p># - Any digit may appear at this location in the format string</p>
</li>
<li>
<p>? - The immediately preceding pattern is optional</p>
</li>
<li>
<p>( ) - Used to group patterns</p>
</li>
<li>
<p>| - Used to combine choices of patterns (e.g. +|- means a + or - may appear at this location)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any other character in a format string indicates that that character must appear at that location (or may appear if it is modified by the optional indicator, or part of a group that is modified by the optional indicator), with the exception of the following patterns used when describing date/time format strings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>YYYY - A full four digit year, padded with leading zeroes if necessary</p>
</li>
<li>
<p>MM - A full two digit month value, padded with leading zeroes if necessary</p>
</li>
<li>
<p>DD - A full two digit day value, padded with leading zeroes if necessary</p>
</li>
<li>
<p>HH - A full two digit hour value (00..24), padded with leading zeroes if necessary</p>
</li>
<li>
<p>mm - A full two digit minute value (00..59), padded with leading zeroes if necessary</p>
</li>
<li>
<p>ss - A full two digit second value (00..59), padded with leading zeroes if necessary</p>
</li>
<li>
<p>ffff - A fractional millisecond value (0..999)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="types-2"><a class="anchor" href="#types-2"></a>1. Types</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="any"><a class="anchor" href="#any"></a>1.1. Any</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">simple type Any</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Any</span> type is the maximal supertype in the CQL type system, meaning that all types derive from <span class="id">Any</span>, including list, interval, and structured types. In addition, the type of a <span class="kw">null</span> result is <span class="id">Any</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="boolean-1"><a class="anchor" href="#boolean-1"></a>1.2. Boolean</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">simple type Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Boolean</span> type represents the logical boolean values <span class="kw">true</span> and <span class="kw">false</span>. The result of logical operations within CQL use the <span class="id">Boolean</span> type, and constructs within the language that expect a conditional result, such as a where clause or conditional expression, expect results of the <span class="id">Boolean</span> type.</p>
</div>
<div class="paragraph">
<p>For more information, see the <a href="#logical-operators-3">Logical Operators</a> section.</p>
</div>
</div>
<div class="sect2">
<h3 id="code-1"><a class="anchor" href="#code-1"></a>1.3. Code</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">structured type Code
{
  code String,
  display String,
  system String,
  version String
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Code</span> type represents single terminology codes within CQL.</p>
</div>
</div>
<div class="sect2">
<h3 id="concept-1"><a class="anchor" href="#concept-1"></a>1.4. Concept</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">structured type Concept
{
  codes List&lt;Code&gt;,
  display String
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Concept</span> type represents a single terminological concept within CQL.</p>
</div>
</div>
<div class="sect2">
<h3 id="date"><a class="anchor" href="#date"></a>1.5. Date</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">simple type Date</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Date</span> type represents date values with potential uncertainty within CQL.</p>
</div>
<div class="paragraph">
<p>CQL supports date values in the range @0001-01-01 to @9999-12-31 with a 1 day step size.</p>
</div>
<div class="paragraph">
<p>CQL also supports partial date values. For example, the date <span class="lit">@2014</span> represents some day in the year 2014.</p>
</div>
</div>
<div class="sect2">
<h3 id="datetime"><a class="anchor" href="#datetime"></a>1.6. DateTime</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">simple type DateTime</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">DateTime</span> type represents date and time values with potential uncertainty within CQL.</p>
</div>
<div class="paragraph">
<p>CQL supports date and time values in the range <span class="lit">@0001-01-01T00:00:00.0</span> to <span class="lit">@9999-12-31T23:59:59.999</span> with a 1 millisecond step size. Note that DateTime values may also optionally indicate an offset.</p>
</div>
<div class="paragraph">
<p>CQL also supports partial date/time values. For example, the datetime <span class="lit">@2014-01-01T03</span> represents some instant during the hour of 3:00 on January 1st, 2014.</p>
</div>
</div>
<div class="sect2">
<h3 id="decimal-1"><a class="anchor" href="#decimal-1"></a>1.7. Decimal</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">simple type Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Decimal</span> type represents real values within CQL.</p>
</div>
<div class="paragraph">
<p>CQL supports positive and negative decimal values with a <em>precision</em> (meaning total number of possible digits) of 28 and a <em>scale</em> (meaning number of possible digits to the right of the decimal) of 8. In other words, decimal values in the range (-10<sup>28</sup> + 1)/10<sup>8</sup> to (10<sup>28</sup>-1)/10<sup>-8</sup> with a step size of 10<sup>-8</sup>.</p>
</div>
</div>
<div class="sect2">
<h3 id="integer-1"><a class="anchor" href="#integer-1"></a>1.8. Integer</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">simple type Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Integer</span> type represents whole number values within CQL.</p>
</div>
<div class="paragraph">
<p>CQL supports integer values in the range -2<sup>31</sup> to 2<sup>31</sup>-1 with a step size of 1.</p>
</div>
</div>
<div class="sect2">
<h3 id="quantity"><a class="anchor" href="#quantity"></a>1.9. Quantity</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">structured type Quantity
{
  value Decimal
  unit String
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Quantity</span> type represents quantities with a specified unit within CQL. The unit must be a valid UCUM unit or CQL temporal keyword. UCUM units in CQL use the case-sensitive (c/s) form. When a quantity value has no unit specified, operations are performed with the default UCUM unit ('1'). The value element of a Quantity must be present.</p>
</div>
<div class="sect3">
<h4 id="ratio"><a class="anchor" href="#ratio"></a>1.9.1. Ratio</h4>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">structured type Ratio
{
  numerator Quantity
  denominator Quantity
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Ratio</span> type represents a relationship between two quantities, such as a titre (e.g. 1:128), or a concentration (e.g. 5 'mg':10&#8217;mL'). The numerator and denominator elements must be present (i.e. can not be null).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="string-1"><a class="anchor" href="#string-1"></a>1.10. String</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">simple type String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">String</span> type represents string values within CQL.</p>
</div>
<div class="paragraph">
<p>CQL supports string values up to 2<sup>31</sup>-1 characters in length.</p>
</div>
<div class="paragraph">
<p>For string literals, CQL uses standard escape sequences:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Escape</th>
<th class="tableblock halign-left valign-top">Character</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single-quote</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double-quote</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\r</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Carriage Return</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Line Feed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\t</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tab</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Form Feed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\\</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backslash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\uXXXX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unicode character, where XXXX is the hexadecimal representation of the character</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="time"><a class="anchor" href="#time"></a>1.11. Time</h3>
<div class="paragraph">
<p><strong>Definition:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">simple type Time</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Time</span> type represents time-of-day values within CQL.</p>
</div>
<div class="paragraph">
<p>CQL supports time values in the range <span class="lit">@T00:00:00.0</span> to <span class="lit">@T23:59:59.999</span> with a step size of 1 millisecond. Not that Time values may also optionally indicate an offset.</p>
</div>
<div class="paragraph">
<p>CQL also supports partial time values. For example, the time <span class="lit">@T03</span> represents some instant during the hour of 3:00.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logical-operators-3"><a class="anchor" href="#logical-operators-3"></a>2. Logical Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="and"><a class="anchor" href="#and"></a>2.1. And</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">and (left Boolean, right Boolean) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">and</span> operator returns true if both its arguments are true. If either argument is false, the result is false. Otherwise, the result is null.</p>
</div>
<div class="paragraph">
<p>The following table defines the truth table for this operator:</p>
</div>
<table id="table-9-a" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">TRUE</th>
<th class="tableblock halign-left valign-top">FALSE</th>
<th class="tableblock halign-left valign-top">NULL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TRUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FALSE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FALSE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FALSE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FALSE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FALSE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 9‑A</p>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">and</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsTrue: true and true
define IsFalse: true and false
define IsAlsoFalse: false and null
define IsNull: true and null</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that CQL does not prescribe short-circuit evaluation of logical operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="implies"><a class="anchor" href="#implies"></a>2.2. Implies</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">implies (left Boolean, right Boolean) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">implies</span> operator returns the logical implication of its arguments. This means that if the left operand evaluates to true, this operator returns the boolean evaluation of the right operand. If the left operand evaluates to false, this operator returns true. Otherwise, this operator returns true if the right operand evaluates to true, and null otherwise.</p>
</div>
<div class="paragraph">
<p>The following table defines the truth table for this operator:</p>
</div>
<table id="table-9-a1" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">TRUE</th>
<th class="tableblock halign-left valign-top">FALSE</th>
<th class="tableblock halign-left valign-top">NULL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 9‑A</p>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">implies</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsTrue: false implies false
define IsAlsoTrue: false implies null
define IsFalse: true implies false
define IsNull: true implies null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="not"><a class="anchor" href="#not"></a>2.3. Not</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">not (argument Boolean) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">not</span> operator returns true if the argument is false and false if the argument is true. Otherwise, the result is null.</p>
</div>
<div class="paragraph">
<p>The following table defines the truth table for this operator:</p>
</div>
<table id="table-9-b" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">NOT</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 9‑B</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">not</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsTrue: not false
define IsFalse: not true
define IsNull: not null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="or"><a class="anchor" href="#or"></a>2.4. Or</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">or (left Boolean, right Boolean) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">or</span> operator returns true if either of its arguments are true. If both arguments are false, the result is false. Otherwise, the result is null.</p>
</div>
<div class="paragraph">
<p>The following table defines the truth table for this operator:</p>
</div>
<table id="table-9-c" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">TRUE</th>
<th class="tableblock halign-left valign-top">FALSE</th>
<th class="tableblock halign-left valign-top">NULL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 9‑C</p>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">or</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsTrue: true or false
define IsAlsoTrue: true or null
define IsFalse: false or false
define IsNull: false or null</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that CQL does not prescribe short-circuit evaluation of logical operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="xor"><a class="anchor" href="#xor"></a>2.5. Xor</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">xor (left Boolean, right Boolean) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">xor</span> (exclusive or) operator returns true if one argument is true and the other is false. If both arguments are true or both arguments are false, the result is false. Otherwise, the result is null.</p>
</div>
<div class="paragraph">
<p>The following table defines the truth table for this operator:</p>
</div>
<table id="table-9-d" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">TRUE</th>
<th class="tableblock halign-left valign-top">FALSE</th>
<th class="tableblock halign-left valign-top">NULL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TRUE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FALSE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NULL</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 9‑D</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">xor</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsTrue: true xor false
define IsAlsoTrue: false xor true
define IsFalse: true xor true
define IsNull: true xor null</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="type-operators-1"><a class="anchor" href="#type-operators-1"></a>3. Type Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="as"><a class="anchor" href="#as"></a>3.1. As</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">as&lt;T&gt;(argument Any) T
cast as&lt;T&gt;(argument Any) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">as</span> operator allows the result of an expression to be cast as a given target type. This allows expressions to be written that are statically typed against the expected run-time type of the argument.</p>
</div>
<div class="paragraph">
<p>If the argument is not of the specified type at run-time the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The <span class="kw">cast</span> prefix indicates that if the argument is not of the specified type at run-time then an exception is thrown.</p>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="paragraph">
<p>The following examples illustrate the use of the <span class="kw">as</span> operator.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define AllProcedures: [Procedure]

define ImagingProcedures:
  AllProcedures P
    where P is ImagingProcedure
    return P as ImagingProcedure

define RuntimeError:
  ImagingProcedures P
    return cast P as Observation</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="children"><a class="anchor" href="#children"></a>3.2. Children</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Children(argument Any) List&lt;Any&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>For structured types, the <span class="id">Children</span> operator returns a list of all the values of the elements of the type. List-valued elements are expanded and added to the result individually, rather than as a single list.</p>
</div>
<div class="paragraph">
<p>For list types, the result is the same as invoking <span class="id">Children</span> on each element in the list and flattening the resulting lists into a single result.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convert"><a class="anchor" href="#convert"></a>3.3. Convert</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">convert to&lt;T&gt;(argument Any) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">convert</span> operator converts a value to a specific type. The result of the operator is the value of the argument converted to the target type, if possible. If there is no valid conversion from the actual value to the target type, the result is null.</p>
</div>
<div class="paragraph">
<p>The following table lists the conversions supported in CQL:</p>
</div>
<table id="table-9-e" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6923%;"/>
<col style="width: 7.6924%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">From\To</th>
<th class="tableblock halign-left valign-top">Boolean</th>
<th class="tableblock halign-left valign-top">Integer</th>
<th class="tableblock halign-left valign-top">Decimal</th>
<th class="tableblock halign-left valign-top">Quantity</th>
<th class="tableblock halign-left valign-top">Ratio</th>
<th class="tableblock halign-left valign-top">String</th>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">DateTime</th>
<th class="tableblock halign-left valign-top">Time</th>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Concept</th>
<th class="tableblock halign-left valign-top">List&lt;Code&gt;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Boolean</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Integer</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Decimal</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Quantity</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ratio</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>String</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DateTime</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Time</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Concept</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>List&lt;Code&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 9‑E</p>
</div>
<div class="paragraph">
<p>For conversions between date/time and string values, ISO-8601 standard format is used:</p>
</div>
<div class="paragraph">
<p>yyyy-MM-ddThh:mm:ss.fff(Z <span class="sym">|</span> <span class="sym">+/-</span> hh:mm)</p>
</div>
<div class="paragraph">
<p>For example, the following are valid string representations for date/time values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">'2014-01-01T14:30:00.0Z' // January 1st, 2014, 2:30PM UTC
'2014-01-01T14:30:00.0-07:00' // January 1st, 2014, 2:30PM Mountain Standard (GMT-7:00)
'T14:30:00.0Z' // 2:30PM UTC
'T14:30:00.0-07:00' // 2:30PM Mountain Standard (GMT-7:00)</code></pre>
</div>
</div>
<div class="paragraph">
<p>For specific semantics for each conversion, refer to the <a href="03-developersguide.html#explicit-conversion">explicit conversion</a> operator documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="descendents"><a class="anchor" href="#descendents"></a>3.4. Descendents</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Descendents(argument Any) List&lt;Any&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>For structured types, the <span class="id">Descendents</span> operator returns a list of all the values of the elements of the type, recursively. List-valued elements are expanded and added to the result individually, rather than as a single list.</p>
</div>
<div class="paragraph">
<p>For list types, the result is the same as invoking <span class="id">Descendents</span> on each element in the list and flattening the resulting lists into a single result.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="is"><a class="anchor" href="#is"></a>3.5. Is</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">is&lt;T&gt;(argument Any) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">is</span> operator allows the type of a result to be tested. If the run-time type of the argument is of the type being tested, the result of the operator is <span class="kw">true</span>; otherwise, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">is</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsTrue: 5 is Integer
define IsFalse: '5' is Integer</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="convertstoboolean"><a class="anchor" href="#convertstoboolean"></a>3.6. ConvertsToBoolean</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ConvertsToBoolean(argument String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ConvertsToBoolean</span> operator returns <span class="kw">true</span> if its argument can be converted to a <span class="id">Boolean</span> value. See the <span class="id"><a href="#toboolean">ToBoolean</a></span> operator for a description of the supported conversions.</p>
</div>
<div class="paragraph">
<p>If the input cannot be interpreted as a valid <span class="id">Boolean</span> value, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstodate"><a class="anchor" href="#convertstodate"></a>3.7. ConvertsToDate</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ConvertsToDate(argument String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ConvertsToDate</span> operator returns <span class="kw">true</span> if its argument can be converted to a <span class="id">Date</span> value. See the <span class="id"><a href="#todate">ToDate</a></span> operator for a description of the supported conversions.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid date value, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>As with date literals, date values may be specified to any precision.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstodatetime"><a class="anchor" href="#convertstodatetime"></a>3.8. ConvertsToDateTime</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ConvertsToDateTime(argument Date) Boolean
ConvertsToDateTime(argument String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ConvertsToDateTime</span> operator returns <span class="kw">true</span> if its argument can be converted to a <span class="id">DateTime</span> value. See the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator for a description of the supported conversions.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid date/time value, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>As with date/time literals, date/time values may be specified to any precision. If no timezone offset is supplied, the timezone offset of the evaluation request timestamp is assumed.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstodecimal"><a class="anchor" href="#convertstodecimal"></a>3.9. ConvertsToDecimal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ConvertsToDecimal(argument String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToDecimal</span> operator returns <span class="kw">true</span> if its argument can be converted to a <span class="id">Decimal</span> value. See the <span class="id"><a href="#todecimal">ToDecimal</a></span> operator for a description of the supported conversions.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid <span class="id">Decimal</span> value, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstointeger"><a class="anchor" href="#convertstointeger"></a>3.10. ConvertsToInteger</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ConvertsToInteger(argument String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ConvertsToInteger</span> operator returns <span class="kw">true</span> if its argument can be converted to an <span class="id">Integer</span> value. See the <span class="id"><a href="#tointeger">ToInteger</a></span> operator for a description of the supported conversions.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid <span class="id">Integer</span> value, the result is <span class="kw">false</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstoquantity"><a class="anchor" href="#convertstoquantity"></a>3.11. ConvertsToQuantity</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ConvertsToQuantity(argument Decimal) Boolean
ConvertsToQuantity(argument Integer) Boolean
ConvertsToQuantity(argument String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ConvertsToQuantity</span> operator returns <span class="kw">true</span> if its argument can be converted to a <span class="id">Quantity</span> value. See the <span class="id"><a href="#toquantity">ToQuantity</a></span> operator for a description of the supported conversions.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid <span class="id">Quantity</span> value, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="sect3">
<h4 id="convertstoratio"><a class="anchor" href="#convertstoratio"></a>3.11.1. ConvertsToRatio</h4>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ConvertsToRatio(argument String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ConvertsToRatio</span> operator returns <span class="kw">true</span> if its argument can be converted to a <span class="id">Ratio</span> value. See the <span class="id"><a href="#toratio">ToRatio</a></span> operator for a description of the supported conversions.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid <span class="id">Ratio</span> value, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="convertstostring"><a class="anchor" href="#convertstostring"></a>3.12. ConvertsToString</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ConvertsToString(argument Boolean) Boolean
ConvertsToString(argument Integer) Boolean
ConvertsToString(argument Decimal) Boolean
ConvertsToString(argument Quantity) Boolean
ConvertsToString(argument Ratio) Boolean
ConvertsToString(argument Date) Boolean
ConvertsToString(argument DateTime) Boolean
ConvertsToString(argument Time) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ConvertsToString</span> operator returns <span class="kw">true</span> if its argument can be converted to a <span class="id">String</span> value. See the <span class="id"><a href="#tostring">ToString</a></span> operator for a description of the supported conversions.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstotime"><a class="anchor" href="#convertstotime"></a>3.13. ConvertsToTime</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ConvertsToTime(argument String) Time</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ConvertsToTime</span> operator returns <span class="kw">true</span> if its argument can be converted to a <span class="id">Time</span> value. See the <span class="id"><a href="#totime">ToTime</a></span> operator for a description of the supported conversions.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid time-of-day value, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="toboolean"><a class="anchor" href="#toboolean"></a>3.14. ToBoolean</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToBoolean(argument String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToBoolean</span> operator converts the value of its argument to a <span class="id">Boolean</span> value. The operator accepts the following string representations:</p>
</div>
<table id="table-9-f" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">String Representation</th>
<th class="tableblock halign-left valign-top">Boolean Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">true t yes y 1</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="kw">true</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">false f no n 0</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="kw">false</span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 9‑F</p>
</div>
<div class="paragraph">
<p>Note that the operator will ignore case when interpreting the string as a <span class="id">Boolean</span> value.</p>
</div>
<div class="paragraph">
<p>If the input cannot be interpreted as a valid <span class="id">Boolean</span> value, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">ToBoolean</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsTrue: ToBoolean('y')
define IsFalse: ToBoolean('0')
define IsNull: ToBoolean('falsetto')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="toconcept"><a class="anchor" href="#toconcept"></a>3.15. ToConcept</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToConcept(argument Code) Concept</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToConcept</span> operator converts a value of type <span class="id">Code</span> to a <span class="id">Concept</span> value with the given <span class="id">Code</span> as its primary and only <span class="id">Code</span>. If the <span class="id">Code</span> has a <span class="id">display</span> value, the resulting <span class="id">Concept</span> will have the same <span class="id">display</span> value.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">ToConcept</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsValid: ToConcept(Code { system: 'http://loinc.org', code: '8480-6' }) // Concept { codes: { Code { system: 'http://loinc.org', code: '8480-6' } } }
define IsNull: ToConcept(null as Code)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="todate"><a class="anchor" href="#todate"></a>3.16. ToDate</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToDate(argument String) DateTime</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToDate</span> operator converts the value of its argument to a <span class="id">Date</span> value. The operator expects the string to be formatted using the ISO-8601 date representation:</p>
</div>
<div class="paragraph">
<p>YYYY-MM-DD</p>
</div>
<div class="paragraph">
<p>In addition, the string must be interpretable as a valid date value.</p>
</div>
<div class="paragraph">
<p>For example, the following are valid string representations for date values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">'2014-01' // January, 2014
'2014-01-01' // January 1st, 2014</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid date value, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>As with date literals, date values may be specified to any precision.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="todatetime"><a class="anchor" href="#todatetime"></a>3.17. ToDateTime</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToDateTime(argument Date) DateTime
ToDateTime(argument String) DateTime</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToDateTime</span> operator converts the value of its argument to a <span class="id">DateTime</span> value.</p>
</div>
<div class="paragraph">
<p>For the string overload, the operator expects the string to be formatted using the ISO-8601 date/time representation:</p>
</div>
<div class="paragraph">
<p>YYYY-MM-DDThh:mm:ss.fff(<span class="sym">+|-</span>)hh:mm
or
YYYY-MM-DDThh:mm:ss.fffZ</p>
</div>
<div class="paragraph">
<p>In addition, the string must be interpretable as a valid date/time value.</p>
</div>
<div class="paragraph">
<p>For example, the following are valid string representations for date/time values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">'2014-01-01' // January 1st, 2014
'2014-01-01T14:30:00.0Z' // January 1st, 2014, 2:30PM UTC
'2014-01-01T14:30:00.0-07:00' // January 1st, 2014, 2:30PM Mountain Standard (GMT-7:00)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid date/time value, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>As with date/time literals, date/time values may be specified to any precision. If no timezone offset is supplied, the timezone offset of the evaluation request timestamp is assumed.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">Date</span> overload, the result will be a <span class="id">DateTime</span> with the time components set to zero, except for the timezone offset, which will be set to the timezone offset of the evaluation request timestamp.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="todecimal"><a class="anchor" href="#todecimal"></a>3.18. ToDecimal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToDecimal(argument String) Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToDecimal</span> operator converts the value of its argument to a <span class="id">Decimal</span> value. The operator accepts strings using the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">(+|-)?#0(.0#)?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none), followed by at least one digit, followed optionally by a decimal point, at least one digit, and any number of additional digits (including none).</p>
</div>
<div class="paragraph">
<p>Note that the decimal value returned by this operator must be limited in precision and scale to the maximum precision and scale representable for <span class="id">Decimal</span> values within CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid <span class="id">Decimal</span> value, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">ToDecimal</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsValid: ToDecimal('-0.1')
define IsNull: ToDecimal('+-0.1')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tointeger"><a class="anchor" href="#tointeger"></a>3.19. ToInteger</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToInteger(argument String) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToInteger</span> operator converts the value of its argument to an <span class="id">Integer</span> value. The operator accepts strings using the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">(+|-)?#0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none), followed by at least one digit.</p>
</div>
<div class="paragraph">
<p>Note that the integer value returned by this operator must be a valid value in the range representable for <span class="id">Integer</span> values in CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid <span class="id">Integer</span> value, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">ToInteger</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsValid: ToInteger('-1')
define IsNull: ToInteger('one')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="toquantity"><a class="anchor" href="#toquantity"></a>3.20. ToQuantity</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToQuantity(argument Decimal) Quantity
ToQuantity(argument Integer) Quantity
ToQuantity(argument String) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToQuantity</span> operator converts the value of its argument to a <span class="id">Quantity</span> value.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">String</span> overload, the operator accepts strings using the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">(+|-)?#0(.0#)?('&lt;unit&gt;')?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none) followed by at least one digit, optionally followed by a decimal point, at least one digit, and any number of additional digits, all optionally followed by a unit designator as a string literal specifying a valid, case-sensitive UCUM unit of measure. Spaces are allowed between the quantity value and the unit designator.</p>
</div>
<div class="paragraph">
<p>Note that the decimal value of the quantity returned by this operator must be a valid value in the range representable for <span class="id">Decimal</span> values in CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid <span class="id">Quantity</span> value, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">Integer</span> and <span class="id">Decimal</span> overloads, the operator returns a quantity with the value of the argument and a unit of <span class="lit">'1'</span> (the default unit).</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">ToQuantity</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalOverload: ToQuantity(0.1) // 0.1 '1'
define IntegerOverload: ToQuantity(13) // 13 '1'
define StringOverload: ToQuantity('-0.1 \'mg\'') // -0.1 'mg'
define IsNull: ToQuantity('444 \'cm')</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="toratio"><a class="anchor" href="#toratio"></a>3.20.1. ToRatio</h4>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToRatio(argument String) Ratio</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToRatio</span> operator converts the value of its argument to a <span class="id">Ratio</span> value. The operator accepts strings using the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">&lt;quantity&gt;:&lt;quantity&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;quantity&gt; is the format used to by the <span class="id">ToQuantity</span> operator.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid <span class="id">Ratio</span> value, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">ToRatio</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsValid: ToRatio('1.0 \'mg\':2.0 \'mg\'')
define IsNull: ToRatio('1.0 \'mg\';2.0 \'mg\'')</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tostring"><a class="anchor" href="#tostring"></a>3.21. ToString</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToString(argument Boolean) String
ToString(argument Integer) String
ToString(argument Decimal) String
ToString(argument Quantity) String
ToString(argument Ratio) String
ToString(argument Date) String
ToString(argument DateTime) String
ToString(argument Time) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToString</span> operator converts the value of its argument to a <span class="id">String</span> value. The operator uses the following string representations for each type:</p>
</div>
<table id="table-9-g" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">String Representation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">Boolean</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="kw">true|false</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">Integer</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<span class="sym">-</span>)?#0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">Decimal</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<span class="sym">-</span>)?#0.0#</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">Quantity</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<span class="sym">-</span>)?#0.0# '&lt;unit&gt;'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">Ratio</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;quantity&gt;:&lt;quantity&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">Date</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YYYY-MM-DD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">DateTime</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YYYY-MM-DDThh:mm:ss.fff(<span class="sym">+|-</span>)hh:mm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="id">Time</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thh:mm:ss.fff(<span class="sym">+|-</span>)hh:mm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 9‑G</p>
</div>
<div class="paragraph">
<p>The result of any ToString must be round-trippable back to the source value.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">ToString</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define BooleanOverload: ToString(true)
define IntegerOverload: ToString(13)
define DecimalOverload: ToString(0.1)
define QuantityOverload: ToString(-0.1 'mg')
define RatioOverload: ToString(-0.1 'mg':0.1 'mg')
define DateOverload: ToString(@2012-01-01)
define DateTimeOverload: ToString(@2012-01-01T12:30:00.000-05:00)
define TimeOverload: ToString(@T12:30:00.000-05:00)
define IsNull: ToString(null as Integer)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="totime"><a class="anchor" href="#totime"></a>3.22. ToTime</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ToTime(argument String) Time</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ToTime</span> operator converts the value of its argument to a <span class="id">Time</span> value. The operator expects the string to be formatted using ISO-8601 time representation:</p>
</div>
<div class="paragraph">
<p>Thh:mm:ss.fff(<span class="sym">+|-</span>)hh:mm
or
Thh:mm:ss.fffZ</p>
</div>
<div class="paragraph">
<p>In addition, the string must be interpretable as a valid time-of-day value.</p>
</div>
<div class="paragraph">
<p>For example, the following are valid string representations for time-of-day values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">'T14:30:00.0Z' // 2:30PM UTC
'T14:30:00.0-07:00' // 2:30PM Mountain Standard (GMT-7:00)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid time-of-day value, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>As with time-of-day literals, time-of-day values may be specified to any precision. If no timezone offset is supplied, the timezone offset of the evaluation request timestamp is assumed.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nullological-operators-3"><a class="anchor" href="#nullological-operators-3"></a>4. Nullological Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="coalesce"><a class="anchor" href="#coalesce"></a>4.1. Coalesce</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Coalesce&lt;T&gt;(argument1 T, argument2 T) T
Coalesce&lt;T&gt;(argument1 T, argument2 T, argument3 T) T
Coalesce&lt;T&gt;(argument1 T, argument2 T, argument3 T, argument4 T) T
Coalesce&lt;T&gt;(argument1 T, argument2 T, argument3 T, argument4 T, argument5 T) T
Coalesce&lt;T&gt;(arguments List&lt;T&gt;) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Coalesce</span> operator returns the first non-null result in a list of arguments. If all arguments evaluate to <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The static type of the first argument determines the type of the result, and all subsequent arguments must be of that same type.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Coalesce</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Coalesce15: Coalesce(null, 15, null)
define IsNull: Coalesce({ null, null, null })
define CoalesceError: Coalesce(null, 15, null, null, null, null) // more than 5 inputs must be represented as list</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="isnull"><a class="anchor" href="#isnull"></a>4.2. IsNull</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">is null(argument Any) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">is null</span> operator determines whether or not its argument evaluates to <span class="kw">null</span>. If the argument evaluates to <span class="kw">null</span>, the result is <span class="kw">true</span>; otherwise, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">is null</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsTrue: null is null
define IsFalse: true is null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="isfalse"><a class="anchor" href="#isfalse"></a>4.3. IsFalse</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">is false(argument Boolean) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">is false</span> operator determines whether or not its argument evaluates to <span class="kw">false</span>. If the argument evaluates to <span class="kw">false</span>, the result is <span class="kw">true</span>; otherwise, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">is false</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsFalseIsTrue: false is false
define IsFalseIsFalse: null is false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="istrue"><a class="anchor" href="#istrue"></a>4.4. IsTrue</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">is true(argument Boolean) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">is true</span> operator determines whether or not its argument evaluates to <span class="kw">true</span>. If the argument evaluates to <span class="kw">true</span>, the result is <span class="kw">true</span>; otherwise, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">is true</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IsTrueIsTrue: true is true
define IsTrueIsFalse: false is true</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="comparison-operators-4"><a class="anchor" href="#comparison-operators-4"></a>5. Comparison Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="between"><a class="anchor" href="#between"></a>5.1. Between</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">between(argument Integer, low Integer, high Integer) Boolean
between(argument Decimal, low Decimal, high Decimal) Boolean
between(argument Quantity, low Quantity, high Quantity) Boolean
between(argument Date, low Date, high Date) Boolean
between(argument DateTime, low DateTime, high DateTime) Boolean
between(argument Time, low Time, high Time) Boolean
between(argument String, low String, high String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The between operator determines whether the first argument is within a given range, inclusive. If the first argument is greater than or equal to the low argument, and less than or equal to the high argument, the result is <span class="kw">true</span>, otherwise, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of <span class="lit">'cm'</span> and <span class="lit">'m'</span> are comparable, but units of <span class="lit">'cm2'</span> and <span class="lit">'cm'</span> are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>For comparisons involving date/time values with imprecision, note that the result of the comparison may be <span class="kw">null</span>, depending on whether the values involved are specified to the level of precision used for the comparison. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DateTimeBetweenIsNull: @2012-01-01 between @2012-01-01T12 and @2012-01-02T12</code></pre>
</div>
</div>
<div class="paragraph">
<p>String comparisons are strictly lexical based on the Unicode value of the individual characters in the string.</p>
</div>
<div class="paragraph">
<p>If any argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">between</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerBetweenIsTrue: 4 between 2 and 6
define DecimalBetweenIsFalse: 3.5 between 3.6 and 4.8
define QuantityBetweenIsNull: 3.5 'cm2' between 3.0 'cm' and 4.8 'cm'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="equal"><a class="anchor" href="#equal"></a>5.2. Equal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">=&lt;T&gt;(left T, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>equal</em> (<span class="sym">=</span>) operator returns <span class="kw">true</span> if the arguments are equal; <span class="kw">false</span> if the arguments are known unequal, and <span class="kw">null</span> otherwise. Equality semantics are defined to be value-based.</p>
</div>
<div class="paragraph">
<p>For simple types, this means that equality returns <span class="kw">true</span> if and only if the result of each argument evaluates to the same value.</p>
</div>
<div class="paragraph">
<p>For string values, equality is strictly lexical based on the Unicode values for the individual characters in the strings.</p>
</div>
<div class="paragraph">
<p>For decimal values, trailing zeroes are ignored.</p>
</div>
<div class="paragraph">
<p>For quantities, this means that the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of <span class="lit">'cm'</span> and <span class="lit">'m'</span> are comparable, but units of <span class="lit">'cm2'</span> and <span class="lit">'cm'</span> are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>For tuple types, this means that equality returns <span class="kw">true</span> if and only if the tuples are of the same type, and the values for all elements that have values, by name, are equal.</p>
</div>
<div class="paragraph">
<p>For list types, this means that equality returns <span class="kw">true</span> if and only if the lists contain elements of the same type, have the same number of elements, and for each element in the lists, in order, the elements are equal using equality semantics.</p>
</div>
<div class="paragraph">
<p>For interval types, equality returns <span class="kw">true</span> if and only if the intervals are over the same point type, and they have the same value for the starting and ending points of the interval as determined by the <span class="id">Start</span> and <span class="id">End</span> operators.</p>
</div>
<div class="paragraph">
<p>For date/time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the values are different, the comparison stops and the result is <span class="kw">false</span>. If one input has a value for the precision and the other does not, the comparison stops and the result is <span class="kw">null</span>; if neither input has a value for the precision, or the last precision has been reached, the comparison stops and the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>equal</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerEqualIsTrue: 4 = (2 + 2)
define DecimalEqualIsFalse: 3.5 = (3.5 - 0.1)
define StringEqualIsFalse: 'CQL is awesome!' = 'cql is awesome!'
define QuantityEqualIsNull: 3.5 'cm2' = 3.5 'cm'
define ListEqualIsNull: { null, 1, 2, 3 } = { null, 1, 2, 3 }
define DateTimeEqualIsNull: @2012-01-01 = @2012-01-01T12
define NullEqualIsNull: null = null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="equivalent"><a class="anchor" href="#equivalent"></a>5.3. Equivalent</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">~&lt;T&gt;(left T, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>equivalent</em> (<span class="sym">~</span>) operator returns <span class="kw">true</span> if the arguments are equivalent in value, or if they are both <span class="kw">null</span>; and <span class="kw">false</span> otherwise.</p>
</div>
<div class="paragraph">
<p>For string values, equivalence is case- and locale-insensitive.</p>
</div>
<div class="paragraph">
<p>For tuple types, this means that two tuple values are equivalent if and only if the tuples are of the same type, and the values for all elements by name are equivalent.</p>
</div>
<div class="paragraph">
<p>For list types, this means that two list values are equivalent if and only if the lists contain elements of the same type, have the same number of elements, and for each element in the lists, in order, the elements are equivalent.</p>
</div>
<div class="paragraph">
<p>For interval types, this means that two intervals are equivalent if and only if the intervals are over the same point type, and the starting and ending points of the intervals as determined by the <span class="id">Start</span> and <span class="id">End</span> operators are equivalent.</p>
</div>
<div class="paragraph">
<p>For date/time values, the comparison is performed in the same way as it is for equality, except that if one input has a value for a given precision and the other does not, the comparison stops and the result is <span class="kw">false</span>, rather than <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Code</span> values, equivalence is defined based on the code and system elements only. The version and display elements are ignored for the purposes of determining <span class="id">Code</span> equivalence.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Concept</span> values, equivalence is defined as a non-empty intersection of the codes in each <span class="id">Concept</span>.</p>
</div>
<div class="paragraph">
<p>Note that this operator will always return <span class="kw">true</span> or <span class="kw">false</span>, even if either or both of its arguments are <span class="kw">null</span>, or contain <span class="kw">null</span> components.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>equivalent</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerEquivalentIsTrue: 4 ~ (2 + 2)
define DecimalEquivalentIsFalse: 3.5 ~ (3.5 - 0.1)
define StringEquivalentIsTrue: 'CQL is awesome!' ~ 'cql is awesome!'
define QuantityEquivalentIsFalse: 3.5 'cm2' ~ 3.5 'cm'
define ListEquivalentIsTrue: { null, 1, 2, 3 } ~ { null, 1, 2, 3 }
define DateTimeEquivalentIsFalse: @2012-01-01 ~ @2012-01-01T12
define NullEquivalentIsTrue: null ~ null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="greater"><a class="anchor" href="#greater"></a>5.4. Greater</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">&gt;(left Integer, right Integer) Boolean
&gt;(left Decimal, right Decimal) Boolean
&gt;(left Quantity, right Quantity) Boolean
&gt;(left Date, right Date) Boolean
&gt;(left DateTime, right DateTime) Boolean
&gt;(left Time, right Time) Boolean
&gt;(left String, right String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>greater</em> (<span class="sym">&gt;</span>) operator returns <span class="kw">true</span> if the first argument is greater than the second argument.</p>
</div>
<div class="paragraph">
<p>String comparisons are strictly lexical based on the Unicode value of the individual characters in the string.</p>
</div>
<div class="paragraph">
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of <span class="lit">'cm'</span> and <span class="lit">'m'</span> are comparable, but units of <span class="lit">'cm2'</span> and <span class="lit">'cm'</span> are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>For date/time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is greater than the second, the result is <span class="kw">true</span>; if the first value is less than the second, the result is <span class="kw">false</span>; if one input has a value for the precision and the other does not, the comparison stops and the result is <span class="kw">null</span>; if neither input has a value for the precision or the last precision has been reached, the comparison stops and the result is <span class="kw">false</span>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DateTimeGreaterIsNull: @2012-01-01 &gt; @2012-01-01T12</code></pre>
</div>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>greater</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerGreaterIsTrue: 4 &gt; 3
define DecimalGreaterIsFalse: 3.5 &gt; 3.5
define QuantityGreaterIsNull: 3.6 'cm2' &gt; 3.5 'cm'
define NullGreaterIsNull: null &gt; 5</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="greater-or-equal"><a class="anchor" href="#greater-or-equal"></a>5.5. Greater Or Equal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">&gt;=(left Integer, right Integer) Boolean
&gt;=(left Decimal, right Decimal) Boolean
&gt;=(left Quantity, right Quantity) Boolean
&gt;=(left Date, right Date) Boolean
&gt;=(left DateTime, right DateTime) Boolean
&gt;=(left Time, right Time) Boolean
&gt;=(left String, right String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>greater or equal</em> (<span class="sym">&gt;=</span>) operator returns <span class="kw">true</span> if the first argument is greater than or equal to the second argument.</p>
</div>
<div class="paragraph">
<p>String comparisons are strictly lexical based on the Unicode value of the individual characters in the string.</p>
</div>
<div class="paragraph">
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of <span class="lit">'cm'</span> and <span class="lit">'m'</span> are comparable, but units of <span class="lit">'cm2'</span> and <span class="lit">'cm'</span> are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>For date/time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is greater than the second, the result is <span class="kw">true</span>; if the first value is less than the second, the result is <span class="kw">false</span>; if one input has a value for the precision and the other does not, the comparison stops and the result is <span class="kw">null</span>; if neither input has a value for the precision or the last precision has been reached, the comparison stops and the result is <span class="kw">true</span>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DateTimeGreaterOrEqualIsNull: @2012-01-01 &gt;= @2012-01-01T12</code></pre>
</div>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>greater or equal</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerGreaterOrEqualIsTrue: 4 &gt;= (2 + 2)
define DecimalGreaterOrEqualIsFalse: 3.5 &gt;= (3.5 + 0.1)
define QuantityGreaterOrEqualIsNull: 3.6 'cm2' &gt;= 3.5 'cm'
define NullGreaterOrEqualIsNull: null &gt;= 5</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="less"><a class="anchor" href="#less"></a>5.6. Less</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">&lt;(left Integer, right Integer) Boolean
&lt;(left Decimal, right Decimal) Boolean
&lt;(left Quantity, right Quantity) Boolean
&lt;(left Date, right Date) Boolean
&lt;(left DateTime, right DateTime) Boolean
&lt;(left Time, right Time) Boolean
&lt;(left String, right String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>less</em> (<span class="sym">&lt;</span>) operator returns <span class="kw">true</span> if the first argument is less than the second argument.</p>
</div>
<div class="paragraph">
<p>String comparisons are strictly lexical based on the Unicode value of the individual characters in the string.</p>
</div>
<div class="paragraph">
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of <span class="lit">'cm'</span> and <span class="lit">'m'</span> are comparable, but units of <span class="lit">'cm2'</span> and <span class="lit">'cm'</span> are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>For date/time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is less than the second, the result is <span class="kw">true</span>; if the first value is greater than the second, the result is <span class="kw">false</span>; if one input has a value for the precision and the other does not, the comparison stops and the result is <span class="kw">null</span>; if neither input has a value for the precision or the last precision has been reached, the comparison stops and the result is <span class="kw">false</span>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DateTimeLessIsNull: @2012-01-01 &lt; @2012-01-01T12</code></pre>
</div>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>less</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerLessIsTrue: 4 &lt; (2 + 2 + 2)
define DecimalLessIsFalse: 3.5 &lt; 3.5
define QuantityLessIsNull: 3.6 'cm2' &lt; 3.5 'cm'
define DateTimeLessIsNull: @2012-01-01 &lt; @2012-01-01T12
define NullLessIsNull: null &lt; 5</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="less-or-equal"><a class="anchor" href="#less-or-equal"></a>5.7. Less Or Equal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">&lt;=(left Integer, right Integer) Boolean
&lt;=(left Decimal, right Decimal) Boolean
&lt;=(left Quantity, right Quantity) Boolean
&lt;=(left Date, right Date) Boolean
&lt;=(left DateTime, right DateTime) Boolean
&lt;=(left Time, right Time) Boolean
&lt;=(left String, right String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>less or equal</em> (<span class="sym">&lt;=</span>) operator returns <span class="kw">true</span> if the first argument is less than or equal to the second argument.</p>
</div>
<div class="paragraph">
<p>String comparisons are strictly lexical based on the Unicode value of the individual characters in the string.</p>
</div>
<div class="paragraph">
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of <span class="lit">'cm'</span> and <span class="lit">'m'</span> are comparable, but units of <span class="lit">'cm2'</span> and <span class="lit">'cm'</span> are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>For date/time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is less than the second, the result is <span class="kw">true</span>; if the first value is greater than the second, the result is <span class="kw">false</span>; if one input has a value for the precision and the other does not, the comparison stops and the result is <span class="kw">null</span>; if neither input has a value for the precision or the last precision has been reached, the comparison stops and the result is <span class="kw">true</span>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DateTimeLessOrEqualIsNull: @2012-01-01 &lt;= @2012-01-01T12</code></pre>
</div>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>less or equal</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerLessOrEqualIsTrue: 4 &lt;= (2 + 2)
define DecimalLessOrEqualIsFalse: 3.5 &lt;= (3.5 - 0.1)
define QuantityLessOrEqualIsNull: 3.6 'cm2' &lt;= 3.6 'cm'
define NullLessOrEqualIsNull: null &lt;= 5</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="not-equal"><a class="anchor" href="#not-equal"></a>5.8. Not Equal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">!=&lt;T&gt;(left T, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>not equal</em> (<span class="sym">!=</span>) operator returns <span class="kw">true</span> if its arguments are not the same value.</p>
</div>
<div class="paragraph">
<p>The <em>not equal</em> operator is a shorthand for invocation of logical negation (<span class="kw">not</span>) of the <em>equal</em> operator.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>not equal</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerNotEqualIsFalse: 4 != (2 + 2)
define DecimalNotEqualIsTrue: 3.5 != (3.5 - 0.1)
define StringNotEqualIsTrue: 'CQL is awesome!' != 'cql is awesome!'
define QuantityNotEqualIsNull: 3.5 'cm2' != 3.5 'cm'
define ListNotEqualIsNull: { null, 1, 2, 3 } != { null, 1, 2, 3 }
define DateTimeNotEqualIsNull: @2012-01-01 != @2012-01-01T12
define NullNotEqualIsNull: null != null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="not-equivalent"><a class="anchor" href="#not-equivalent"></a>5.9. Not Equivalent</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">!~&lt;T&gt;(left T, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>not equivalent</em> (<span class="sym">!~</span>) operator returns <span class="kw">true</span> if its arguments are not equivalent.</p>
</div>
<div class="paragraph">
<p>The <em>not equivalent</em> operator is a shorthand for invocation of logical negation (<span class="kw">not</span>) of the <em>equivalent</em> operator.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>not equivalent</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerNotEquivalentIsFalse: 4 !~ (2 + 2)
define DecimalNotEquivalentIsTrue: 3.5 !~ (3.5 - 0.1)
define StringNotEquivalentIsFalse: 'CQL is awesome!' !~ 'cql is awesome!'
define QuantityNotEquivalentIsTrue: 3.5 'cm2' !~ 3.5 'cm'
define ListNotEquivalentIsFalse: { null, 1, 2, 3 } !~ { null, 1, 2, 3 }
define DateTimeNotEquivalentIsTrue: @2012-01-01 !~ @2012-01-01T12
define NullNotEquivalentIsFalse: null !~ null</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="arithmetic-operators-4"><a class="anchor" href="#arithmetic-operators-4"></a>6. Arithmetic Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="abs"><a class="anchor" href="#abs"></a>6.1. Abs</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Abs(argument Integer) Integer
Abs(argument Decimal) Decimal
Abs(argument Quantity) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Abs</span> operator returns the absolute value of its argument.</p>
</div>
<div class="paragraph">
<p>When taking the absolute value of a quantity, the unit is unchanged.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Abs</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerAbs: Abs(-5) // 5
define IntegerAbsIsNull: Abs(null as Integer)
define DecimalAbs: Abs(-5.5) // 5.5
define QuantityAbs: Abs(-5.5 'mg') // 5.5 'mg'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="add"><a class="anchor" href="#add"></a>6.2. Add</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">+(left Integer, right Integer) Integer
+(left Decimal, right Decimal) Decimal
+(left Quantity, right Quantity) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>add</em> (<span class="sym">+</span>) operator performs numeric addition of its arguments.</p>
</div>
<div class="paragraph">
<p>When invoked with mixed <span class="id">Integer</span> and <span class="id">Decimal</span> arguments, the <span class="id">Integer</span> argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>When adding quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of <span class="lit">'cm'</span> and <span class="lit">'m'</span> can be added, but units of <span class="lit">'cm2'</span> and <span class="lit">'cm'</span> cannot. The unit of the result will be the most granular unit of either input. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>add</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerAdd: 2 + 2 // 4
define IntegerAddIsNull: 2 + null
define DecimalAdd: 2.5 + 5 // 7.5
define QuantityAdd: -5.5 'mg' + 2 'mg' // -3.5 'mg'
define QuantityAddIsNull: -5.5 'cm' + 2 'cm2'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ceiling"><a class="anchor" href="#ceiling"></a>6.3. Ceiling</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Ceiling(argument Decimal) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Ceiling</span> operator returns the first integer greater than or equal to the argument.</p>
</div>
<div class="paragraph">
<p>When invoked with an <span class="id">Integer</span> argument, the argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Ceiling</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerCeiling: Ceiling(1) // 1
define DecimalCeiling: Ceiling(1.1) // 2
define QuantityCeilingIsNull: Ceiling(null as Decimal)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="divide"><a class="anchor" href="#divide"></a>6.4. Divide</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">/(left Decimal, right Decimal) Decimal
/(left Quantity, right Quantity) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>divide</em> (<span class="sym">/</span>) operator performs numeric division of its arguments. Note that this operator is <span class="id">Decimal</span> division; for <span class="id">Integer</span> division, use the <em>truncated divide</em> (<span class="kw">div</span>) operator.</p>
</div>
<div class="paragraph">
<p>When invoked with <span class="id">Integer</span> arguments, the arguments will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>When invoked with a mixture of <span class="id">Decimal</span> and <span class="id">Quantity</span> arguments, the <span class="id">Decimal</span> arguments will be implicitly converted to <span class="id">Quantity</span>.</p>
</div>
<div class="paragraph">
<p>For division operations involving quantities, the resulting quantity will have the appropriate unit. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">12 'cm2' / 3 'cm'</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the result will have a unit of <span class="lit">'cm'</span>. Note that when performing division of quantities with the same units, the result will have the default UCUM unit (<span class="lit">'1'</span>). When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>divide</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerDivide: 4.0 / 2 // 2.0
define DecimalDivide: 9.9 / 3.0 // 3.3
define DecimalDivideIsNull: 2.2 / null
define DecimalDivideIsError: 2.2 / 0
define QuantityDivide: -5.5 'mg' / 2.0 'mg' // -2.75</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="floor"><a class="anchor" href="#floor"></a>6.5. Floor</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Floor(argument Decimal) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Floor</span> operator returns the first integer less than or equal to the argument.</p>
</div>
<div class="paragraph">
<p>When invoked with an <span class="id">Integer</span> argument, the argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Floor</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerFloor: Floor(1) // 1
define DecimalFloor: Floor(2.1) // 2
define QuantityFloorIsNull: Floor(null as Decimal)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exp"><a class="anchor" href="#exp"></a>6.6. Exp</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Exp(argument Decimal) Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Exp</span> operator raises <em>e</em> to the power of its argument.</p>
</div>
<div class="paragraph">
<p>When invoked with an <span class="id">Integer</span> argument, the argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Exp</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerExp: Exp(0) // 1.0
define DecimalExp: Exp(-0.0) // 1.0
define QuantityExpIsNull: Exp(null as Decimal)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="log"><a class="anchor" href="#log"></a>6.7. Log</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Log(argument Decimal, base Decimal) Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Log</span> operator computes the logarithm of its first argument, using the second argument as the base.</p>
</div>
<div class="paragraph">
<p>When invoked with <span class="id">Integer</span> arguments, the arguments will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Log</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerLog: Log(16, 2) // 4.0
define DecimalLog: Log(100.0, 10.0) // 2.0
define QuantityLogIsNull: Log(null, 10.0)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ln"><a class="anchor" href="#ln"></a>6.8. Ln</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Ln(argument Decimal) Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Ln</span> operator computes the natural logarithm of its argument.</p>
</div>
<div class="paragraph">
<p>When invoked with an <span class="id">Integer</span> argument, the argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Ln</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerLn: Ln(1) // 0.0
define DecimalLn: Ln(1.0) // 0.0
define QuantityLnIsNull: Ln(null as Decimal)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="maximum"><a class="anchor" href="#maximum"></a>6.9. Maximum</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">maximum&lt;T&gt;() T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">maximum</span> operator returns the maximum representable value for the given type.</p>
</div>
<div class="paragraph">
<p>The <span class="kw">maximum</span> operator is defined for the <span class="id">Integer</span>, <span class="id">Decimal</span>, <span class="id">Date</span>, <span class="id">DateTime</span>, and <span class="id">Time</span> types.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Integer</span>, <span class="kw">maximum</span> returns the maximum signed 32-bit integer, 2<sup>31</sup> - 1.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Decimal</span>, <span class="kw">maximum</span> returns the maximum representable decimal value, (10<sup>28</sup> – 1) / 10<sup>8</sup> (99999999999999999999.99999999).</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span>, <span class="kw">maximum</span> returns the maximum representable date value, <span class="id">Date</span>(<span class="lit">9999</span>, <span class="lit">12</span>, <span class="lit">31</span>).</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span>, <span class="kw">maximum</span> returns the maximum representable date/time value, <span class="id">DateTime</span>(<span class="lit">9999</span>, <span class="lit">12</span>, <span class="lit">31</span>, <span class="lit">23</span>, <span class="lit">59</span>, <span class="lit">59</span>, <span class="lit">999</span>).</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span>, <span class="kw">maximum</span> returns the maximum representable time value, <span class="id">Time</span>(<span class="lit">23</span>, <span class="lit">59</span>, <span class="it">59</span>, <span class="lit">999</span>).</p>
</div>
<div class="paragraph">
<p>For any other type, attempting to invoke <span class="kw">maximum</span> results in an error.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">maximum</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerMaximum: maximum Integer // 2147483647
define DateTimeMaximum: maximum DateTime // @9999-12-31T23:59:59.999
define ErrorMaximum: maximum Quantity</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="minimum"><a class="anchor" href="#minimum"></a>6.10. Minimum</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">minimum&lt;T&gt;() T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">minimum</span> operator returns the minimum representable value for the given type.</p>
</div>
<div class="paragraph">
<p>The <span class="kw">minimum</span> operator is defined for the <span class="id">Integer</span>, <span class="id">Decimal</span>, <span class="id">Date</span>, <span class="id">DateTime</span>, and <span class="id">Time</span> types.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Integer</span>, <span class="kw">minimum</span> returns the minimum signed 32-bit integer, -2<sup>31</sup>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Decimal</span>, <span class="kw">minimum</span> returns the minimum representable decimal value, (-10<sup>28</sup> + 1) / 10<sup>8</sup> (-99999999999999999999.99999999).</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span>, <span class="kw">minimum</span> returns the minimum representable date value, <span class="id">DateTime</span>(<span class="lit">1</span>, <span class="lit">1</span>, <span class="lit">1</span>).</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span>, <span class="kw">minimum</span> returns the minimum representable date/time value, <span class="id">DateTime</span>(<span class="lit">1</span>, <span class="lit">1</span>, <span class="lit">1</span>, <span class="lit">0</span>, <span class="lit">0</span>, <span class="lit">0</span>, <span class="lit">0</span>).</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span>, <span class="kw">minimum</span> returns the minimum representable time value, <span class="id">Time</span>(<span class="lit">0</span>, <span class="lit">0</span>, <span class="lit">0</span>, <span class="lit">0</span>).</p>
</div>
<div class="paragraph">
<p>For any other type, attempting to invoke <span class="kw">minimum</span> results in an error.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">minimum</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerMinimum: minimum Integer // -2147483648
define DateTimeMinimum: minimum DateTime // @0001-01-01T00:00:00.000
define ErrorMinimum: minimum Quantity</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modulo"><a class="anchor" href="#modulo"></a>6.11. Modulo</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">mod(left Integer, right Integer) Integer
mod(left Decimal, right Decimal) Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">mod</span> operator computes the remainder of the division of its arguments.</p>
</div>
<div class="paragraph">
<p>When invoked with mixed <span class="id">Integer</span> and <span class="id">Decimal</span> arguments, the <span class="id">Integer</span> argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">mod</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerModulo: 3 mod 2 // 1
define DecimalModulo: 2.5 mod 2 // 0.5
define ModuloIsNull: 2.5 mod null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multiply"><a class="anchor" href="#multiply"></a>6.12. Multiply</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">*(left Integer, right Integer) Integer
*(left Decimal, right Decimal) Decimal
*(left Quantity, right Quantity) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>multiply</em> (<span class="sym">*</span>) operator performs numeric multiplication of its arguments.</p>
</div>
<div class="paragraph">
<p>When invoked with mixed <span class="id">Integer</span> and <span class="id">Decimal</span> arguments, the <span class="id">Integer</span> argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>When invoked with mixed <span class="id">Decimal</span> and <span class="id">Quantity</span> arguments, the <span class="id">Decimal</span> argument will be implicitly converted to <span class="id">Quantity</span>.</p>
</div>
<div class="paragraph">
<p>For multiplication operations involving quantities, the resulting quantity will have the appropriate unit. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">12 'cm' * 3 'cm'
3 'cm' * 12 'cm2'</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the first result will have a unit of <span class="lit">'cm2'</span>, and the second result will have a unit of <span class="lit">'cm3'</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="negate"><a class="anchor" href="#negate"></a>6.13. Negate</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">-(argument Integer) Integer
-(argument Decimal) Decimal
-(argument Quantity) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>negate</em> (<span class="sym">-</span>) operator returns the negative of its argument.</p>
</div>
<div class="paragraph">
<p>When negating quantities, the unit is unchanged.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>negate</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerNegate: -3 // -3
define DecimalNegate: -(-3.3) // 3.3
define QuantityNegate: -3.3 'mg' // -3.3 'mg'
define NegateIsNull: -(null as Integer)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="predecessor"><a class="anchor" href="#predecessor"></a>6.14. Predecessor</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">predecessor of&lt;T&gt;(argument T) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">predecessor</span> operator returns the predecessor of the argument. For example, the predecessor of 2 is 1. If the argument is already the minimum value for the type, a run-time error is thrown.</p>
</div>
<div class="paragraph">
<p>The <span class="kw">predecessor</span> operator is defined for the <span class="id">Integer</span>, <span class="id">Decimal</span>, <span class="id">Quantity</span>, <span class="id">Date</span>, <span class="id">DateTime</span>, and <span class="id">Time</span> types.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Integer</span>, <span class="kw">predecessor</span> is equivalent to subtracting 1.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Decimal</span>, <span class="kw">predecessor</span> is equivalent to subtracting the minimum precision value for the <span class="id">Decimal</span> type, or 10<sup>-08</sup>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span>, <span class="id">DateTime</span>, and <span class="id">Time</span> values, <span class="kw">predecessor</span> is equivalent to subtracting a time-unit quantity for the lowest specified precision of the value. For example, if the <span class="id">DateTime</span> is fully specified, <span class="kw">predecessor</span> is equivalent to subtracting 1 millisecond; if the <span class="id">DateTime</span> is specified to the second, <span class="kw">predecessor</span> is equivalent to subtracting one second, etc.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Quantity</span> values, the <span class="kw">predecessor</span> is equivalent to subtracting 1 if the quantity is an integer, and the minimum precision value for the <span class="id">Decimal</span> type if the quantity is a decimal. The units are unchanged.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">predecessor</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerPredecessor: predecessor of 100 // 99
define DecimalPredecessor: predecessor of 1.0 // 0.99999999
define DatePredecessor: predecessor of @2014-01-01 // @2013-12-31
define PredecessorIsNull: predecessor of (null as Quantity)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="power"><a class="anchor" href="#power"></a>6.15. Power</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">^(argument Integer, exponent Integer) Integer
^(argument Decimal, exponent Decimal) Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>power</em> (<span class="sym">^</span>) operator raises the first argument to the power given by the second argument.</p>
</div>
<div class="paragraph">
<p>When invoked with mixed <span class="id">Integer</span> and <span class="id">Decimal</span> arguments, the <span class="id">Integer</span> argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>power</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerPower: 2^3 // 8
define IntegerPowerFun: Power(2, 3) // 8
define DecimalPower: 2.5^2.0 // 6.25
define NegateIsNull: 2.5^null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="round"><a class="anchor" href="#round"></a>6.16. Round</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Round(argument Decimal) Decimal
Round(argument Decimal, precision Integer) Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Round</span> operator returns the nearest whole number to its argument. The semantics of round are defined as a traditional round, meaning that a decimal value of 0.5 or higher will round to 1.</p>
</div>
<div class="paragraph">
<p>When invoked with an <span class="id">Integer</span> argument, the argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Precision determines the decimal place at which the rounding will occur. If precision is not specified or <span class="kw">null</span>, 0 is assumed.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Round</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerRound: Round(1) // 1
define DecimalRound: Round(3.14159, 3) // 3.142
define RoundIsNull: Round(null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="subtract"><a class="anchor" href="#subtract"></a>6.17. Subtract</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">-(left Integer, right Integer) Integer
-(left Decimal, right Decimal) Decimal
-(left Quantity, right Quantity) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>subtract</em> (<span class="sym">-</span>) operator performs numeric subtraction of its arguments.</p>
</div>
<div class="paragraph">
<p>When invoked with mixed <span class="id">Integer</span> and <span class="id">Decimal</span> arguments, the <span class="id">Integer</span> argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>When subtracting quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of <span class="lit">'cm'</span> and <span class="lit">'m'</span> can be subtracted, but units of <span class="lit">'cm2'</span> and <span class="lit">'cm'</span> cannot. The unit of the result will be the most granular unit of either input. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>subtract</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerSubtract: 2 - 1 // 1
define DecimalSubtract: 3.14 - 3.12 // 0.02
define QuantitySubtract: 3.14 'mg' - 3.12 'mg' // 0.02 'mg'
define QuantitySubtractError: 3.14 'cm' - 3.12 'cm2'
define SubtractIsNull: 3 - null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="successor"><a class="anchor" href="#successor"></a>6.18. Successor</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">successor of&lt;T&gt;(argument T) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">successor</span> operator returns the successor of the argument. For example, the successor of 1 is 2. If the argument is already the maximum value for the type, a run-time error is thrown.</p>
</div>
<div class="paragraph">
<p>The <span class="kw">successor</span> operator is defined for the <span class="id">Integer</span>, <span class="id">Quantity</span>, <span class="id">Decimal</span>, <span class="id">Date</span>, <span class="id">DateTime</span>, and <span class="id">Time</span> types.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Integer</span>, <span class="kw">successor</span> is equivalent to adding 1.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Decimal</span>, <span class="kw">successor</span> is equivalent to adding the minimum precision value for the <span class="id">Decimal</span> type, or 10<sup>-08</sup>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span>, <span class="id">DateTime</span> and <span class="id">Time</span> values, <span class="kw">successor</span> is equivalent to adding a time-unit quantity for the lowest specified precision of the value. For example, if the <span class="id">DateTime</span> is fully specified, <span class="kw">successor</span> is equivalent to adding 1 millisecond; if the <span class="id">DateTime</span> is specified to the second, <span class="kw">successor</span> is equivalent to adding one second, etc.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Quantity</span> values, the <span class="kw">successor</span> is equivalent to adding 1 if the quantity is an integer, and the minimum precision value for the <span class="id">Decimal</span> type if the quantity is a decimal. The units are unchanged.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">successor</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerSuccessor: successor of 100 // 101
define DecimalSuccessor: successor of 1.0 // 1.00000001
define DateSuccessor: successor of @2014-01-01 // @2014-01-02
define SuccessorIsNull: successor of (null as Quantity)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truncate"><a class="anchor" href="#truncate"></a>6.19. Truncate</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Truncate(argument Decimal) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Truncate</span> operator returns the integer component of its argument.</p>
</div>
<div class="paragraph">
<p>When invoked with an <span class="id">Integer</span> argument, the argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Truncate</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerTruncate: Truncate(101) // 101
define DecimalTruncate: Truncate(1.00000001) // 1
define TruncateIsNull: Truncate(null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truncated-divide"><a class="anchor" href="#truncated-divide"></a>6.20. Truncated Divide</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">div(left Integer, right Integer) Integer
div(left Decimal, right Decimal) Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">div</span> operator performs truncated division of its arguments.</p>
</div>
<div class="paragraph">
<p>When invoked with mixed <span class="id">Integer</span> and <span class="id">Decimal</span> arguments, the <span class="id">Integer</span> argument will be implicitly converted to <span class="id">Decimal</span>.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">div</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerTruncatedDivide: 4 div 2 // 2
define DecimalTruncatedDivide: 4.14 div 2.06 // 2
define TruncatedDivideIsNull: 3 div null</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="string-operators-3"><a class="anchor" href="#string-operators-3"></a>7. String Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="combine"><a class="anchor" href="#combine"></a>7.1. Combine</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Combine(source List&lt;String&gt;) String
Combine(source List&lt;String&gt;, separator String) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Combine</span> operator combines a list of strings, optionally separating each string with the given separator.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, or any element in the source list of strings is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Combine</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define CombineList: Combine({ 'super', 'califragilistic', 'expialidocious' }) // 'supercalifragilisticexpialidocious'
define CombineWithSeparator: Combine({ 'CQL', 'is', 'awesome' }, ' ') // 'CQL is awesome'
define CombineIsNull: Combine({ 'the', 'next', 'arg', 'is', null })</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="concatenate"><a class="anchor" href="#concatenate"></a>7.2. Concatenate</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">+(left String, right String) String
&amp;(left String, right String) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>concatenate</em> (<span class="sym">+</span> or <span class="sym">&amp;</span>) operator performs string concatenation of its arguments.</p>
</div>
<div class="paragraph">
<p>When using <span class="sym">+</span>, if either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>When using <span class="sym">&amp;</span>, <span class="kw">null</span> arguments are treated as an empty string (<span class="sym">''</span>).</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>concatenate</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define ConcatenatePlus: 'CQL is' + ' awesome' // 'CQL is awesome'
define ConcatenateAnd: 'CQL is' &amp; ' awesome' // 'CQL is awesome'
define ConcatenateFun: Concatenate('CQL is', ' awesome') // 'CQL is awesome'
define ConcatenateIsNull: 'CQL is' + null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="endswith"><a class="anchor" href="#endswith"></a>7.3. EndsWith</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">EndsWith(argument String, suffix String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">EndsWith</span> operator returns true if the given string ends with the given suffix.</p>
</div>
<div class="paragraph">
<p>If the suffix is the empty string, the result is true.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">EndsWith</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define EndsWithIsTrue: EndsWith('CQL is awesome', 'some')
define EndsWithIsFalse: EndsWith('CQL is awesome', 'Some')
define EndsWithIsNull: EndsWith('CQL is awesome', null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indexer"><a class="anchor" href="#indexer"></a>7.4. Indexer</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">[](argument String, index Integer) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>indexer</em> (<span class="sym">[]</span>) operator returns the character at the indexth position in a string.</p>
</div>
<div class="paragraph">
<p>Indexes in strings are defined to be 0-based.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the index is greater than the length of the string being indexed, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>indexer</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Indexer2: 'CQL is awesome'[2] // 'L'
define IndexerIsNull: 'CQL is awesome'[14]
define IndexerIsAlsoNull: 'CQL is awesome'[null]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lastpositionof"><a class="anchor" href="#lastpositionof"></a>7.5. LastPositionOf</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">LastPositionOf(pattern String, argument String) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">LastPositionOf</span> operator returns the 0-based index of the last appearance of the given pattern in the given string.</p>
</div>
<div class="paragraph">
<p>If the pattern is not found, the result is -1.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">LastPositionOf</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define LastPositionOfFound: LastPositionOf('awesome', 'CQL is awesome') // 7
define LastPositionOfNotFound: LastPositionOf('Some', 'CQL is awesome') // -1
define LastPositionOfIsNull: LastPositionOf(null, 'CQL is awesome')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="length"><a class="anchor" href="#length"></a>7.6. Length</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Length(argument String) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Length</span> operator returns the number of characters in a string.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Length</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Length14: Length('CQL is awesome') // 14
define LengthIsNull: Length(null as String)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lower"><a class="anchor" href="#lower"></a>7.7. Lower</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Lower(argument String) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Lower</span> operator returns the given string with all characters converted to their lower case equivalents.</p>
</div>
<div class="paragraph">
<p>Note that the definition of <em>lowercase</em> for a given character is a locale-dependent determination, and is not specified by CQL. Implementations are expected to provide appropriate and consistent handling of locale for their environment.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Lower</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define LowerCQL: Lower('CQL is awesome') // 'cql is awesome'
define LowerIsNull: Lower(null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="matches"><a class="anchor" href="#matches"></a>7.8. Matches</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Matches(argument String, pattern String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Matches</span> operator returns true if the given string matches the given regular expression pattern. Regular expressions should function consistently, regardless of any culture- and locale-specific settings in the environment, should be case-sensitive, use single line mode, and allow Unicode characters.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Platforms will typically use native regular expression implementations. These are typically fairly similar, but there will always be small differences. As such, CQL does not prescribe a particular dialect, but recommends the use of the dialect defined as part of XML Schema 1.1 as the dialect most likely to be broadly supported and understood.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Matches</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define MatchesTrue: Matches('1,2three', '\\d,\\d\\w+')
define MatchesFalse: Matches('1,2three', '\\w+')
define MatchesIsNull: Matches('12three', null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="positionof"><a class="anchor" href="#positionof"></a>7.9. PositionOf</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">PositionOf(pattern String, argument String) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">PositionOf</span> operator returns the 0-based index of the given pattern in the given string.</p>
</div>
<div class="paragraph">
<p>If the pattern is not found, the result is -1.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">PositionOf</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define PositionOfFound: PositionOf('s', 'CQL is awesome') // 5
define PositionOfNotFound: PositionOf('\\d', 'CQL is awesome') // -1
define PositionOfIsNull: PositionOf(null, 'CQL is awesome')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="replacematches"><a class="anchor" href="#replacematches"></a>7.10. ReplaceMatches</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Matches(argument String, pattern String, substitution String) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">ReplaceMatches</span> operator matches the given string using the given regular expression pattern, replacing each match with the given substitution. The substitution string may refer to identified match groups in the regular expression. Regular expressions should function consistently, regardless of any culture- and locale-specific settings in the environment, should be case-sensitive, use single line mode, and allow Unicode characters.</p>
</div>
<div class="paragraph">
<p>If any argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Platforms will typically use native regular expression implementations. These are typically fairly similar, but there will always be small differences. As such, CQL does not prescribe a particular dialect, but recommends the use of the dialect defined as part of XML Schema 1.1 as the dialect most likely to be broadly supported and understood.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">ReplaceMatches</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define ReplaceMatchesFound: ReplaceMatches('CQL is awesome', 'awesome', 'amazing') // 'CQL is amazing'
define ReplaceMatchesNotFound: ReplaceMatches('CQL is awesome', 'awesome!', 'amazing') // 'CQL is awesome'
define ReplaceMatchesIsNull: ReplaceMatches('CQL is awesome', 'awesome', null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="split"><a class="anchor" href="#split"></a>7.11. Split</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Split(stringToSplit String, separator String) List&lt;String&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Split</span> operator splits a string into a list of strings using a separator.</p>
</div>
<div class="paragraph">
<p>If the <span class="id">stringToSplit</span> argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the <span class="id">stringToSplit</span> argument does not contain any appearances of the separator, the result is a list of strings containing one element that is the value of the <span class="id">stringToSplit</span> argument.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Split</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define SplitFound: Split('CQL is awesome', ' ') // { 'CQL', 'is', 'awesome' }
define SplitNotFound: Split('CQL is awesome', ',') // { 'CQL is awesome' }
define SplitIsNull: Split(null, ' ')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="splitonmatches"><a class="anchor" href="#splitonmatches"></a>7.12. SplitOnMatches</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Split(stringToSplit String, separatorPattern String) List&lt;String&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">SplitOnMatches</span> operator splits a string into a list of strings using a separator that is defined by a regular expression pattern.</p>
</div>
<div class="paragraph">
<p>If the <span class="id">stringToSplit</span> argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The <span class="id">separatorPattern</span> argument is interpreted with the same regular expression semantics as defined for the <span class="id">Matches</span> operator.</p>
</div>
<div class="paragraph">
<p>If the <span class="id">stringToSplit</span> argument does not contain any matches for the <span class="id">separatorPattern</span>, the result is a list of strings containing one element that is the value of the <span class="id">stringToSplit</span> argument.</p>
</div>
</div>
<div class="sect2">
<h3 id="startswith"><a class="anchor" href="#startswith"></a>7.13. StartsWith</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">StartsWith(argument String, prefix String) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">StartsWith</span> operator returns true if the given string starts with the given prefix.</p>
</div>
<div class="paragraph">
<p>If the prefix is the empty string, the result is true.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">StartsWith</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define StartsWithIsTrue: StartsWith('CQL is awesome', 'CQL')
define StartsWithIsFalse: StartsWith('CQL is awesome', 'CQl')
define StartsWithIsNull: StartsWith('CQL is awesome', null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="substring"><a class="anchor" href="#substring"></a>7.14. Substring</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Substring(stringToSub String, startIndex Integer) String
Substring(stringToSub String, startIndex Integer, length Integer) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Substring</span> operator returns the string within <span class="id">stringToSub</span>, starting at the 0-based index <span class="id">startIndex</span>, and consisting of <span class="id">length</span> characters.</p>
</div>
<div class="paragraph">
<p>If <span class="id">length</span> is omitted, the substring returned starts at <span class="id">startIndex</span> and continues to the end of <span class="id">stringToSub</span>.</p>
</div>
<div class="paragraph">
<p>If <span class="id">stringToSub</span> or <span class="id">startIndex</span> is <span class="kw">null</span>, or <span class="id">startIndex</span> is out of range, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Substring</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define SubstringWithoutLength: Substring('CQL is awesome', 7) // 'awesome'
define SubstringWithLength: Substring('CQL is awesome', 7, 3) // 'awe'
define SubstringIsNull: Substring('CQL is awesome', null)
define SubstringIsAlsoNull: Substring('CQL is awesome', 14)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="upper"><a class="anchor" href="#upper"></a>7.15. Upper</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Upper(argument String) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Upper</span> operator returns the given string with all characters converted to their upper case equivalents.</p>
</div>
<div class="paragraph">
<p>Note that the definition of <em>uppercase</em> for a given character is a locale-dependent determination, and is not specified by CQL. Implementations are expected to provide appropriate and consistent handling of locale for their environment.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Upper</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define UpperCQL: Upper('cql IS AWESOME') // 'CQL IS AWESOME'
define UpperIsNull: Upper(null)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="datetime-operators-2"><a class="anchor" href="#datetime-operators-2"></a>8. Date/Time Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="add-1"><a class="anchor" href="#add-1"></a>8.1. Add</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">+(left Date, right Quantity) Date
+(left DateTime, right Quantity) DateTime
+(left Time, right Quantity) Time</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>add</em> (<span class="sym">+</span>) operator returns the value of the given date/time, incremented by the time-valued quantity, respecting variable length periods for calendar years and months.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, the quantity unit must be one of: <span class="kw">years</span>, <span class="kw">months</span>, <span class="kw">weeks</span>, or <span class="kw">days</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, the quantity unit must be one of: <span class="kw">years</span>, <span class="kw">months</span>, <span class="kw">weeks</span>, <span class="kw">days</span>, <span class="kw">hours</span>, <span class="kw">minutes</span>, <span class="kw">seconds</span>, or <span class="kw">milliseconds</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, the quantity unit must be one of: <span class="kw">hours</span>, <span class="kw">minutes</span>, <span class="kw">seconds</span>, or <span class="kw">milliseconds</span>.</p>
</div>
<div class="paragraph">
<p>Note that the quantity units may be specified in singular, plural, or UCUM form.</p>
</div>
<div class="paragraph">
<p>The operation is performed by converting the time-based quantity to the most precise value specified in the date/time (truncating any resulting decimal portion) and then adding it to the date/time value. For example, the following addition:</p>
</div>
<div class="paragraph">
<p><span class="id">DateTime(2014)</span> <span class="sym">+</span> <span class="lit">24</span> <span class="id">months</span></p>
</div>
<div class="paragraph">
<p>This example results in the value <span class="id">DateTime(2016)</span> even though the date/time value is not specified to the level of precision of the time-valued quantity.</p>
</div>
<div class="paragraph">
<p>Note also that this means that if decimals appear in the time-valued quantities, the fractional component will be ignored. For example, the following addition:</p>
</div>
<div class="paragraph">
<p><span class="id">DateTime(2014)</span> <span class="sym">+</span> <span class="lit">18</span> <span class="id">months</span></p>
</div>
<div class="paragraph">
<p>This example results in the value <span class="id">DateTime(2015)</span></p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="after"><a class="anchor" href="#after"></a>8.2. After</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">after _precision_ of(left Date, right Date) Boolean
after _precision_ of(left DateTime, right DateTime) Boolean
after _precision_ of(left Time, right Time) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">after</span><em>-precision-</em><span class="kw">of</span> operator compares two date/time values to the specified precision to determine whether the first argument is the after the second argument. The comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is greater than the second, the result is <span class="kw">true</span>; if the first value is less than the second, the result is <span class="kw">false</span>; if either input has no value for the precision, the comparison stops and the result is <span class="kw">null</span>; if the specified precision has been reached, the comparison stops and the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, or <span class="kw">day</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, <span class="kw">day</span>, <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, <em>precision</em> must be one of: <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When this operator is called with both <span class="id">Date</span> and <span class="id">DateTime</span> inputs, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> values as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>As with all date/time calculations, comparisons are performed respecting the timezone offset.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">after</span><em>-precision-</em><span class="kw">of</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define AfterIsTrue: @2012-02-01 after month of @2012-01-01
define AfterIsFalse: @2012-01-01 after month of @2012-01-01
define AfterUncertainIsNull: @2012-01-01 after month of @2012
define AfterIsNull: @2012-01-01 after month of null</code></pre>
</div>
</div>
<div class="paragraph">
<p>This operator is also defined for intervals, see the <a href="#after-1">After (Intervals)</a> operator for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="before"><a class="anchor" href="#before"></a>8.3. Before</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">before _precision_ of(left Date, right Date) Boolean
before _precision_ of(left DateTime, right DateTime) Boolean
before _precision_ of(left Time, right Time) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">before</span><em>-precision-</em><span class="kw">of</span> operator compares two date/time values to the specified precision to determine whether the first argument is the before the second argument. The comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is less than the second, the result is <span class="kw">true</span>; if the first value is greater than the second, the result is <span class="kw">false</span>; if either input has no value for the precision, the comparison stops and the result is <span class="kw">null</span>; if the specified precision has been reached, the comparison stops and the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, or <span class="kw">day</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, <span class="kw">day</span>, <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, <em>precision</em> must be one of: <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When this operator is called with both <span class="id">Date</span> and <span class="id">DateTime</span> inputs, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> values as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>As with all date/time calculations, comparisons are performed respecting the timezone offset.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">before</span><em>-precision-</em><span class="kw">of</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define BeforeIsTrue: @2012-01-01 before month of @2012-02-01
define BeforeIsFalse: @2012-01-01 before month of @2012-01-01
define BeforeUncertainIsNull: @2012 before month of @2012-02-01
define BeforeIsNull: @2012-01-01 before month of null</code></pre>
</div>
</div>
<div class="paragraph">
<p>This operator is also defined for intervals, see the <a href="#before-1">Before (Intervals)</a> operator for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="date-1"><a class="anchor" href="#date-1"></a>8.4. Date</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Date(year Integer) Date
Date(year Integer, month Integer) Date
Date(year Integer, month Integer, day Integer) Date</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Date</span> operator constructs a date value from the given components.</p>
</div>
<div class="paragraph">
<p>At least one component must be specified, and no component may be specified at a precision below an unspecified precision. For example, <span class="id">month</span> may be <span class="kw">null</span>, but if it is, <span class="id">day</span> must be <span class="kw">null</span> as well.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Date</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DateValid: Date(2012, 1, 1)
define DateInvalid: Date(2012, null, 1)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="datetime-1"><a class="anchor" href="#datetime-1"></a>8.5. DateTime</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">DateTime(year Integer) DateTime
DateTime(year Integer, month Integer) DateTime
DateTime(year Integer, month Integer, day Integer) DateTime
DateTime(year Integer, month Integer, day Integer,
  hour Integer) DateTime
DateTime(year Integer, month Integer, day Integer,
  hour Integer, minute Integer) DateTime
DateTime(year Integer, month Integer, day Integer,
  hour Integer, minute Integer, second Integer) DateTime
DateTime(year Integer, month Integer, day Integer,
  hour Integer, minute Integer, second Integer, millisecond Integer) DateTime
DateTime(year Integer, month Integer, day Integer,
  hour Integer, minute Integer, second Integer, millisecond Integer,
  timezoneOffset Decimal) DateTime</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">DateTime</span> operator constructs a date/time value from the given components.</p>
</div>
<div class="paragraph">
<p>At least one component other than <span class="id">timezoneOffset</span> must be specified, and no component may be specified at a precision below an unspecified precision. For example, <span class="id">hour</span> may be <span class="kw">null</span>, but if it is, <span class="id">minute</span>, <span class="id">second</span>, and <span class="id">millisecond</span> must all be <span class="kw">null</span> as well.</p>
</div>
<div class="paragraph">
<p>If <span class="id">timezoneOffset</span> is not specified, it is defaulted to the timezone offset of the evaluation request.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">DateTime</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DateValid: DateTime(2012, 1, 1, 12, 30, 0, 0, -7)
define DateInvalid: DateTime(2012, 1, 1, 12, null, 0, 0, -7)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="datetime-component-from"><a class="anchor" href="#datetime-component-from"></a>8.6. Date/Time Component From</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">_precision_ from(argument Date) Integer
_precision_ from(argument DateTime) Integer
_precision_ from(argument Time) Integer
timezone from(argument DateTime) Decimal
timezone from(argument Time) Decimal
date from(argument DateTime) Date
time from(argument DateTime) Time</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>component</em>-<span class="kw">from</span> operator returns the specified component of the argument.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, or <span class="kw">day</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, <span class="kw">day</span>, <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, <em>precision</em> must be one of: <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, extraction of a week component is not supported.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, or is not specified to the level of precision being extracted, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>component</em>-<span class="kw">from</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define MonthFrom: month from DateTime(2012, 1, 1, 12, 30, 0, 0, -7) // 1
define TimeZoneFrom: timezone from DateTime(2012, 1, 1, 12, 30, 0, 0, -7) // -7.0
define DateFrom: date from DateTime(2012, 1, 1, 12, 30, 0, 0, -7) // @2012-01-01
define TimeFrom: time from DateTime(2012, 1, 1, 12, 30, 0, 0, -7) // @T12:30:00.000-07:00
define MonthFromIsNull: month from DateTime(2012)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="difference"><a class="anchor" href="#difference"></a>8.7. Difference</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">difference in _precision_ between(low Date, high Date) Integer
difference in _precision_ between(low DateTime, high DateTime) Integer
difference in _precision_ between(low Time, high Time) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>difference-</em><span class="kw">between</span> operator returns the number of boundaries crossed for the specified precision between the first and second arguments. If the first argument is after the second argument, the result is negative. The result of this operation is always an integer; any fractional boundaries are dropped.</p>
</div>
<div class="paragraph">
<p>As with all date/time calculations, difference calculations are performed respecting the timezone offset depending on the precision.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, <em>precision</em> must be one of: <span class="kw">years</span>, <span class="kw">months</span>, <span class="kw">weeks</span>, or <span class="kw">days</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, <em>precision</em> must be one of: <span class="kw">years</span>, <span class="kw">months</span>, <span class="kw">weeks</span>, <span class="kw">days</span>, <span class="kw">hours</span>, <span class="kw">minutes</span>, <span class="kw">seconds</span>, or <span class="kw">milliseconds</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, <em>precision</em> must be one of: <span class="kw">hours</span>, <span class="kw">minutes</span>, <span class="kw">seconds</span>, or <span class="kw">milliseconds</span>.</p>
</div>
<div class="paragraph">
<p>For calculations involving weeks, Sunday is considered to be the first day of the week for the purposes of determining the number of boundaries crossed.</p>
</div>
<div class="paragraph">
<p>When this operator is called with both <span class="id">Date</span> and <span class="id">DateTime</span> inputs, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>difference-</em><span class="kw">between</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DifferenceInMonths: difference in months between @2012-01-01 and @2012-02-01 // 1
define UncertainDifferenceInMonths: difference in months between @2012-01-02 and @2012 // [0, 11]
define DifferenceIsNull: difference in months between @2012-01-01 and null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="duration"><a class="anchor" href="#duration"></a>8.8. Duration</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">_duration_ between(low Date, high Date) Integer
_duration_ between(low DateTime, high DateTime) Integer
_duration_ between(low Time, high Time) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>duration-</em><span class="kw">between</span> operator returns the number of whole calendar periods for the specified precision between the first and second arguments. If the first argument is after the second argument, the result is negative. The result of this operation is always an integer; any fractional periods are dropped.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, <em>duration</em> must be one of: <span class="kw">years</span>, <span class="kw">months</span>, <span class="kw">weeks</span>, or <span class="kw">days</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, <em>duration</em> must be one of: <span class="kw">years</span>, <span class="kw">months</span>, <span class="kw">weeks</span>, <span class="kw">days</span>, <span class="kw">hours</span>, <span class="kw">minutes</span>, <span class="kw">seconds</span>, or <span class="kw">milliseconds</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, <em>duration</em> must be one of: <span class="kw">hours</span>, <span class="kw">minutes</span>, <span class="kw">seconds</span>, or <span class="kw">milliseconds</span>.</p>
</div>
<div class="paragraph">
<p>When this operator is called with both <span class="id">Date</span> and <span class="id">DateTime</span> inputs, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>duration-</em><span class="kw">between</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DurationInMonths: months between @2012-01-01 and @2012-02-01 // 1
define UncertainDurationInMonths: months between @2012-01-02 and @2012 // [0, 10]
define DurationIsNull: months between @2012-01-01 and null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="now"><a class="anchor" href="#now"></a>8.9. Now</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Now() DateTime</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Now</span> operator returns the date and time of the start timestamp associated with the evaluation request. <span class="id">Now</span> is defined in this way for two reasons:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The operation will always return the same value within any given evaluation, ensuring that the result of an expression containing Now will always return the same result.</p>
</li>
<li>
<p>The operation will return the timestamp associated with the evaluation request, allowing the evaluation to be performed with the same timezone offset information as the data delivered with the evaluation request.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="on-or-after-1"><a class="anchor" href="#on-or-after-1"></a>8.10. On Or After</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">on or after _precision_ (left Date, right Date) Boolean
on or after _precision_ (left DateTime, right DateTime) Boolean
on or after _precision_ (left Time, right Time) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">on or after</span> operator for date/time values is a synonym for the <span class="kw">same or after</span> operator and is supported to enable natural phrasing. See the description of the <a href="#same-or-after-1">Same Or After (Date/Time)</a> operator.</p>
</div>
<div class="paragraph">
<p>Note that this operator can be invoked using either the <span class="kw">on or after</span> or the <span class="kw">after or on</span> syntax.</p>
</div>
<div class="paragraph">
<p>In timing phrases, the keyword <span class="kw">same</span> is a synonym for <span class="kw">on</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="on-or-before-1"><a class="anchor" href="#on-or-before-1"></a>8.11. On Or Before</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">on or before _precision_ (left Date, right Date) Boolean
on or before _precision_ (left DateTime, right DateTime) Boolean
on or before _precision_ (left Time, right Time) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">on or before</span> operator for date/time values is a synonym for the <span class="kw">same or before</span> operator and is supported to enable natural phrasing. See the description of the <a href="#same-or-before-1">Same Or Before (Date/Time)</a> operator.</p>
</div>
<div class="paragraph">
<p>Note that this operator can be invoked using either the <span class="kw">on or before</span> or the <span class="kw">before or on</span> syntax.</p>
</div>
<div class="paragraph">
<p>In timing phrases, the keyword <span class="kw">same</span> is a synonym for <span class="kw">on</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="same-as-1"><a class="anchor" href="#same-as-1"></a>8.12. Same As</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">same _precision_ as(left Date, right Date) Boolean
same _precision_ as(left DateTime, right DateTime) Boolean
same _precision_ as(left Time, right Time) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">same</span><em>-precision-</em><span class="kw">as</span> operator compares two date/time values to the specified precision for equality. The comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the values are different, the comparison stops and the result is <span class="kw">false</span>; if either input has no value for the precision, the comparison stops and the result is <span class="kw">null</span>; if the specified precision has been reached, the comparison stops and the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, or <span class="kw">day</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, <span class="kw">day</span>, <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, <em>precision</em> must be one of: <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When this operator is called with both <span class="id">Date</span> and <span class="id">DateTime</span> inputs, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>As with all date/time calculations, comparisons are performed respecting the timezone offset.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">same</span><em>-precision-</em><span class="kw">as</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define SameAsTrue: @2012-01-01 same day as @2012-01-01
define SameAsFalse: @2012-01-01 same day as @2012-01-02
define UncertainSameAsIsNull: @2012-01-01 same day as @2012-01
define SameAsIsNull: @2012-01-01 same day as null</code></pre>
</div>
</div>
<div class="paragraph">
<p>This operator is also defined for intervals, see the <a href="#same-as-2">Same As (Intervals)</a> operator for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="same-or-after-1"><a class="anchor" href="#same-or-after-1"></a>8.13. Same Or After</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">same _precision_ or after(left Date, right Date) Boolean
same _precision_ or after(left DateTime, right DateTime) Boolean
same _precision_ or after(left Time, right Time) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">same</span><em>-precision-</em><span class="kw">or after</span> operator compares two date/time values to the specified precision to determine whether the first argument is the same or after the second argument. The comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is greater than the second, the result is <span class="kw">true</span>; if the first value is less than the second, the result is <span class="kw">false</span>; if either input has no value for the precision, the comparison stops and the result is <span class="kw">null</span>; if the specified precision has been reached, the comparison stops and the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, or <span class="kw">day</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, <span class="kw">day</span>, <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, <em>precision</em> must be one of: <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When this operator is called with both <span class="id">Date</span> and <span class="id">DateTime</span> inputs, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>As with all date/time calculations, comparisons are performed respecting the timezone offset.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that in timing phrases, the keyword <span class="kw">on</span> may be used as a synonym for <span class="kw">same</span> for this operator.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">same</span><em>-precision-</em><span class="kw">or after</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define SameOrAfterTrue: @2012-01-02 same day or after @2012-01-01
define SameOrAfterFalse: @2012-01-01 same day or after @2012-01-02
define UncertainSameOrAfterIsNull: @2012-01-02 same day or after @2012-01
define SameOrAfterIsNull: @2012-01-01 same day or after null</code></pre>
</div>
</div>
<div class="paragraph">
<p>This operator is also defined for intervals, see the <a href="#same-or-after-2">Same Or After (Intervals)</a> operator for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="same-or-before-1"><a class="anchor" href="#same-or-before-1"></a>8.14. Same Or Before</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">same _precision_ or before(left Date, right Date) Boolean
same _precision_ or before(left DateTime, right DateTime) Boolean
same _precision_ or before(left Time, right Time) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">same</span><em>-precision-</em><span class="kw">or before</span> operator compares two date/time values to the specified precision to determine whether the first argument is the same or before the second argument. The comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is less than the second, the result is <span class="kw">true</span>; if the first value is greater than the second, the result is <span class="kw">false</span>; if either input has no value for the precision, the comparison stops and the result is <span class="kw">null</span>; if the specified precision has been reached, the comparison stops and the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, or <span class="kw">day</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, <span class="kw">day</span>, <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, <em>precision</em> must be one of: <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When this operator is called with both <span class="id">Date</span> and <span class="id">DateTime</span> inputs, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>As with all date/time calculations, comparisons are performed respecting the timezone offset.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are <span class="kw">null</span>, the result is null.</p>
</div>
<div class="paragraph">
<p>Note that in timing phrases, the keyword <span class="kw">on</span> may be used as a synonym for <span class="kw">same</span> for this operator.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">same</span><em>-precision-</em><span class="kw">or before</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define SameOrBeforeTrue: @2012-01-01 same day or before @2012-01-02
define SameOrBeforeFalse: @2012-01-02 same day or before @2012-01-01
define UncertainSameOrBeforeIsNull: @2012-01-02 same day or before @2012-01
define SameOrBeforeIsNull: @2012-01-01 same day or before null</code></pre>
</div>
</div>
<div class="paragraph">
<p>This operator is also defined for intervals, see the <a href="#same-or-before-2">Same Or Before (Intervals)</a> operator for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="subtract-1"><a class="anchor" href="#subtract-1"></a>8.15. Subtract</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">-(left Date, right Quantity) Date
-(left DateTime, right Quantity) DateTime
-(left Time, right Quantity) Time</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>subtract</em> (<span class="sym">-</span>) operator returns the value of the given date/time, decremented by the time-valued quantity, respecting variable length periods for calendar years and months.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span> values, the quantity unit must be one of: <span class="kw">years</span>, <span class="kw">months</span>, <span class="kw">weeks</span>, or <span class="kw">days</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span> values, the quantity unit must be one of: <span class="kw">years</span>, <span class="kw">months</span>, <span class="kw">weeks</span>, <span class="kw">days</span>, <span class="kw">hours</span>, <span class="kw">minutes</span>, <span class="kw">seconds</span>, or <span class="kw">milliseconds</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span> values, the quantity unit must be one of: <span class="kw">hours</span>, <span class="kw">minutes</span>, <span class="kw">seconds</span>, or <span class="kw">milliseconds</span>.</p>
</div>
<div class="paragraph">
<p>Note that the quantity units may be specified in singular, plural or UCUM form.</p>
</div>
<div class="paragraph">
<p>The operation is performed by converting the time-based quantity to the most precise value specified in the date/time (truncating any resulting decimal portion) and then subtracting it from the date/time value. For example, the following subtraction:</p>
</div>
<div class="paragraph">
<p><span class="id">DateTime(2014)</span> <span class="sym">-</span> <span class="lit">24</span> <span class="id">months</span></p>
</div>
<div class="paragraph">
<p>This example results in the value <span class="id">DateTime(2012)</span> even though the date/time value is not specified to the level of precision of the time-valued quantity.</p>
</div>
<div class="paragraph">
<p>Note also that this means that if decimals appear in the time-valued quantities, the fractional component will be ignored.  For example, the following subtraction:</p>
</div>
<div class="paragraph">
<p><span class="id">DateTime(2014)</span> <span class="sym">-</span> <span class="lit">18</span> <span class="id">months</span></p>
</div>
<div class="paragraph">
<p>This example results in the value <span class="id">DateTime(2013)</span></p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="time-1"><a class="anchor" href="#time-1"></a>8.16. Time</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Time(hour Integer) Time
Time(hour Integer, minute Integer) Time
Time(hour Integer, minute Integer, second Integer) Time
Time(hour Integer, minute Integer, second Integer, millisecond Integer) Time
Time(hour Integer, minute Integer, second Integer, millisecond Integer,
timezoneOffset Decimal) Time</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Time</span> operator constructs a time value from the given components.</p>
</div>
<div class="paragraph">
<p>At least one component other than <span class="id">timezoneOffset</span> must be specified, and no component may be specified at a precision below an unspecified precision. For example, <span class="id">minute</span> may be <span class="kw">null</span>, but if it is, <span class="id">second</span>, and <span class="id">millisecond</span> must all be <span class="kw">null</span> as well.</p>
</div>
<div class="paragraph">
<p>If <span class="id">timezoneOffset</span> is not specified, it is defaulted to the timezone offset of the evaluation request.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Time</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define TimeValid: Time(12, 30, 0, 0, -7)
define TimeInvalid: Time(12, null, 0, 0, -7)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="timeofday"><a class="anchor" href="#timeofday"></a>8.17. TimeOfDay</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">TimeOfDay() Time</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">TimeOfDay</span> operator returns the time of day of the start timestamp associated with the evaluation request. See the <span class="id"><a href="#now">Now</a></span> operator for more information on the rationale for defining the <span class="id">TimeOfDay</span> operator in this way.</p>
</div>
</div>
<div class="sect2">
<h3 id="today"><a class="anchor" href="#today"></a>8.18. Today</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Today() Date</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Today</span> operator returns the date of the start timestamp associated with the evaluation request. See the <span class="id"><a href="#now">Now</a></span> operator for more information on the rationale for defining the <span class="id">Today</span> operator in this way.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="interval-operators-3"><a class="anchor" href="#interval-operators-3"></a>9. Interval Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="after-1"><a class="anchor" href="#after-1"></a>9.1. After</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">after _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
after _precision_ (left T, right Interval&lt;T&gt;) Boolean
after _precision_ (left Interval&lt;T&gt;, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">after</span> operator for intervals returns <span class="kw">true</span> if the first interval starts after the second one ends. In other words, if the starting point of the first interval is greater than the ending point of the second interval.</p>
</div>
<div class="paragraph">
<p>For the point-interval overload, the operator returns <span class="kw">true</span> if the given point is greater than the end of the interval.</p>
</div>
<div class="paragraph">
<p>For the interval-point overload, the operator returns <span class="kw">true</span> if the given interval starts after the given point.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">after</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define AfterIsTrue: 5 after Interval[1, 4]
define AfterIsFalse: Interval[1, 4] after 5
define AfterIsNull: Interval[1, 4] after null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="before-1"><a class="anchor" href="#before-1"></a>9.2. Before</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">before _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
before _precision_ (left T, right Interval&lt;T&gt;) Boolean
before _precision_ (left interval&lt;T&gt;, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">before</span> operator for intervals returns <span class="kw">true</span> if the first interval ends before the second one starts. In other words, if the ending point of the first interval is less than the starting point of the second interval.</p>
</div>
<div class="paragraph">
<p>For the point-interval overload, the operator returns <span class="kw">true</span> if the given point is less than the start of the interval.</p>
</div>
<div class="paragraph">
<p>For the interval-point overload, the operator returns <span class="kw">true</span> if the given interval ends before the given point.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">before</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define BeforeIsTrue: 0 before Interval[1, 4]
define BeforeIsFalse: Interval[1, 4] before 0
define BeforeIsNull: Interval[1, 4] before null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="collapse"><a class="anchor" href="#collapse"></a>9.3. Collapse</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">collapse(argument List&lt;Interval&lt;T&gt;&gt;) List&lt;Interval&lt;T&gt;&gt;
collapse(argument List&lt;Interval&lt;T&gt;&gt;, per Quantity) List&lt;Interval&lt;T&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">collapse</span> operator returns the unique set of intervals that completely covers the ranges present in the given list of intervals. In other words, adjacent intervals within a sorted list are merged if they either overlap or meet.</p>
</div>
<div class="paragraph">
<p>Note that because the semantics for overlaps and meets are themselves defined in terms of the interval successor and predecessor operators, sets of date/time-based intervals that are only defined to a particular precision will calculate meets and overlaps at that precision. For example, a list of DateTime-based intervals where the boundaries are all specified to the hour will collapse at the hour precision, unless the collapse precision is overridden with the per argument.</p>
</div>
<div class="paragraph">
<p>The per argument determines the precision at which the collapse will be performed, and must be a quantity value that is compatible with the point type of the input intervals. For numeric intervals, this means a default unit (<span class="lit">'1'</span>). For date/time intervals, this means a temporal duration.</p>
</div>
<div class="paragraph">
<p>If the list of intervals is empty, the result is empty. If the list of intervals contains a single interval, the result is a list with that interval. If the list of intervals contains nulls, they will be excluded from the resulting list.</p>
</div>
<div class="paragraph">
<p>If the list argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the per argument is null, the default unit interval for the point type of the intervals involved will be used (i.e. the interval that has a width equal to the result of the successor function for the point type).</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">collapse</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Collapse1To9: collapse { Interval[1, 4], Interval[4, 8], Interval[7, 9] } // { Interval[1, 9] }
define CollapseIsNull: collapse null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="contains"><a class="anchor" href="#contains"></a>9.4. Contains</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">contains _precision_ (argument Interval&lt;T&gt;, point T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">contains</span> operator for intervals returns <span class="kw">true</span> if the given point is greater than or equal to the starting point of the interval, and less than or equal to the ending point of the interval. For open interval boundaries, exclusive comparison operators are used. For closed interval boundaries, if the interval boundary is <span class="kw">null</span>, the result of the boundary comparison is considered <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">contains</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define ContainsIsTrue: Interval[1, 5] contains 4
define ContainsIsFalse: Interval[1, 5] contains 6
define ContainsIsNull: Interval[1, 5] contains null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="end"><a class="anchor" href="#end"></a>9.5. End</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">end of(argument Interval&lt;T&gt;) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">End</span> operator returns the ending point of an interval.</p>
</div>
<div class="paragraph">
<p>If the high boundary of the interval is open, this operator returns the <span class="kw">predecessor</span> of the high value of the interval. Note that if the high value of the interval is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the high boundary of the interval is closed and the high value of the interval is not null, this operator returns the high value of the interval. Otherwise, the result is the maximum value of the point type of the interval.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">End</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define EndOfInterval: end of Interval[1, 5] // 5
define EndIsNull: end of (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ends"><a class="anchor" href="#ends"></a>9.6. Ends</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">ends _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">ends</span> operator returns <span class="kw">true</span> if the first interval ends the second. More precisely, if the starting point of the first interval is greater than or equal to the starting point of the second, and the ending point of the first interval is equal to the ending point of the second.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="kw"><a href="#start">Start</a></span> and <span class="kw"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">ends</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define EndsIsTrue: Interval[0, 5] ends Interval[-1, 5]
define EndsIsFalse: Interval[-1, 7] ends Interval[0, 7]
define EndsIsNull: Interval[1, 5] ends null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="equal-1"><a class="anchor" href="#equal-1"></a>9.7. Equal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">=(left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>equal</em> (<span class="sym">=</span>) operator for intervals returns <span class="kw">true</span> if and only if the intervals are over the same point type, and they have the same value for the starting and ending points of the intervals as determined by the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>equal</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define EqualIsTrue: Interval[0, 5] = Interval[0, 5]
define EqualIsFalse: Interval[-1, 7] = Interval[0, 7]
define EqualIsNull: Interval[1, 5] = null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="equivalent-1"><a class="anchor" href="#equivalent-1"></a>9.8. Equivalent</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">~(left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>equivalent</em> (<span class="sym">~</span>) operator for intervals returns <span class="kw">true</span> if and only if the intervals are over the same point type, and the starting and ending points of the intervals as determined by the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators are equivalent.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>equivalent</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define EquivalentIsTrue: Interval[0, 5] ~ Interval[0, 5]
define EquivalentIsAlsoTrue: Interval[1, null] ~ Interval[1, null]
define EquivalentIsFalse: Interval[-1, 7] ~ Interval[0, 7]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="except"><a class="anchor" href="#except"></a>9.9. Except</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">except(left Interval&lt;T&gt;, right Interval&lt;T&gt;) Interval&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">except</span> operator for intervals returns the set difference of two intervals. More precisely, this operator returns the portion of the first interval that does not overlap with the second. Note that to avoid returning an improper interval, if the second argument is properly contained within the first and does not start or end it, this operator returns <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">except</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Except: Interval[0, 5] except Interval[3, 7] // Interval[0, 2]
define ExceptIsNull: null except Interval[-1, 7]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="expand"><a class="anchor" href="#expand"></a>9.10. Expand</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">expand(argument List&lt;Interval&lt;T&gt;&gt;, per Quantity) List&lt;Interval&lt;T&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">expand</span> operator returns the set of intervals of width per for all the intervals in the input.</p>
</div>
<div class="paragraph">
<p>The per argument must be a quantity value that is compatible with the point type of the input intervals. For numeric intervals, this means a default unit (<span class="lit">'1'</span>). For date/time intervals, this means a temporal duration.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">expand { Interval[@2018-01-01, @2018-01-04] } per day</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is the result of the example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">{ Interval[@2018-01-01, @2018-01-01], Interval[@2018-01-02, @2018-01-02], Interval[@2018-01-03, @2018-01-03], Interval[@2018-01-04, @2018-01-04] }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that if the values in the intervals are more precise than the per quantity, the more precise values will be truncated to the precision specified by the per quantity.</p>
</div>
<div class="paragraph">
<p>If the list of intervals is empty, the result is empty. If the list of intervals contains <span class="kw">nulls</span>, they will be excluded from the resulting list.</p>
</div>
<div class="paragraph">
<p>If the list argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the per argument is null, the default unit interval for the point type of the intervals involved will be used (i.e. the interval that has a width equal to the result of the successor function for the point type).</p>
</div>
</div>
<div class="sect2">
<h3 id="in"><a class="anchor" href="#in"></a>9.11. In</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">in _precision_ (point T, argument Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">in</span> operator for intervals returns <span class="kw">true</span> if the given point is greater than or equal to the starting point of the interval, and less than or equal to the ending point of the interval. For open interval boundaries, exclusive comparison operators are used. For closed interval boundaries, if the interval boundary is <span class="kw">null</span>, the result of the boundary comparison is considered true.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">in</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define InIsTrue: 3 in Interval[0, 5]
define InIsFalse: -1 in Interval[0, 7]
define InIsNull: 3 in (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="includes"><a class="anchor" href="#includes"></a>9.12. Includes</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">includes _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
includes _precision_ (left Interval&lt;T&gt;, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">includes</span> operator for intervals returns <span class="kw">true</span> if the first interval completely includes the second. More precisely, if the starting point of the first interval is less than or equal to the starting point of the second interval, and the ending point of the first interval is greater than or equal to the ending point of the second interval.</p>
</div>
<div class="paragraph">
<p>For the point overload, this operator is a synonym for the [.kw]#<a href="#contains">contains</a> operator.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">includes</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IncludesIsTrue: Interval[-1, 5] includes Interval[0, 5]
define IncludesIsFalse: Interval[-1, 5] includes 6
define IncludesIsNull: Interval[-1, 5] includes null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="included-in"><a class="anchor" href="#included-in"></a>9.13. Included In</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">included in _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
included in _precision_ (left T, right Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">included in</span> operator for intervals returns <span class="kw">true</span> if the first interval is completely included in the second. More precisely, if the starting point of the first interval is greater than or equal to the starting point of the second interval, and the ending point of the first interval is less than or equal to the ending point of the second interval.</p>
</div>
<div class="paragraph">
<p>For the point overload, this operator is a synonym for the <span class="kw"><a href="#in">in</a></span> operator.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that <span class="kw">during</span> is a synonym for included in and may be used to invoke the same operation wherever <span class="kw">included in</span> may appear.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">included in</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IncludedInIsTrue: Interval[1, 5] included in Interval[0, 5]
define IncludedInIsFalse: -1 during Interval[0, 7]
define IncludedInIsNull: 3 included in (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="intersect"><a class="anchor" href="#intersect"></a>9.14. Intersect</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">intersect(left Interval&lt;T&gt;, right Interval&lt;T&gt;) Interval&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">intersect</span> operator for intervals returns the intersection of two intervals. More precisely, the operator returns the interval that defines the overlapping portion of both arguments. If the arguments do not overlap, this operator returns <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">intersect</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Intersect: Interval[1, 5] intersect Interval[3, 7] // Interval[3, 5]
define IntersectIsNull: Interval[3, 5] intersect (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="meets"><a class="anchor" href="#meets"></a>9.15. Meets</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">meets _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
meets before _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
meets after _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">meets</span> operator returns <span class="kw">true</span> if the first interval ends immediately before the second interval starts, or if the first interval starts immediately after the second interval ends. In other words, if the ending point of the first interval is equal to the predecessor of the starting point of the second, or if the starting point of the first interval is equal to the successor of the ending point of the second.</p>
</div>
<div class="paragraph">
<p>The <span class="kw">meets before</span> operator returns <span class="kw">true</span> if the first interval ends immediately before the second interval starts, while the <span class="kw">meets after</span> operator returns <span class="kw">true</span> if the first interval starts immediately after the second interval ends.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that date/time-based intervals with partially specified boundaries will "meet" at the precision of the boundaries, not the finest precision for the point type. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define MeetsAtHours: Interval[@T03, @T04] meets Interval[@T05, @T06]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <span class="id">MeetsAtHours</span> expression returns true because the meets operation is performed at the hour precision.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">meets</span>, <span class="kw">meets before</span>, and <span class="kw">meets after</span> operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define MeetsIsTrue: Interval[6, 10] meets Interval[0, 5]
define MeetsBeforeIsTrue: Interval[-5, -1] meets before Interval[0, 5]
define MeetsAfterIsFalse: Interval[6, 10] meets after Interval[0, 7]
define MeetsIsNull: Interval[6, 10] meets (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="not-equal-1"><a class="anchor" href="#not-equal-1"></a>9.16. Not Equal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">!=(left Interval&lt;T&gt;, right Interval&lt;T&gt;) : Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>not equal</em> (<span class="sym">!=</span>) operator for intervals returns <span class="kw">true</span> if its arguments are not the same value.</p>
</div>
<div class="paragraph">
<p>The <em>not equal</em> operator is a shorthand for invocation of logical negation (<span class="kw">not</span>) of the <em>equal</em> operator.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>not equal</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define NotEqualIsFalse: Interval[0, 5] != Interval[0, 5]
define NotEqualIsTrue: Interval[-1, 7] != Interval[0, 7]
define NotEqualIsNull: Interval[1, 5] != null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="not-equivalent-1"><a class="anchor" href="#not-equivalent-1"></a>9.17. Not Equivalent</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">!~(left Interval&lt;T&gt;, right Interval&lt;T&gt;) : Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>not equivalent</em> (<span class="sym">!~</span>) operator for intervals returns <span class="kw">true</span> if its arguments are not equivalent.</p>
</div>
<div class="paragraph">
<p>The <em>not equivalent</em> operator is a shorthand for invocation of logical negation (<span class="kw">not</span>) of the <em>equivalent</em> operator.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>not equivalent</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define NotEquivalentIsFalse: Interval[0, 5] !~ Interval[0, 5]
define NotEquivalentIsAlsoFalse: Interval[1, null] !~ Interval[1, null]
define NotEquivalentIsTrue: Interval[-1, 7] !~ Interval[0, 7]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="on-or-after-2"><a class="anchor" href="#on-or-after-2"></a>9.18. On Or After</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">on or after _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
on or after _precision_ (left T, right Interval&lt;T&gt;) Boolean
on or after _precision_ (left Interval&lt;T&gt;, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">on or after</span> operator for intervals is a synonym for the <span class="kw">same or after</span> operator and is supported to enable natural phrasing. See the description of the <a href="#same-or-after-2">Same Or After (Intervals)</a> operator.</p>
</div>
<div class="paragraph">
<p>Note that this operator can be invoked using either the <span class="kw">on or after</span> or the <span class="kw">after or on</span> syntax.</p>
</div>
<div class="paragraph">
<p>In timing phrases, the keyword <span class="kw">same</span> is a synonym for <span class="kw">on</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="on-or-before-2"><a class="anchor" href="#on-or-before-2"></a>9.19. On Or Before</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">on or before _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
on or before _precision_ (left T, right Interval&lt;T&gt;) Boolean
on or before _precision_ (left Interval&lt;T&gt;, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">on or before</span> operator for date/time-based intervals is a synonym for the <span class="kw">same or before</span> operator and is supported to enable natural phrasing. See the description of the <a href="#same-or-before-2">Same Or Before (Intervals)</a> operator.</p>
</div>
<div class="paragraph">
<p>Note that this operator can be invoked using either the <span class="kw">on or before</span> or the <span class="kw">before or on</span> syntax.</p>
</div>
<div class="paragraph">
<p>In timing phrases, the keyword <span class="kw">same</span> is a synonym for <span class="kw">on</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="overlaps"><a class="anchor" href="#overlaps"></a>9.20. Overlaps</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">overlaps _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
overlaps before _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
overlaps after _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">overlaps</span> operator returns <span class="kw">true</span> if the first interval overlaps the second. More precisely, if the ending point of the first interval is greater than or equal to the starting point of the second interval, and the starting point of the first interval is less than or equal to the ending point of the second interval.</p>
</div>
<div class="paragraph">
<p>The operator <span class="kw">overlaps before</span> returns <span class="kw">true</span> if the first interval overlaps the second and starts before it, while the <span class="kw">overlaps after</span> operator returns <span class="kw">true</span> if the first interval overlaps the second and ends after it.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">overlaps</span>, <span class="kw">overlaps before</span>, and <span class="kw">overlaps after</span> operators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define OverlapsIsTrue: Interval[0, 4] overlaps Interval[1, 4]
define OverlapsBeforeIsTrue: Interval[0, 4] overlaps before Interval[1, 4]
define OverlapsAfterIsFalse: Interval[0, 4] overlaps after Interval[1, 4]
define OverlapsIsNull: Interval[6, 10] overlaps (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="point-from"><a class="anchor" href="#point-from"></a>9.21. Point From</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">point from(argument Interval&lt;T&gt;) : T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">point from</span> operator extracts the single point from a unit interval. If the argument is not a unit interval, a run-time error is thrown.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">point from</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define PointFrom: point from Interval[4, 4] // 4
define PointFromError: point from Interval[1, 4]
define PointFromIsNull: point from (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="properly-includes"><a class="anchor" href="#properly-includes"></a>9.22. Properly Includes</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">properly includes _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
properly includes _precision_ (left Interval&lt;T&gt;, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">properly includes</span> operator for intervals returns <span class="kw">true</span> if the first interval completely includes the second and the first interval is strictly larger than the second. More precisely, if the starting point of the first interval is less than or equal to the starting point of the second interval, and the ending point of the first interval is greater than or equal to the ending point of the second interval, and they are not the same interval.</p>
</div>
<div class="paragraph">
<p>For the point overload, this operator returns true if the interval contains (i.e. includes) the point, and the interval is not a unit interval containing only the point.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">properly includes</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define ProperlyIncludesIsTrue: Interval[-1, 5] properly includes Interval[0, 5]
define ProperlyIncludesIsFalse: Interval[-1, 5] properly includes Interval[-1, 5]
define ProperlyIncludesIsNull: Interval[-1, 5] properly includes null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="properly-included-in"><a class="anchor" href="#properly-included-in"></a>9.23. Properly Included In</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">properly included in _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
properly included in _precision_ (left T, right Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">properly included in</span> operator for intervals returns <span class="kw">true</span> if the first interval is completely included in the second and the first interval is strictly smaller than the second. More precisely, if the starting point of the first interval is greater than or equal to the starting point of the second interval, and the ending point of the first interval is less than or equal to the ending point of the second interval, and they are not the same interval.</p>
</div>
<div class="paragraph">
<p>For the point overload, this operator returns true if the point is in (i.e. included in) the interval, and the interval is not a unit interval containing only the point.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that <span class="kw">during</span> is a synonym for <span class="kw">included in</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">properly included in</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define ProperlyIncludedInIsTrue: Interval[1, 5] properly included in Interval[0, 5]
define ProperlyIncludedInIsFalse: Interval[0, 7] properly during Interval[0, 7]
define ProperlyIncludedInIsNull: Interval[1, 5] properly included in (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="same-as-2"><a class="anchor" href="#same-as-2"></a>9.24. Same As</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">same _precision_ as(left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">same</span><em>-precision-</em><span class="kw">as</span> operator for intervals returns true if the two intervals start and end at the same value, using the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries, and for date/time value, performing the comparisons at the specified precision, as described in the <span class="id"><a href="#same-as-1">Same As</a></span> operator for date/time values.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, comparisons are performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span>-based intervals, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, or <span class="kw">day</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span>-based intervals, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, <span class="kw">day</span>, <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span>-based intervals, <em>precision</em> must be one of: <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When this operator is called with a mixture of <span class="id">Date</span>- and <span class="id">DateTime</span>-based intervals, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> values as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>For comparisons involving date/time or time values with imprecision, note that the result of the comparison may be <span class="kw">null</span>, depending on whether the values involved are specified to the level of precision used for the comparison.</p>
</div>
<div class="paragraph">
<p>As with all date/time calculations, comparisons are performed respecting the timezone offset.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="same-or-after-2"><a class="anchor" href="#same-or-after-2"></a>9.25. Same Or After</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">same _precision_ or after(left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
same _precision_ or after(left T, right Interval&lt;T&gt;) Boolean
same _precision_ or after(left Interval&lt;T&gt;, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">same</span><em>-precision-</em><span class="kw">or after</span> operator for intervals returns true if the first interval starts on or after the second one ends, using the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries, and for date/time values, performing the comparisons at the specified precision, as described in the <span class="id"><a href="#same-or-after-1">Same or After (Date/Time)</a></span> operator for date/time values.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, comparisons are performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span>-based intervals, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, or <span class="kw">day</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span>-based intervals, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, <span class="kw">day</span>, <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span>-based intervals, <em>precision</em> must be one of: <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When this operator is called with a mixture of <span class="id">Date</span>-based and <span class="id">DateTime</span>-based intervals, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> values as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>When this operator is called with a mixture of point values and intervals, the point values are implicitly converted to an interval starting and ending on the given point value.</p>
</div>
<div class="paragraph">
<p>For comparisons involving date/time or time intervals with imprecision, note that the result of the comparison may be <span class="kw">null</span>, depending on whether the values involved are specified to the level of precision used for the comparison.</p>
</div>
<div class="paragraph">
<p>As with all date/time calculations, comparisons are performed respecting the timezone offset.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that in timing phrases, the keyword <span class="kw">on</span> may be used as a synonym for <span class="kw">same</span> for this operator.</p>
</div>
</div>
<div class="sect2">
<h3 id="same-or-before-2"><a class="anchor" href="#same-or-before-2"></a>9.26. Same Or Before</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">same _precision_ or before(left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean
same _precision_ or before(left T, right Interval&lt;T&gt;) Boolean
same _precision_ or before(left Interval&lt;T&gt;, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">same</span><em>-precision-</em><span class="kw">or before</span> operator returns true if the first interval ends on or before the second one starts, using the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries, and for date/time values, performing the comparisons at the specified precision, as described in the <span class="id"><a href="#same-or-before-1">Same or Before (Date/Time)</a></span> operator for date/time values.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, comparisons are performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span>-based intervals, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, or <span class="kw">day</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">DateTime</span>-based intervals, <em>precision</em> must be one of: <span class="kw">year</span>, <span class="kw">month</span>, <span class="kw">day</span>, <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Time</span>-based intervals, <em>precision</em> must be one of: <span class="kw">hour</span>, <span class="kw">minute</span>, <span class="kw">second</span>, or <span class="kw">millisecond</span>.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When this operator is called with a mixture of <span class="id">Date</span>- and <span class="id">DateTime</span>-based intervals, the <span class="id">Date</span> values will be implicitly converted to <span class="id">DateTime</span> values as defined by the <span class="id"><a href="#todatetime">ToDateTime</a></span> operator.</p>
</div>
<div class="paragraph">
<p>When this operator is called with a mixture of point values and intervals, the point values are implicitly converted to an interval starting and ending on the given point value.</p>
</div>
<div class="paragraph">
<p>For comparisons involving date/time or time values with imprecision, note that the result of the comparison may be <span class="kw">null</span>, depending on whether the values involved are specified to the level of precision used for the comparison.</p>
</div>
<div class="paragraph">
<p>As with all date/time calculations, comparisons are performed respecting the timezone offset.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are <span class="kw">null</span>, the result is null.</p>
</div>
<div class="paragraph">
<p>Note that in timing phrases, the keyword <span class="kw">on</span> may be used as a synonym for <span class="kw">same</span> for this operator.</p>
</div>
</div>
<div class="sect2">
<h3 id="start"><a class="anchor" href="#start"></a>9.27. Start</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">start of(argument Interval&lt;T&gt;) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Start</span> operator returns the starting point of an interval.</p>
</div>
<div class="paragraph">
<p>If the low boundary of the interval is open, this operator returns the <span class="kw">successor</span> of the low value of the interval. Note that if the low value of the interval is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the low boundary of the interval is closed and the low value of the interval is not null, this operator returns the low value of the interval. Otherwise, the result is the minimum value of the point type of the interval.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Start</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define StartOfInterval: start of Interval[1, 5] // 1
define StartIsNull: start of (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="starts"><a class="anchor" href="#starts"></a>9.28. Starts</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">starts _precision_ (left Interval&lt;T&gt;, right Interval&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">starts</span> operator returns <span class="kw">true</span> if the first interval starts the second. More precisely, if the starting point of the first is equal to the starting point of the second interval and the ending point of the first interval is less than or equal to the ending point of the second interval.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the <span class="id"><a href="#start">Start</a></span> and <span class="id"><a href="#end">End</a></span> operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a date/time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">starts</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define StartsIsTrue: Interval[0, 5] starts Interval[0, 7]
define StartsIsFalse: Interval[0, 7] starts Interval[0, 6]
define StartsIsNull: Interval[1, 5] starts null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="union"><a class="anchor" href="#union"></a>9.29. Union</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">union(left Interval&lt;T&gt;, right Interval&lt;T&gt;) Interval&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">union</span> operator for intervals returns the union of the intervals. More precisely, the operator returns the interval that starts at the earliest starting point in either argument, and ends at the latest starting point in either argument. If the arguments do not overlap or meet, this operator returns <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">union</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Union: Interval[1, 5] union Interval[3, 7] // Interval[1, 7]
define UnionIsNull: Interval[3, 5] union (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="width"><a class="anchor" href="#width"></a>9.30. Width</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">width of(argument Interval&lt;T&gt;) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">width</span> operator returns the width of an interval. The result of this operator is equivalent to invoking: (<span class="kw">start of</span> <span class="id">argument</span> <span class="sym">–</span> <span class="kw">end of</span> <span class="id">argument</span>) <span class="sym">+</span> <span class="id"><em>point-size</em></span>.</p>
</div>
<div class="paragraph">
<p>Note that because CQL defines <em>duration</em> and <em>difference</em> operations for date/time and time valued intervals, <em>width</em> is not defined for intervals of these types.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">width</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Width: width of Interval[3, 7] // 4
define WidthIsNull: width of (null as Interval&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="list-operators-2"><a class="anchor" href="#list-operators-2"></a>10. List Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Note that the operators in this section may all be invoked with singleton arguments if the <em>list promotion</em> feature is enabled. See the <a href="03-developersguide.html#promotion-and-demotion">Promotion and Demotion</a> section for more information.</p>
</div>
<div class="sect2">
<h3 id="contains-1"><a class="anchor" href="#contains-1"></a>10.1. Contains</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">contains(argument List&lt;T&gt;, element T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">contains</span> operator for lists returns <span class="kw">true</span> if the given element is in the list using equality semantics.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">contains</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define ContainsIsTrue: { 1, 3, 5, 7 } contains 5
define ContainsIsFalse: { 1, 3, 5, 7 } contains 4
define ContainsIsNull: null contains 4</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="distinct"><a class="anchor" href="#distinct"></a>10.2. Distinct</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">distinct(argument List&lt;T&gt;) List&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">distinct</span> operator returns the given list with duplicates eliminated using equality semantics.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">distinct</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Distinct: distinct { 1, 3, 3, 5, 5 } // { 1, 3, 5, 7 }
define DistinctIsNull: distinct null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="equal-2"><a class="anchor" href="#equal-2"></a>10.3. Equal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">=(left List&lt;T&gt;, right List&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>equal</em> (<span class="sym">=</span>) operator for lists returns <span class="kw">true</span> if and only if the lists have the same element type, and have the same elements by value, in the same order.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, or contains null elements, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>equal</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define EqualIsTrue: { 1, 3, 5, 7 } = { 1, 3, 5, 7 }
define EqualIsFalse: { 1, 3, 5, 7 } = { 1, 3, 5 }
define EqualIsNull: { 1, 3, 5, 7 } = null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="equivalent-2"><a class="anchor" href="#equivalent-2"></a>10.4. Equivalent</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">~(left List&lt;T&gt;, right List&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>equivalent</em> (<span class="sym">~</span>) operator for lists returns <span class="kw">true</span> if and only if the lists contain elements of the same type, have the same number of elements, and for each element in the lists, in order, the elements are equivalent.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>equivalent</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define EquivalentIsTrue: { 1, 3, 5, 7 } ~ { 1, 3, 5, 7 }
define EquivalentIsAlsoTrue: { 1, 3, 5, null } ~ { 1, 3, 5, null }
define EquivalentIsFalse: { 1, 3, 5, 7 } ~ { 1, 3, 5 }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="except-1"><a class="anchor" href="#except-1"></a>10.5. Except</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">except(left List&lt;T&gt;, right List&lt;T&gt;) List&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">except</span> operator returns the set difference of two lists. More precisely, the operator returns a list with the elements that appear in the first operand that do not appear in the second operand.</p>
</div>
<div class="paragraph">
<p>This operator uses equality semantics to determine whether two elements are the same for the purposes of computing the difference.</p>
</div>
<div class="paragraph">
<p>The operator is defined with set semantics, meaning that each element will appear in the result at most once, and that there is no expectation that the order of the inputs will be preserved in the results.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">except</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Except: { 1, 3, 5, 7 } except { 1, 3 } // { 5, 7 }
define ExceptLeft: { 1, 3, 5, 7 } except null // { 1, 3, 5, 7 }
define ExceptIsNull: null except { 1, 3, 5 }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exists"><a class="anchor" href="#exists"></a>10.6. Exists</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">exists(argument List&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">exists</span> operator returns <span class="kw">true</span> if the list contains any non-null elements.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">exists</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define ExistsIsTrue: exists { 1, 3, 5, 7 }
define ExistsIsFalse: exists { }
define ExistsIsAlsoFalse: exists { null }
define ExistsIsAlsoAlsoFalse: exists null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="flatten"><a class="anchor" href="#flatten"></a>10.7. Flatten</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">flatten(argument List&lt;List&lt;T&gt;&gt;) List&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">flatten</span> operator flattens a list of lists into a single list.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">flatten</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Flatten: flatten { { 1, 2 }, { 3, 4, 5 } } // { 1, 2, 3, 4, 5 }
define FlattenIsNull: flatten null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="first"><a class="anchor" href="#first"></a>10.8. First</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">First(argument List&lt;T&gt;) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">First</span> operator returns the first element in a list. The operator is equivalent to invoking the indexer with an index of 0.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">First</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define First1: First({ 1, 2, 5 }) // 1
define FirstIsNull: First(null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="in-1"><a class="anchor" href="#in-1"></a>10.9. In</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">in(element T, argument List&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">in</span> operator for lists returns <span class="kw">true</span> if the given element is in the given list using equality semantics.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">in</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define InIsTrue: 5 in { 1, 3, 5, 7 }
define InIsFalse: 5 in { 1, 3 }
define InIsNull: 5 in null
define IsIsAlsoNull: null in { 1, 3, 5, null }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="includes-1"><a class="anchor" href="#includes-1"></a>10.10. Includes</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">includes(left List&lt;T&gt;, right List&lt;T&gt;) Boolean
includes(left List&lt;T&gt;, right T) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">includes</span> operator for lists returns <span class="kw">true</span> if the first list contains every element of the second list using equality semantics.</p>
</div>
<div class="paragraph">
<p>For the singleton overload, this operator returns <span class="kw">true</span> if the list includes (i.e. contains) the singleton.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that the order of elements does not matter for the purposes of determining inclusion.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">includes</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IncludesIsTrue: { 1, 3, 5, 7 } includes 5
define IncludesIsNull: { 1, 3, 5, null } includes null
define IncludesIsFalse: { 1, 3 } includes { 1, 3, 5 }
define IncludesIsAlsoNull: null includes { 1, 3, 5 }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="included-in-1"><a class="anchor" href="#included-in-1"></a>10.11. Included In</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">included in(left List&lt;T&gt;, right list&lt;T&gt;) Boolean
included in(left T, right list&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">included in</span> operator for lists returns <span class="kw">true</span> if every element of the first list is in the second list using equality semantics.</p>
</div>
<div class="paragraph">
<p>For the singleton overload, this operator returns <span class="kw">true</span> if the singleton is included in (i.e. in) the list.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that the order of elements does not matter for the purposes of determining inclusion.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">included in</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IncludedInIsTrue: 5 included in { 1, 3, 5, 7 }
define IncludedInIsNull: null included in { 1, 3, 5 }
define IncludedInIsFalse: { 1, 3, 5 } included in { 1, 3 }
define IncludedInIsAlsoNull: { 1, 3, 5, null } included in null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indexer-1"><a class="anchor" href="#indexer-1"></a>10.12. Indexer</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">[](argument List&lt;T&gt;, index Integer) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>indexer</em> (<span class="sym">[]</span>) operator returns the element at the <span class="id">index</span><sup>th</sup> position in a list.</p>
</div>
<div class="paragraph">
<p>Indexes in lists are defined to be 0-based.</p>
</div>
<div class="paragraph">
<p>If the <span class="id">index</span> is less than 0, or greater than the number of elements in the list, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>indexer</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Indexer: { 1, 3, 5, 7 }[1] // 3
define IndexerIsNull: { 1, 3, 5 }[-1]
define IndexerIsAlsoNull: (null as List&lt;Integer&gt;)[0]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indexof"><a class="anchor" href="#indexof"></a>10.13. IndexOf</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">IndexOf(argument List&lt;T&gt;, element T) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">IndexOf</span> operator returns the 0-based index of the given element in the given source list using equality semantics.</p>
</div>
<div class="paragraph">
<p>If the list is empty, or no element is found, the result is -1.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">IndexOf</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IndexOfFound: IndexOf({ 1, 3, 5, 7 }, 5) // 2
define IndexOfNotFound: IndexOf({ 1, 3, 5, 7 }, 4) // -1
define IndexOfIsNull: IndexOf(null, 4)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="intersect-1"><a class="anchor" href="#intersect-1"></a>10.14. Intersect</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">intersect(left List&lt;T&gt;, right List&lt;T&gt;) List&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">intersect</span> operator for lists returns the intersection of two lists. More precisely, the operator returns a list containing only the elements that appear in both lists.</p>
</div>
<div class="paragraph">
<p>This operator uses equality semantics to determine whether or not two elements are the same.</p>
</div>
<div class="paragraph">
<p>The operator is defined with set semantics, meaning that each element will appear in the result at most once, and that there is no expectation that the order of the inputs will be preserved in the results.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">intersect</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Intersect: { 1, 3, 5 } intersect { 3, 5, 7 } // { 3, 5 }
define IntersectIsNull: { 1, 3, 5 } intersect null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="last"><a class="anchor" href="#last"></a>10.15. Last</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Last(argument List&lt;T&gt;) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Last</span> operator returns the last element in a list. In a list of length N, the operator is equivalent to invoking the indexer with an index of N <span class="sym">-</span> 1.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Last</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Last5: Last({ 1, 3, 5 }) // 5
define LastIsNull: Last(null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="length-1"><a class="anchor" href="#length-1"></a>10.16. Length</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Length(argument List&lt;T&gt;) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Length</span> operator returns the number of elements in a list.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">0</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Length</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Length3: Length({ 1, 3, 5 }) // 3
define Length0: Length(null as List&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="not-equal-2"><a class="anchor" href="#not-equal-2"></a>10.17. Not Equal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">!=(left List&lt;T&gt;, right List&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>not equal</em> (<span class="sym">!=</span>) operator for lists returns <span class="kw">true</span> if its arguments are not the same value.</p>
</div>
<div class="paragraph">
<p>The <em>not equal</em> operator is a shorthand for invocation of logical negation (<span class="kw">not</span>) of the <em>equal</em> operator.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>not equal</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define NotEqualIsFalse: { 1, 3, 5, 7 } != { 1, 3, 5, 7 }
define NotEqualIsTrue: { 1, 3, 5, 7 } != { 1, 3, 5 }
define NotEqualIsNull: { 1, 3, 5, 7 } != null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="not-equivalent-2"><a class="anchor" href="#not-equivalent-2"></a>10.18. Not Equivalent</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">!~(left List&lt;T&gt;, right List&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>not equivalent</em> (<span class="sym">!~</span>) operator for lists returns <span class="kw">true</span> if its arguments are not equivalent.</p>
</div>
<div class="paragraph">
<p>The <em>not equivalent</em> operator is a shorthand for invocation of logical negation (<span class="kw">not</span>) of the <em>equivalent</em> operator.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>not equivalent</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define NotEquivalentIsFalse: { 1, 3, 5, 7 } !~ { 1, 3, 5, 7 }
define NotEquivalentIsAlsoFalse: { 1, 3, 5, null } !~ { 1, 3, 5, null }
define NotEquivalentIsTrue: { 1, 3, 5, 7 } !~ { 1, 3, 5 }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="properly-includes-1"><a class="anchor" href="#properly-includes-1"></a>10.19. Properly Includes</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">properly includes(left List&lt;T&gt;, right List&lt;T&gt;) Boolean
properly includes(left T, right List&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">properly includes</span> operator for lists returns <span class="kw">true</span> if the first list contains every element of the second list, and the first list is strictly larger than the second list.</p>
</div>
<div class="paragraph">
<p>For the element overload, this operator returns true if the list contains (i.e. includes) the element, and it is not the only element in the list.</p>
</div>
<div class="paragraph">
<p>This operator uses equality semantics to determine whether or not two elements are the same.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that the order of elements does not matter for the purposes of determining inclusion.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">properly includes</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define ProperlyIncludesIsTrue: { 1, 3, 5, 7 } properly includes { 1, 3, 5 }
define ProperlyIncludesIsAlsoTrue: { 1, 3, 5, null } properly includes null
define ProperlyIncludesIsFalse: { 1, 3, 5 } properly includes { 1, 3, 5 }
define ProperlyIncludesIsAlsoFalse: null properly includes { 1, 3, 5 }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="properly-included-in-1"><a class="anchor" href="#properly-included-in-1"></a>10.20. Properly Included In</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">properly included in(left List&lt;T&gt;, right list&lt;T&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">properly included in</span> operator for lists returns <span class="kw">true</span> if every element of the first list is in the second list and the first list is strictly smaller than the second list.</p>
</div>
<div class="paragraph">
<p>For the element overload, this operator returns true if the element is in (i.e. included in) the list and it is not the only element in the list.</p>
</div>
<div class="paragraph">
<p>This operator uses equality semantics to determine whether or not two elements are the same.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that the order of elements does not matter for the purposes of determining inclusion.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">properly included in</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define ProperlyIncludedInIsTrue: { 1, 3, 5 } properly included in { 1, 3, 5, 7 }
define ProperlyIncludedInIsAlsoTrue: null properly included in { 1, 3, 5 }
define ProperlyIncludedInIsFalse: { 1, 3, 5 } properly included in { 1, 3, 5 }
define ProperlyIncludedInIsAlsoFalse: { 1, 3, 5, null } properly included in null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="singleton-from"><a class="anchor" href="#singleton-from"></a>10.21. Singleton From</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">singleton from(argument List&lt;T&gt;) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">singleton from</span> operator extracts a single element from the source list. If the source list is empty, the result is <span class="kw">null</span>. If the source list contains one element, that element is returned. If the list contains more than one element, a run-time error is thrown.</p>
</div>
<div class="paragraph">
<p>If the source list is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">singleton from</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define SingletonFrom: singleton from { 1 } // 1
define SingletonFromError: singleton from { 1, 3, 5 }
define SingletonFromIsNull: singleton from (null as List&lt;Integer&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="skip"><a class="anchor" href="#skip"></a>10.22. Skip</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Skip(argument List&lt;T&gt;, number Integer) List&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Skip</span> operator returns the elements in the list, skipping the first <span class="id">number</span> elements. If the list has less <span class="id">number</span> elements, the result is empty.</p>
</div>
<div class="paragraph">
<p>If the source list is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the number of elements is <span class="kw">null</span>, the result is the entire list, no elements are skipped.</p>
</div>
<div class="paragraph">
<p>If the number of elements is less than zero, the result is an empty list.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Skip</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Skip2: Skip({ 1, 2, 3, 4, 5 }, 2) // { 3, 4, 5 }
define SkipNull: Skip({ 1, 3, 5 }, null) // { 1, 3, 5 }
define SkipEmpty: Skip({ 1, 3, 5 }, -1) // { }
define SkipIsNull: Skip(null, 2)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tail"><a class="anchor" href="#tail"></a>10.23. Tail</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Tail(argument List&lt;T&gt;) List&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Tail</span> operator returns all but the first element from the given list. If the list is empty, the result is empty.</p>
</div>
<div class="paragraph">
<p>If the source list is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Tail</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Tail234: Tail({ 1, 2, 3, 4 }) // { 2, 3, 4 }
define TailEmpty: Tail({ }) // { }
define TailIsNull: Tail(null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="take"><a class="anchor" href="#take"></a>10.24. Take</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Take(argument List&lt;T&gt;, number Integer) List&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Take</span> operator returns the first <span class="id">number</span> elements from the given list. If the list has less than <span class="id">number</span> elements, the result only contains the elements in the list.</p>
</div>
<div class="paragraph">
<p>If the source list is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If number is <span class="kw">null</span>, or <span class="lit">0</span> or less, the result is an empty list.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Take</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Take2: Take({ 1, 2, 3, 4 }, 2) // { 1, 2 }
define TakeTooMany: Take({ 1, 2 }, 3) // { 1, 2 }
define TakeEmpty: Take({ 1, 2, 3, 4 }, null) // { }
define TakeIsNull: Take(null, 2)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="union-1"><a class="anchor" href="#union-1"></a>10.25. Union</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">union(left List&lt;T&gt;, right List&lt;T&gt;) List&lt;T&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">union</span> operator for lists returns a list with all elements from both arguments. Note that duplicates are eliminated during this process; if an element appears in both sources, that element will only appear once in the resulting list. In addition, there is no expectation that the order of elements in the inputs will be preserved in the results.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that the union operator can also be invoked with the symbolic operator (<span class="sym">|</span>).</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">union</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Union: { 1, 2, 3 } union { 4, 5 } // { 1, 2, 3, 4, 5 }
define UnionAlternateSyntax: { 1, 2, 3 } | { 4, 5 } // { 1, 2, 3, 4, 5 }
define UnionIsNull: null union { 4, 5 }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="aggregate-functions"><a class="anchor" href="#aggregate-functions"></a>11. Aggregate Functions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="alltrue"><a class="anchor" href="#alltrue"></a>11.1. AllTrue</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">AllTrue(argument List&lt;Boolean&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">AllTrue</span> operator returns <span class="kw">true</span> if all the non-null elements in the source are <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">true</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">AllTrue</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define AllTrueIsTrue: AllTrue({ true, null, true })
define AllTrueIsAlsoTrue: AllTrue({ null, null, null })
define AllTrueIsTrueWhenNull: AllTrue(null)
define AllTrueIsFalse: AllTrue({ true, false, null })</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="anytrue"><a class="anchor" href="#anytrue"></a>11.2. AnyTrue</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">AnyTrue(argument List&lt;Boolean&gt;) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">AnyTrue</span> operator returns <span class="kw">true</span> if any non-null element in the source is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">false</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">AnyTrue</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define AnyTrueIsTrue: AnyTrue({ true, false, null })
define AnyTrueIsFalse: AnyTrue({ false, false, null })
define AnyTrueIsAlsoFalse: AnyTrue({ null, null, null })
define AnyTrueIsFalseWhenNull: AnyTrue(null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="avg"><a class="anchor" href="#avg"></a>11.3. Avg</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Avg(argument List&lt;Decimal&gt;) Decimal
Avg(argument List&lt;Quantity&gt;) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Avg</span> operator returns the average of the non-null elements in the source.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Avg</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalAvg: Avg({ 5.5, 4.7, 4.8 }) // 5.0
define QuantityAvg: Avg({ 5.5 'cm', 4.7 'cm', 4.8 'cm' }) // 5.0 'cm'
define AvgIsNull: Avg(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="count"><a class="anchor" href="#count"></a>11.4. Count</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Count(argument List&lt;T&gt;) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Count</span> operator returns the number of non-null elements in the source. If the list contains no non-null elements, the result is 0. If the list is <span class="kw">null</span>, the result is <span class="lit">0</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Count</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Count5: Count({ 1, 2, 3, 4, 5 }) // 5
define Count0: Count({ null, null, null }) // 0
define CountNull0: Count(null as List&lt;Decimal&gt;) // 0</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="geometricmean"><a class="anchor" href="#geometricmean"></a>11.5. GeometricMean</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">GeometricMean(argument List&lt;Decimal&gt;) Decimal</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">GeometricMean</span> operator returns the geometric mean of the non-null elements in the source. Geometric mean is defined as the N<sup>th</sup> root of the geometric product of the elements. In other words:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">GeometricMean(X) = Power(Product(X), 1 / Count(X))</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">GeometricMean</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define GeometricMean4: GeometricMean({ 2.0, 8.0 }) // 4.0
define GeometricMeanIsNull: GeometricMean({ null, null, null })
define GeometricMeanIsAlsoNull: GeometricMean(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="max"><a class="anchor" href="#max"></a>11.6. Max</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Max(argument List&lt;Integer&gt;) Integer
Max(argument List&lt;Decimal&gt;) Decimal
Max(argument List&lt;Quantity&gt;) Quantity
Max(argument List&lt;Date&gt;) Date
Max(argument List&lt;DateTime&gt;) DateTime
Max(argument List&lt;Time&gt;) Time
Max(argument List&lt;String&gt;) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Max</span> operator returns the maximum element in the source. Comparison semantics are defined by the <a href="#comparison-operators-4">Comparison Operators</a> for the type of value being aggregated.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Max</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerMax: Max({ 2, 4, 8, 6 }) // 8
define DateMax: Max({ @2012-12-31, @2013-01-01, @2012-01-01 }) // @2012-12-31
define MaxIsNull: Max({ null as Quantity, null as Quantity, null as Quantity })
define MaxIsAlsoNull: Max(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="min"><a class="anchor" href="#min"></a>11.7. Min</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Min(argument List&lt;Integer&gt;) Integer
Min(argument List&lt;Decimal&gt;) Decimal
Min(argument List&lt;Quantity&gt;) Quantity
Min(argument List&lt;Date&gt;) Date
Min(argument List&lt;DateTime&gt;) DateTime
Min(argument List&lt;Time&gt;) Time
Min(argument List&lt;String&gt;) String</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Min</span> operator returns the minimum element in the source. Comparison semantics are defined by the <a href="#comparison-operators-4">Comparison Operators</a> for the type of value being aggregated.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Min</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define IntegerMin: Min({ 2, 4, 8, 6 }) // 2
define DateMin: Min({ @2012-12-31, @2013-01-01, @2012-01-01 }) // @2012-01-01
define MinIsNull: Min({ null as Quantity, null as Quantity, null as Quantity })
define MinIsAlsoNull: Min(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="median"><a class="anchor" href="#median"></a>11.8. Median</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Median(argument List&lt;Decimal&gt;) Decimal
Median(argument List&lt;Quantity&gt;) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Median</span> operator returns the median of the elements in source.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Median</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalMedian: Median({ 2.0, 4.0, 8.0, 6.0 }) // 5.0
define QuantityMedian: Median({ 1.0 'mg', 2.0 'mg', 3.0 'mg' }) // 2.0 'mg'
define MedianIsNull: Median({ null as Quantity, null as Quantity, null as Quantity })
define MedianIsAlsoNull: Median(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mode"><a class="anchor" href="#mode"></a>11.9. Mode</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Mode(argument List&lt;T&gt;) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Mode</span> operator returns the statistical mode of the elements in source.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Mode</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalMode: Mode({ 2.0, 2.0, 8.0, 6.0, 8.0, 8.0 }) // 8.0
define QuantityMode: Mode({ 1.0 'mg', 2.0 'mg', 3.0 'mg', 2.0 'mg' }) // 2.0 'mg'
define ModeIsNull: Mode({ null as Quantity, null as Quantity, null as Quantity })
define ModeIsAlsoNull: Mode(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="population-stddev"><a class="anchor" href="#population-stddev"></a>11.10. Population StdDev</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">PopulationStdDev(argument List&lt;Decimal&gt;) Decimal
PopulationStdDev(argument List&lt;Quantity&gt;) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">PopulationStdDev</span> operator returns the statistical standard deviation of the elements in source.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">PopulationStdDev</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalPopulationStdDev: PopulationStdDev({ 1.0, 2.0, 3.0, 4.0, 5.0 }) // 1.41421356
define QuantityPopulationStdDev: PopulationStdDev({ 1.0 'mg', 2.0 'mg', 3.0 'mg', 4.0 'mg', 5.0 'mg' }) // 1.41421356 'mg'
define PopulationStdDevIsNull: PopulationStdDev({ null as Quantity, null as Quantity, null as Quantity })
define PopulationStdDevIsAlsoNull: PopulationStdDev(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="population-variance"><a class="anchor" href="#population-variance"></a>11.11. Population Variance</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">PopulationVariance(argument List&lt;Decimal&gt;) Decimal
PopulationVariance(argument List&lt;Quantity&gt;) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">PopulationVariance</span> operator returns the statistical population variance of the elements in source.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">PopulationVariance</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalPopulationVariance: PopulationVariance({ 1.0, 2.0, 3.0, 4.0, 5.0 }) // 2.0
define QuantityPopulationVariance: PopulationVariance({ 1.0 'mg', 2.0 'mg', 3.0 'mg', 4.0 'mg', 5.0 'mg' }) // 2.0 'mg'
define PopulationVarianceIsNull: PopulationVariance({ null as Quantity, null as Quantity, null as Quantity })
define PopulationVarianceIsAlsoNull: PopulationVariance(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="product"><a class="anchor" href="#product"></a>11.12. Product</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Product(argument List&lt;Integer&gt;) Integer
Product(argument List&lt;Decimal&gt;) Decimal
Product(argument List&lt;Quantity&gt;) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Product</span> operator returns the geometric product of the elements in source.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Product</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalProduct: Product({ 1.0, 2.0, 3.0, 4.0 }) // 24.0
define QuantityProduct: Product({ 1.0 'mg', 2.0 'mg', 3.0 'mg', 4.0 'mg' }) // 24.0 'mg'
define ProductIsNull: Product({ null as Quantity, null as Quantity, null as Quantity })
define ProductIsAlsoNull: Product(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="stddev"><a class="anchor" href="#stddev"></a>11.13. StdDev</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">StdDev(argument List&lt;Decimal&gt;) Decimal
StdDev(argument List&lt;Quantity&gt;) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">StdDev</span> operator returns the statistical standard deviation of the elements in source.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the list is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">StdDev</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalStdDev: StdDev({ 1.0, 2.0, 3.0, 4.0, 5.0 }) // 1.58113883
define QuantityStdDev: StdDev({ 1.0 'mg', 2.0 'mg', 3.0 'mg', 4.0 'mg', 5.0 'mg' }) // 1.58113883 'mg'
define StdDevIsNull: StdDev({ null as Quantity, null as Quantity, null as Quantity })
define StdDevIsAlsoNull: StdDev(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sum"><a class="anchor" href="#sum"></a>11.14. Sum</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Sum(argument List&lt;Integer&gt;) Integer
Sum(argument List&lt;Decimal&gt;) Decimal
Sum(argument List&lt;Quantity&gt;) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Sum</span> operator returns the sum of non-null elements in the source.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the list is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Sum</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalSum: Sum({ 1.0, 2.0, 3.0, 4.0, 5.0 }) // 15.0
define QuantitySum: Sum({ 1.0 'mg', 2.0 'mg', 3.0 'mg', 4.0 'mg', 5.0 'mg' }) // 15.0 'mg'
define SumIsNull: Sum({ null as Quantity, null as Quantity, null as Quantity })
define SumIsAlsoNull: Sum(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="variance"><a class="anchor" href="#variance"></a>11.15. Variance</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Variance(argument List&lt;Decimal&gt;) Decimal
Variance(argument List&lt;Quantity&gt;) Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Variance</span> operator returns the statistical variance of the elements in source.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, <span class="kw">null</span> is returned.</p>
</div>
<div class="paragraph">
<p>If the source is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Variance</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define DecimalVariance: Variance({ 1.0, 2.0, 3.0, 4.0, 5.0 }) // 2.5
define QuantityVariance: Variance({ 1.0 'mg', 2.0 'mg', 3.0 'mg', 4.0 'mg', 5.0 'mg' }) // 2.5 'mg'
define VarianceIsNull: Variance({ null as Quantity, null as Quantity, null as Quantity })
define VarianceIsAlsoNull: Variance(null as List&lt;Decimal&gt;)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clinical-operators-3"><a class="anchor" href="#clinical-operators-3"></a>12. Clinical Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="age"><a class="anchor" href="#age"></a>12.1. Age</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">AgeInYears() Integer
AgeInMonths() Integer
AgeInWeeks() Integer
AgeInDays() Integer
AgeInHours() Integer
AgeInMinutes() Integer
AgeInSeconds() Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Age</span> operators calculate the age of the patient as of the current date/time in the precision named in the operator.</p>
</div>
<div class="paragraph">
<p>If the patient’s birthdate is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The <span class="id">Age</span> operators are defined in terms of a date/time duration calculation. This means that if the age of the patient is not specified to the level of precision corresponding to the operator being invoked, the result will be an <em>uncertainty</em> over the range of possible values, potentially causing some comparisons to return <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>Note that for <span class="id">AgeInYears</span> and <span class="id">AgeInMonths</span>, the <span class="id">birthDate</span> is specified as a <span class="id">Date</span> and <span class="id">Today()</span> is used to obtain the current date; whereas with the other precisions, <span class="id">birthDate</span> is specified as a <span class="id">DateTime</span>, and <span class="id">Now()</span> is used to obtain the current date/time.</p>
</div>
</div>
<div class="sect2">
<h3 id="ageat"><a class="anchor" href="#ageat"></a>12.2. AgeAt</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">AgeInYearsAt(asOf Date) Integer
AgeInYearsAt(asOf DateTime) Integer
AgeInMonthsAt(asOf Date) Integer
AgeInMonthsAt(asOf DateTime) Integer
AgeInWeeksAt(asOf Date) Integer
AgeInWeeksAt(asOf DateTime) Integer
AgeInDaysAt(asOf Date) Integer
AgeInDaysAt(asOf DateTime) Integer
AgeInHoursAt(asOf DateTime) Integer
AgeInMinutesAt(asOf DateTime) Integer
AgeInSecondsAt(asOf DateTime) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">AgeAt</span> operators calculate the age of the patient as of the given date/time in the precision named in the operator.</p>
</div>
<div class="paragraph">
<p>If the patient’s birthdate is <span class="kw">null</span>, or the <span class="id">asOf</span> argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The <span class="id">AgeAt</span> operators are defined in terms of a date/time duration calculation. This means that if the age of the patient or the given <span class="id">asOf</span> value are not specified to the level of precision corresponding to the operator being invoked, the will be an <em>uncertainty</em> over the range of possible values, potentially causing some comparisons to return <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="calculateage"><a class="anchor" href="#calculateage"></a>12.3. CalculateAge</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">CalculateAgeInYears(birthDate Date) Integer
CalculateAgeInYears(birthDate DateTime) Integer
CalculateAgeInMonths(birthDate Date) Integer
CalculateAgeInMonths(birthDate DateTime) Integer
CalculateAgeInWeeks(birthDate Date) Integer
CalculateAgeInWeeks(birthDate DateTime) Integer
CalculateAgeInDays(birthDate Date) Integer
CalculateAgeInDays(birthDate DateTime) Integer
CalculateAgeInHours(birthDate DateTime) Integer
CalculateAgeInMinutes(birthDate DateTime) Integer
CalculateAgeInSeconds(birthDate DateTime) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">CalculateAge</span> operators calculate the age of a person born on the given birth date/time as of today/now in the precision named in the operator.</p>
</div>
<div class="paragraph">
<p>If the birthdate is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The <span class="id">CalculateAge</span> operators are defined in terms of a date/time duration calculation. This means that if the given <span class="id">birthDate</span> is not specified to the level of precision corresponding to the operator being invoked, the result will be an <em>uncertainty</em> over the range of possible values, potentially causing some comparisons to return <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="calculateageat"><a class="anchor" href="#calculateageat"></a>12.4. CalculateAgeAt</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">CalculateAgeInYearsAt(birthDate Date, asOf Date) Integer
CalculateAgeInYearsAt(birthDate DateTime, asOf DateTime) Integer
CalculateAgeInMonthsAt(birthDate Date, asOf Date) Integer
CalculateAgeInMonthsAt(birthDate DateTime, asOf DateTime) Integer
CalculateAgeInWeeksAt(birthDate Date, asOf Date) Integer
CalculateAgeInWeeksAt(birthDate DateTime, asOf DateTime) Integer
CalculateAgeInDaysAt(birthDate Date, asOf Date) Integer
CalculateAgeInDaysAt(birthDate DateTime, asOf DateTime) Integer
CalculateAgeInHoursAt(birthDate DateTime, asOf DateTime) Integer
CalculateAgeInMinutesAt(birthDate DateTime, asOf DateTime) Integer
CalculateAgeInSecondsAt(birthDate DateTime, asOf DateTime) Integer</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">CalculateAgeAt</span> operators calculate the age of a person born on the given birth date/time as of the given date/time in the precision named in the operator.</p>
</div>
<div class="paragraph">
<p>If the <span class="id">birthDate</span> is <span class="kw">null</span> or the <span class="id">asOf</span> argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The <span class="id">CalculateAgeAt</span> operators are defined in terms of a date/time duration calculation. This means that if the given <span class="id">birthDate</span> or <span class="id">asOf</span> are not specified to the level of precision corresponding to the operator being invoked, the result will be an <em>uncertainty</em> over the range of possible values, potentially causing some comparisons to return <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">CalculateAgeAt</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define CalculateAgeAt: CalculateAgeInYearsAt(@2000-01-01, @2015-01-01) // 15
define CalculateAgeAtIsNull: CalculateAgeInYearsAt(@2000-01-01, null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="equal-3"><a class="anchor" href="#equal-3"></a>12.5. Equal</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">=(left Code, right Code) Boolean
=(left Concept, right Concept) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>equal</em> (<span class="sym">=</span>) operator for Codes and Concepts uses tuple equality semantics. This means that the operator will return <span class="kw">true</span> if and only if the values for each element by name are equal.</p>
</div>
<div class="paragraph">
<p>If either argument is <span class="kw">null</span>, or contains any <span class="kw">null</span> components, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>equal</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Code1: Code { system: 'http://loinc.org', code: '8480-6', version: '1.0', display: 'Systolic blood pressure' }
define Concept1: Concept { codes: { Code1 }, display: 'Concepts' }
define Concept2: Concept { codes: { Code1 }, display: 'More Concepts' }
define EqualIsTrue: Code1 = Code1
define EqualIsFalse: Concept1 = Concept2
define EqualIsNull: Code1 = null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="equivalent-3"><a class="anchor" href="#equivalent-3"></a>12.6. Equivalent</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">~(left Code, right Code) Boolean
~(left Concept, right Concept) Boolean
~(left Code, right Concept) Boolean
~(left Concept, right Code) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <em>equivalent</em> (<span class="sym">~</span>) operator for <span class="id">Code</span> values returns <span class="kw">true</span> if the <span class="id">code</span> and <span class="id">system</span> elements are equivalent. The <span class="id">version</span> and <span class="id">display</span> elements are ignored for the purposes of determining <span class="id">Code</span> equivalence.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Concept</span> values, equivalence is defined as a non-empty intersection of the codes in each <span class="id">Concept</span>. The <span class="id">display</span> element is ignored for the purposes of determining <span class="id">Concept</span> equivalence.</p>
</div>
<div class="paragraph">
<p>Note that this operator will always return <span class="kw">true</span> or <span class="kw">false</span>, even if either or both of its arguments are <span class="kw">null</span>, or contain <span class="kw">null</span> components.</p>
</div>
<div class="paragraph">
<p>Note carefully that this notion of <em>equivalence</em> is <em>not</em> the same as the notion of equivalence used in terminology: “these codes represent the same concept.” CQL specifically avoids defining terminological equivalence. The notion of equivalence defined here is used to provide consistent and intuitive semantics when dealing with missing information in membership contexts.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <em>equivalent</em> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">define Code1: Code { system: 'http://loinc.org', code: '8480-6', display: 'Systolic blood pressure' }
define Concept1: Concept { codes: { Code1 }, display: 'Concepts' }
define Concept2: Concept { codes: { null }, display: 'More Concepts' }
define EquivalentIsTrue: Code1 ~ Code1
define EquivalentIsAlsoTrue: Concept2 ~ Concept2
define EquivalentIsFalse: Concept1 ~ Concept2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="in-codesystem"><a class="anchor" href="#in-codesystem"></a>12.7. In (Codesystem)</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">in(code String, codesystem CodeSystemRef) Boolean
in(code Code, codesystem CodeSystemRef) Boolean
in(concept Concept, codesystem CodeSystemRef) Boolean
in(codes List&lt;Code&gt;, codeSystem CodeSystemRef) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">in</span> (Codesystem) operators determine whether or not a given code, or any of a list of codes, is in a particular codesystem. Note that these operators can only be invoked by referencing a defined <span class="kw">codesystem</span>.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">String</span> overload, if the given code system contains a code with an equivalent code element, the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">Code</span> overload, if the given code system contains an equivalent code, the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">Concept</span> overload, if the given code system contains a code equivalent to any code in the given concept, the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">List&lt;Code&gt;</span> overload, if the given code system contains a code equivalent to any code in the given list, the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>If the <span class="id">code</span> argument is <span class="kw">null</span>, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>If the <span class="id">code</span> system reference cannot be resolved, a run-time error is thrown.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">in</span> (Codesystem) operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">codesystem "SNOMED:2014": 'http://snomed.info/sct'
define StringInCodesystem: '12345678' in "SNOMED:2014"
define CodeInCodesystem: Code { system: "SNOMED:2014", code: '12345678' } in "SNOMED:2014"
define NullStringInCodesystem: null as String in "SNOMED:2014" // false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="in-valueset"><a class="anchor" href="#in-valueset"></a>12.8. In (Valueset)</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">in(code String, valueset ValueSetRef) Boolean
in(code Code, valueset ValueSetRef) Boolean
in(concept Concept, valueset ValueSetRef) Boolean
in(codes List&lt;Code&gt;, valueset ValueSetRef) Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="kw">in</span> (Valueset) operators determine whether or not a given code, or any of a list of codes, is in a particular valueset. Note that these operators can only be invoked by referencing a defined <span class="kw">valueset</span>.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">String</span> overload, if the given valueset contains a code with an equivalent code element, the result is <span class="kw">true</span>. Note that for this overload, because the code being tested cannot specify code system information, if the resolved value set contains codes from multiple code systems, a run-time error is thrown because the operation is ambiguous.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">Code</span> overload, if the given valueset contains an equivalent code, the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">Concept</span> overload, if the given valueset contains a code equivalent to any code in the given concept, the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>For the <span class="id">List&lt;Code&gt;</span> overload, if the given valueset contains a code equivalent to any code in the given list, the result is <span class="kw">true</span>.</p>
</div>
<div class="paragraph">
<p>If the code argument is <span class="kw">null</span>, the result is <span class="kw">false</span>.</p>
</div>
<div class="paragraph">
<p>If the value set reference cannot be resolved, a run-time error is thrown.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="kw">in</span> (Valueset) operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">valueset "A Super Awesome ValueSet": 'http://super.awesome/valueset'
define StringInValueset: '12345678' in "A Super Awesome ValueSet"
define CodeInValueset: Code { system: 'http://snomed.info/sct', code: '12345678' } in "A Super Awesome ValueSet"
define NullStringInValueset: null as String in "A Super Awesome ValueSet" // false</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="errors-and-messaging"><a class="anchor" href="#errors-and-messaging"></a>13. Errors and Messaging</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="message"><a class="anchor" href="#message"></a>13.1. Message</h3>
<div class="paragraph">
<p><strong>Signature:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Message(source T, condition Boolean, code String, severity String, message String) T</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Description:</strong></p>
</div>
<div class="paragraph">
<p>The <span class="id">Message</span> operator provides a run-time mechanism for returning messages, warnings, traces, and errors to the calling environment.</p>
</div>
<div class="paragraph">
<p>The source operator is any type and the result of the operation is the input source; the operation performs no modifications to input. This allows the message operation to appear at any point in any expression of CQL.</p>
</div>
<div class="paragraph">
<p>The condition is used to determine whether the message is generated and returned to the calling environment. If condition is true, the message is generated. Otherwise, the operation only returns the results and performs no processing at all.</p>
</div>
<div class="paragraph">
<p>The code provides a coded representation of the error. Note that this is a token (like a string or integer), not a terminology Code.</p>
</div>
<div class="paragraph">
<p>The severity determines what level of processing should occur for the message that is generated:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Trace – The operation produces an informational message that is expected to be made available to a tracing mechanism such as a debug log in the calling environment. In addition, some representation of the contents of the source parameter should be made available to the tracing mechanism.</p>
</li>
<li>
<p>Message – The operation produces an informational message that is expected to be made available in some way to the calling environment.</p>
</li>
<li>
<p>Warning – The operation produces a warning message that is expected to be made conspicuously available to the calling environment, potentially to the end-user of the logic.</p>
</li>
<li>
<p>Error – The operation produces a run-time error and return the message to the calling environment. This is the only severity that stops evaluation. All other severities continue evaluation of the expression.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If no severity is supplied, a default severity of Message is assumed.</p>
</div>
<div class="paragraph">
<p>The message is the content of the actual message that is sent to the calling environment.</p>
</div>
<div class="paragraph">
<p>Note that for Trace severity, the implementation should output the contents of the source parameter as part of the trace message. Because the logic may be operating on patient information, the utmost care should be taken to ensure that appropriate safeguards are in place to avoid logging sensitive information. At a minimum, all PHI should be redacted from these trace messages.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate the behavior of the <span class="id">Message</span> operator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">parameter Numerator Integer default 1
parameter Denominator Integer default 0
define ErrorMessage: Message('Divide by zero error!', Denominator = 0, 'Undefined', 'Error', 'The Denominator parameter is zero')</code></pre>
</div>
</div>
</div>
</div>
</div>


</div>


				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->
        
    </div>  <!-- /segment-content -->


	<div id="segment-footer" class="segment">  <!-- segment-footer -->
		<div class="container">  <!-- container -->
			<div class="inner-wrapper">
				<p>
        &copy; HL7.org 2014+. CQL STU3 (1.3 Release) generated on 2019-03-17 11:17:12 -0600
        <span style="color: #FFFF77">| 
<!--               <a style="color: #81BEF7" href="http://services.w3.org/htmldiff?doc1=http%3A%2F%2Fcql.hl7.org%2FSTU2%2F<%rellink%>&amp;doc2=<%baseURL%><%rellink%>">Compare to STU2</a> | -->
               <a style="color: #81BEF7" rel="license" href="license.html">License</a> |
               <a style="color: #81BEF7" target="_blank" href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=400">Propose a change</a>
        </span>
        </p>
			</div>  <!-- /inner-wrapper -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-footer -->

	
	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->
    
      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="dist/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script src="dist/bootstrap.min.js"> </script>
<script src="dist/respond.min.js"> </script>
<script src="dist/fhir.js"> </script>
<script src="dist/sidebar.js"> </script>

  <!-- Analytics Below
================================================== -->


<div id="feedly-mini" title="feedly Mini tookit"></div></body></html>




